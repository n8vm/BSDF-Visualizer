(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("OBJ", [], factory);
	else if(typeof exports === 'object')
		exports["OBJ"] = factory();
	else
		root["OBJ"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                  * A class to represent the memory layout for a vertex attribute array. Used by
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method to generate a packed array from mesh data.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout can sort of be thought of as a C-style struct declaration.
                                                                                                                                                                                                                                  * {@link Mesh}'s TBD(...) method will use the {@link Layout} instance to
                                                                                                                                                                                                                                  * pack an array in the given attribute order.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * Layout also is very helpful when calling a WebGL context's
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code> method. If you've created a buffer using
                                                                                                                                                                                                                                  * a Layout instance, then the same Layout instance can be used to determine
                                                                                                                                                                                                                                  * the size, type, normalized, stride, and offset parameters for
                                                                                                                                                                                                                                  * <code>vertexAttribPointer</code>.
                                                                                                                                                                                                                                  * <p>
                                                                                                                                                                                                                                  * For example:
                                                                                                                                                                                                                                  * <pre><code>
                                                                                                                                                                                                                                  *
                                                                                                                                                                                                                                  * const index = glctx.getAttribLocation(shaderProgram, "pos");
                                                                                                                                                                                                                                  * glctx.vertexAttribPointer(
                                                                                                                                                                                                                                  *   layout.position.size,
                                                                                                                                                                                                                                  *   glctx[layout.position.type],
                                                                                                                                                                                                                                  *   layout.position.normalized,
                                                                                                                                                                                                                                  *   layout.position.stride,
                                                                                                                                                                                                                                  *   layout.position.offset);
                                                                                                                                                                                                                                  * </code></pre>
                                                                                                                                                                                                                                  * @see {@link Mesh}
                                                                                                                                                                                                                                  */var
Layout =
/**
          * Create a Layout object. This constructor will throw if any duplicate
          * attributes are given.
          * @param {Array} ...attributes - An ordered list of attributes that
          *        describe the desired memory layout for each vertex attribute.
          *        <p>
          *
          * @see {@link Mesh}
          */exports.Layout =
function Layout() {_classCallCheck(this, Layout);for (var _len = arguments.length, attributes = Array(_len), _key = 0; _key < _len; _key++) {attributes[_key] = arguments[_key];}
    this.attributes = attributes;
    var offset = 0;
    var maxStrideMultiple = 0;var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
        for (var _iterator = attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
            if (this[attribute.key]) {
                throw new DuplicateAttributeException(attribute);
            }
            // Add padding to satisfy WebGL's requirement that all
            // vertexAttribPointer calls have an offset that is a multiple of
            // the type size.
            if (offset % attribute.sizeOfType !== 0) {
                offset += attribute.sizeOfType - offset % attribute.sizeOfType;
                console.warn('Layout requires padding before ' + attribute.key + ' attribute');
            }
            this[attribute.key] = {
                'attribute': attribute,
                'size': attribute.size,
                'type': attribute.type,
                'normalized': attribute.normalized,
                'offset': offset };

            offset += attribute.sizeInBytes;
            maxStrideMultiple = Math.max(
            maxStrideMultiple,
            attribute.sizeOfType);
        }
        // Add padding to the end to satisfy WebGL's requirement that all
        // vertexAttribPointer calls have a stride that is a multiple of the
        // type size. Because we're putting differently sized attributes into
        // the same buffer, it must be padded to a multiple of the largest
        // type size.
    } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}if (offset % maxStrideMultiple !== 0) {
        offset += maxStrideMultiple - offset % maxStrideMultiple;
        console.warn('Layout requires padding at the back');
    }
    this.stride = offset;var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {
        for (var _iterator2 = attributes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var _attribute = _step2.value;
            this[_attribute.key].stride = this.stride;
        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}
};



/**
    * An exception for when two or more of the same attributes are found in the
    * same layout.
    * @private
    */var
DuplicateAttributeException =
/**
                               * Create a DuplicateAttributeException
                               * @param {Attribute} attribute - The attribute that was found more than
                               *        once in the {@link Layout}
                               */
function DuplicateAttributeException(attribute) {_classCallCheck(this, DuplicateAttributeException);
    this.message = 'found duplicate attribute: ' + attribute.key;
};


/**
    * Represents how a vertex attribute should be packed into an buffer.
    * @private
    */var
Attribute =
/**
             * Create an attribute. Do not call this directly, use the predefined
             * constants.
             * @param {string} key - The name of this attribute as if it were a key in
             *        an Object. Use the camel case version of the upper snake case
             *        const name.
             * @param {number} size - The number of components per vertex attribute.
             *        Must be 1, 2, 3, or 4.
             * @param {string} type - The data type of each component for this
             *        attribute. Possible values:<br/>
             *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>
             *        "SHORT": signed 16-bit integer, with values in
             *            [-32768, 32767]<br/>
             *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in
             *            [0, 255]<br/>
             *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in
             *            [0, 65535]<br/>
             *        "FLOAT": 32-bit floating point number
             * @param {boolean} normalized - Whether integer data values should be
             *        normalized when being casted to a float.<br/>
             *        If true, signed integers are normalized to [-1, 1].<br/>
             *        If true, unsigned integers are normalized to [0, 1].<br/>
             *        For type "FLOAT", this parameter has no effect.
             */
function Attribute(key, size, type) {var normalized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;_classCallCheck(this, Attribute);
    this.key = key;
    this.size = size;
    this.type = type;
    this.normalized = false;
    this.sizeOfType = sizeInBytesOfType(type);
    this.sizeInBytes = this.sizeOfType * size;
};


/**
    * @param {string} type - A type accepted by {@link Attribute}.
    * @return The size (in bytes) for a given type.
    * @see {@link Attribute}
    * @private
    */
function sizeInBytesOfType(type) {
    switch (type) {
        case 'BYTE':
        case 'UNSIGNED_BYTE':
            return 1;
        case 'SHORT':
        case 'UNSIGNED_SHORT':
            return 2;
        case 'FLOAT':
            return 4;}

}

// Geometry attributes
/**
 * Attribute layout to pack a vertex's x, y, & z as floats
 *
 * @see {@link Layout}
 */
Layout.POSITION = new Attribute('position', 3, 'FLOAT');

/**
                                                          * Attribute layout to pack a vertex's normal's x, y, & z as floats
                                                          *
                                                          * @see {@link Layout}
                                                          */
Layout.NORMAL = new Attribute('normal', 3, 'FLOAT');

/**
                                                      * Attribute layout to pack a vertex's normal's x, y, & z as floats.
                                                      * <p>
                                                      * This value will be computed on-the-fly based on the texture coordinates.
                                                      * If no texture coordinates are available, the generated value will default to
                                                      * 0, 0, 0.
                                                      *
                                                      * @see {@link Layout}
                                                      */
Layout.TANGENT = new Attribute('tangent', 3, 'FLOAT');

/**
                                                        * Attribute layout to pack a vertex's normal's bitangent x, y, & z as floats.
                                                        * <p>
                                                        * This value will be computed on-the-fly based on the texture coordinates.
                                                        * If no texture coordinates are available, the generated value will default to
                                                        * 0, 0, 0.
                                                        * @see {@link Layout}
                                                        */
Layout.BITANGENT = new Attribute('bitangent', 3, 'FLOAT');

/**
                                                            * Attribute layout to pack a vertex's texture coordinates' u & v as floats
                                                            *
                                                            * @see {@link Layout}
                                                            */
Layout.UV = new Attribute('uv', 2, 'FLOAT');

// Material attributes

/**
 * Attribute layout to pack an unsigned short to be interpreted as a the index
 * into a {@link Mesh}'s materials list.
 * <p>
 * The intention of this value is to send all of the {@link Mesh}'s materials
 * into multiple shader uniforms and then reference the current one by this
 * vertex attribute.
 * <p>
 * example glsl code:
 *
 * <pre><code>
 *  // this is bound using MATERIAL_INDEX
 *  attribute int materialIndex;
 *
 *  struct Material {
 *    vec3 diffuse;
 *    vec3 specular;
 *    vec3 specularExponent;
 *  };
 *
 *  uniform Material materials[MAX_MATERIALS];
 *
 *  // ...
 *
 *  vec3 diffuse = materials[materialIndex];
 *
 * </code></pre>
 * TODO: More description & test to make sure subscripting by attributes even
 * works for webgl
 *
 * @see {@link Layout}
 */
Layout.MATERIAL_INDEX = new Attribute('materialIndex', 1, 'SHORT');
Layout.MATERIAL_ENABLED = new Attribute('materialEnabled', 1, 'UNSIGNED_SHORT');
Layout.AMBIENT = new Attribute('ambient', 3, 'FLOAT');
Layout.DIFFUSE = new Attribute('diffuse', 3, 'FLOAT');
Layout.SPECULAR = new Attribute('specular', 3, 'FLOAT');
Layout.SPECULAR_EXPONENT = new Attribute('specularExponent', 3, 'FLOAT');
Layout.EMISSIVE = new Attribute('emissive', 3, 'FLOAT');
Layout.TRANSMISSION_FILTER = new Attribute('transmissionFilter', 3, 'FLOAT');
Layout.DISSOLVE = new Attribute('dissolve', 1, 'FLOAT');
Layout.ILLUMINATION = new Attribute('illumination', 1, 'UNSIGNED_SHORT');
Layout.REFRACTION_INDEX = new Attribute('refractionIndex', 1, 'FLOAT');
Layout.SHARPNESS = new Attribute('sharpness', 1, 'FLOAT');
Layout.MAP_DIFFUSE = new Attribute('mapDiffuse', 1, 'SHORT');
Layout.MAP_AMBIENT = new Attribute('mapAmbient', 1, 'SHORT');
Layout.MAP_SPECULAR = new Attribute('mapSpecular', 1, 'SHORT');
Layout.MAP_SPECULAR_EXPONENT = new Attribute('mapSpecularExponent', 1, 'SHORT');
Layout.MAP_DISSOLVE = new Attribute('mapDissolve', 1, 'SHORT');
Layout.ANTI_ALIASING = new Attribute('antiAliasing', 1, 'UNSIGNED_SHORT');
Layout.MAP_BUMP = new Attribute('mapBump', 1, 'SHORT');
Layout.MAP_DISPLACEMENT = new Attribute('mapDisplacement', 1, 'SHORT');
Layout.MAP_DECAL = new Attribute('mapDecal', 1, 'SHORT');
Layout.MAP_EMISSIVE = new Attribute('mapEmissive', 1, 'SHORT');

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();var _layout = __webpack_require__(0);function _toConsumableArray(arr) {if (Array.isArray(arr)) {for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {arr2[i] = arr[i];}return arr2;} else {return Array.from(arr);}}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}

/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * The main Mesh class. The constructor will parse through the OBJ file data
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * and collect the vertex, vertex normal, texture, and face information. This
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * information can then be used later on when creating your VBOs. See
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   * OBJ.initMeshBuffers for an example of how to use the newly created Mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   */var
Mesh = function () {
    /**
                     * Create a Mesh
                     * @param {String} objectData - a string representation of an OBJ file with
                     *     newlines preserved.
                     * @param {Object} options - a JS object containing valid options. See class
                     *     documentation for options.
                     * @param {bool} options.enableWTextureCoord - Texture coordinates can have
                     *     an optional "w" coordinate after the u and v coordinates. This extra
                     *     value can be used in order to perform fancy transformations on the
                     *     textures themselves. Default is to truncate to only the u an v
                     *     coordinates. Passing true will provide a default value of 0 in the
                     *     event that any or all texture coordinates don't provide a w value.
                     *     Always use the textureStride attribute in order to determine the
                     *     stride length of the texture coordinates when rendering the element
                     *     array.
                     */
    function Mesh(objectData, options) {_classCallCheck(this, Mesh);
        options = options || {};
        options.materials = options.materials || {};
        options.enableWTextureCoord = !!options.enableWTextureCoord;

        var self = this;
        // the list of unique vertex, normal, texture, attributes
        self.vertices = [];
        self.vertexNormals = [];
        self.textures = [];
        // the indicies to draw the faces
        self.indices = [];
        self.textureStride = options.enableWTextureCoord ? 3 : 2;

        /*
                                                                  The OBJ file format does a sort of compression when saving a model in a
                                                                  program like Blender. There are at least 3 sections (4 including textures)
                                                                  within the file. Each line in a section begins with the same string:
                                                                    * 'v': indicates vertex section
                                                                    * 'vn': indicates vertex normal section
                                                                    * 'f': indicates the faces section
                                                                    * 'vt': indicates vertex texture section (if textures were used on the model)
                                                                  Each of the above sections (except for the faces section) is a list/set of
                                                                  unique vertices.
                                                                   Each line of the faces section contains a list of
                                                                  (vertex, [texture], normal) groups.
                                                                   **Note:** The following documentation will use a capital "V" Vertex to
                                                                  denote the above (vertex, [texture], normal) groups whereas a lowercase
                                                                  "v" vertex is used to denote an X, Y, Z coordinate.
                                                                   Some examples:
                                                                      // the texture index is optional, both formats are possible for models
                                                                      // without a texture applied
                                                                      f 1/25 18/46 12/31
                                                                      f 1//25 18//46 12//31
                                                                       // A 3 vertex face with texture indices
                                                                      f 16/92/11 14/101/22 1/69/1
                                                                       // A 4 vertex face
                                                                      f 16/92/11 40/109/40 38/114/38 14/101/22
                                                                   The first two lines are examples of a 3 vertex face without a texture applied.
                                                                  The second is an example of a 3 vertex face with a texture applied.
                                                                  The third is an example of a 4 vertex face. Note: a face can contain N
                                                                  number of vertices.
                                                                   Each number that appears in one of the groups is a 1-based index
                                                                  corresponding to an item from the other sections (meaning that indexing
                                                                  starts at one and *not* zero).
                                                                   For example:
                                                                      `f 16/92/11` is saying to
                                                                        - take the 16th element from the [v] vertex array
                                                                        - take the 92nd element from the [vt] texture array
                                                                        - take the 11th element from the [vn] normal array
                                                                      and together they make a unique vertex.
                                                                  Using all 3+ unique Vertices from the face line will produce a polygon.
                                                                   Now, you could just go through the OBJ file and create a new vertex for
                                                                  each face line and WebGL will draw what appears to be the same model.
                                                                  However, vertices will be overlapped and duplicated all over the place.
                                                                   Consider a cube in 3D space centered about the origin and each side is
                                                                  2 units long. The front face (with the positive Z-axis pointing towards
                                                                  you) would have a Top Right vertex (looking orthogonal to its normal)
                                                                  mapped at (1,1,1) The right face would have a Top Left vertex (looking
                                                                  orthogonal to its normal) at (1,1,1) and the top face would have a Bottom
                                                                  Right vertex (looking orthogonal to its normal) at (1,1,1). Each face
                                                                  has a vertex at the same coordinates, however, three distinct vertices
                                                                  will be drawn at the same spot.
                                                                   To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`
                                                                  groups), while iterating through the face lines, when a group is encountered
                                                                  the whole group string ('16/92/11') is checked to see if it exists in the
                                                                  packed.hashindices object, and if it doesn't, the indices it specifies
                                                                  are used to look up each attribute in the corresponding attribute arrays
                                                                  already created. The values are then copied to the corresponding unpacked
                                                                  array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),
                                                                  the group string is added to the hashindices set and the current unpacked
                                                                  index is used as this hashindices value so that the group of elements can
                                                                  be reused. The unpacked index is incremented. If the group string already
                                                                  exists in the hashindices object, its corresponding value is the index of
                                                                  that group and is appended to the unpacked indices array.
                                                                  */











        this.name = '';
        var verts = [];
        var vertNormals = [];
        var textures = [];
        var unpacked = {};
        var materialNamesByIndex = [];
        var materialIndicesByName = {};
        // keep track of what material we've seen last
        var currentMaterialIndex = -1;
        // unpacking stuff
        unpacked.verts = [];
        unpacked.norms = [];
        unpacked.textures = [];
        unpacked.hashindices = {};
        unpacked.indices = [];
        unpacked.materialIndices = [];
        unpacked.index = 0;

        var VERTEX_RE = /^v\s/;
        var NORMAL_RE = /^vn\s/;
        var TEXTURE_RE = /^vt\s/;
        var FACE_RE = /^f\s/;
        var WHITESPACE_RE = /\s+/;
        var USE_MATERIAL_RE = /^usemtl/;

        // array of lines separated by the newline
        var lines = objectData.split('\n');

        for (var i = 0; i < lines.length; i++) {
            var line = lines[i].trim();
            if (!line || line.startsWith('#')) {
                continue;
            }
            var elements = line.split(WHITESPACE_RE);
            elements.shift();

            if (VERTEX_RE.test(line)) {
                // if this is a vertex
                verts.push.apply(verts, _toConsumableArray(elements));
            } else if (NORMAL_RE.test(line)) {
                // if this is a vertex normal
                vertNormals.push.apply(vertNormals, _toConsumableArray(elements));
            } else if (TEXTURE_RE.test(line)) {
                var coords = elements;
                // by default, the loader will only look at the U and V
                // coordinates of the vt declaration. So, this truncates the
                // elements to only those 2 values. If W texture coordinate
                // support is enabled, then the texture coordinate is
                // expected to have three values in it.
                if (elements.length > 2 && !options.enableWTextureCoord) {
                    coords = elements.slice(0, 1);
                }
                // If for some reason W texture coordinate support is enabled
                // and only the U and V coordinates are given, then we supply
                // the default value of 0 so that the stride length is correct
                // when the textures are unpacked below.
                else if (elements.length === 2 && options.enableWTextureCoord) {
                        coords.push(0);
                    }
                textures.push.apply(textures, _toConsumableArray(coords));
            } else if (USE_MATERIAL_RE.test(line)) {
                var materialName = elements[0];

                // check to see if we've ever seen it before
                if (!(materialName in materialIndicesByName)) {
                    // new material we've never seen
                    materialNamesByIndex.push(materialName);
                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;
                }

                // keep track of the current material index
                currentMaterialIndex = materialIndicesByName[materialName];
            } else if (FACE_RE.test(line)) {
                // if this is a face
                /*
                split this face into an array of Vertex groups
                for example:
                   f 16/92/11 14/101/22 1/69/1
                becomes:
                  ['16/92/11', '14/101/22', '1/69/1'];
                */
                var quad = false;
                for (var j = 0, eleLen = elements.length; j < eleLen; j++) {
                    // Triangulating quads
                    // quad: 'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2 v3/t3/vn3/'
                    // corresponding triangles:
                    //      'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2'
                    //      'f v2/t2/vn2 v3/t3/vn3 v0/t0/vn0'
                    if (j === 3 && !quad) {
                        // add v2/t2/vn2 in again before continuing to 3
                        j = 2;
                        quad = true;
                    }
                    var hash0 = elements[0] + ',' + currentMaterialIndex;
                    var hash = elements[j] + ',' + currentMaterialIndex;
                    if (hash in unpacked.hashindices) {
                        unpacked.indices.push(unpacked.hashindices[hash]);
                    } else {
                        /*
                            Each element of the face line array is a Vertex which has its
                            attributes delimited by a forward slash. This will separate
                            each attribute into another array:
                                '19/92/11'
                            becomes:
                                Vertex = ['19', '92', '11'];
                            where
                                Vertex[0] is the vertex index
                                Vertex[1] is the texture index
                                Vertex[2] is the normal index
                             Think of faces having Vertices which are comprised of the
                             attributes location (v), texture (vt), and normal (vn).
                             */
                        var vertex = elements[j].split('/');
                        // it's possible for faces to only specify the vertex
                        // and the normal. In this case, vertex will only have
                        // a length of 2 and not 3 and the normal will be the
                        // second item in the list with an index of 1.
                        var normalIndex = vertex.length - 1;
                        /*
                                                              The verts, textures, and vertNormals arrays each contain a
                                                              flattend array of coordinates.
                                                               Because it gets confusing by referring to Vertex and then
                                                              vertex (both are different in my descriptions) I will explain
                                                              what's going on using the vertexNormals array:
                                                               vertex[2] will contain the one-based index of the vertexNormals
                                                              section (vn). One is subtracted from this index number to play
                                                              nice with javascript's zero-based array indexing.
                                                               Because vertexNormal is a flattened array of x, y, z values,
                                                              simple pointer arithmetic is used to skip to the start of the
                                                              vertexNormal, then the offset is added to get the correct
                                                              component: +0 is x, +1 is y, +2 is z.
                                                               This same process is repeated for verts and textures.
                                                              */




                        // Vertex position
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 0]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 1]);
                        unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 2]);
                        // Vertex textures
                        if (textures.length) {
                            var stride = options.enableWTextureCoord ? 3 : 2;
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 0]);
                            unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 1]);
                            if (options.enableWTextureCoord) {
                                unpacked.textures.push(+textures[(vertex[1] - 1) * stride + 2]);
                            }
                        }
                        // Vertex normals
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 0]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 1]);
                        unpacked.norms.push(+vertNormals[(vertex[normalIndex] - 1) * 3 + 2]);
                        // Vertex material indices
                        unpacked.materialIndices.push(currentMaterialIndex);
                        // add the newly created Vertex to the list of indices
                        unpacked.hashindices[hash] = unpacked.index;
                        unpacked.indices.push(unpacked.index);
                        // increment the counter
                        unpacked.index += 1;
                    }
                    if (j === 3 && quad) {
                        // add v0/t0/vn0 onto the second triangle
                        unpacked.indices.push(unpacked.hashindices[hash0]);
                    }
                }
            }
        }
        self.vertices = unpacked.verts;
        self.vertexNormals = unpacked.norms;
        self.textures = unpacked.textures;
        self.vertexMaterialIndices = unpacked.materialIndices;
        self.indices = unpacked.indices;

        self.materialNames = materialNamesByIndex;
        self.materialIndices = materialIndicesByName;
        self.materialsByIndex = {};
    }

    /**
       * @param {Layout} layout - A {@link Layout} object that describes the
       * desired memory layout of the generated buffer
       * @return {ArrayBuffer} The packed array in the ... TODO
       */_createClass(Mesh, [{ key: 'makeBufferData', value: function makeBufferData(
        layout) {
            var numItems = this.vertices.length / 3;
            var buffer = new ArrayBuffer(layout.stride * numItems);
            buffer.numItems = numItems;
            var dataView = new DataView(buffer);
            for (var i = 0, vertexOffset = 0; i < numItems; i++) {
                vertexOffset = i * layout.stride;
                // copy in the vertex data in the order and format given by the
                // layout param
                var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = layout.attributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attribute = _step.value;
                        var offset = vertexOffset + layout[attribute.key].offset;
                        switch (attribute.key) {
                            case _layout.Layout.POSITION.key:
                                dataView.setFloat32(offset, this.vertices[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);
                                break;
                            case _layout.Layout.UV.key:
                                dataView.setFloat32(offset, this.textures[i * 2], true);
                                dataView.setFloat32(offset + 4, this.vertices[i * 2 + 1], true);
                                break;
                            case _layout.Layout.NORMAL.key:
                                dataView.setFloat32(offset, this.vertexNormals[i * 3], true);
                                dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);
                                dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);
                                break;
                            case _layout.Layout.MATERIAL_INDEX.key:
                                dataView.setInt16(offset, this.vertexMaterialIndices[i], true);
                                break;
                            case _layout.Layout.AMBIENT.key:{
                                    var materialIndex = this.vertexMaterialIndices[i];
                                    var material = this.materialsByIndex[materialIndex];
                                    if (!material) {
                                        console.warn('Material "' + this.materialNames[materialIndex] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, material.ambient[0], true);
                                    dataView.setFloat32(offset + 4, material.ambient[1], true);
                                    dataView.setFloat32(offset + 8, material.ambient[2], true);
                                    break;
                                }
                            case _layout.Layout.DIFFUSE.key:{
                                    var _materialIndex = this.vertexMaterialIndices[i];
                                    var _material = this.materialsByIndex[_materialIndex];
                                    if (!_material) {
                                        console.warn('Material "' + this.materialNames[_materialIndex] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material.diffuse[0], true);
                                    dataView.setFloat32(offset + 4, _material.diffuse[1], true);
                                    dataView.setFloat32(offset + 8, _material.diffuse[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR.key:{
                                    var _materialIndex2 = this.vertexMaterialIndices[i];
                                    var _material2 = this.materialsByIndex[_materialIndex2];
                                    if (!_material2) {
                                        console.warn('Material "' + this.materialNames[_materialIndex2] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material2.specular[0], true);
                                    dataView.setFloat32(offset + 4, _material2.specular[1], true);
                                    dataView.setFloat32(offset + 8, _material2.specular[2], true);
                                    break;
                                }
                            case _layout.Layout.SPECULAR_EXPONENT.key:{
                                    var _materialIndex3 = this.vertexMaterialIndices[i];
                                    var _material3 = this.materialsByIndex[_materialIndex3];
                                    if (!_material3) {
                                        console.warn('Material "' + this.materialNames[_materialIndex3] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material3.specularExponent, true);
                                    break;
                                }
                            case _layout.Layout.EMISSIVE.key:{
                                    var _materialIndex4 = this.vertexMaterialIndices[i];
                                    var _material4 = this.materialsByIndex[_materialIndex4];
                                    if (!_material4) {
                                        console.warn('Material "' + this.materialNames[_materialIndex4] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material4.emissive[0], true);
                                    dataView.setFloat32(offset + 4, _material4.emissive[1], true);
                                    dataView.setFloat32(offset + 8, _material4.emissive[2], true);
                                    break;
                                }
                            case _layout.Layout.TRANSMISSION_FILTER.key:{
                                    var _materialIndex5 = this.vertexMaterialIndices[i];
                                    var _material5 = this.materialsByIndex[_materialIndex5];
                                    if (!_material5) {
                                        console.warn('Material "' + this.materialNames[_materialIndex5] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material5.transmissionFilter[0], true);
                                    dataView.setFloat32(offset + 4, _material5.transmissionFilter[1], true);
                                    dataView.setFloat32(offset + 8, _material5.transmissionFilter[2], true);
                                    break;
                                }
                            case _layout.Layout.DISSOLVE.key:{
                                    var _materialIndex6 = this.vertexMaterialIndices[i];
                                    var _material6 = this.materialsByIndex[_materialIndex6];
                                    if (!_material6) {
                                        console.warn('Material "' + this.materialNames[_materialIndex6] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material6.dissolve, true);
                                    break;
                                }
                            case _layout.Layout.ILLUMINATION.key:{
                                    var _materialIndex7 = this.vertexMaterialIndices[i];
                                    var _material7 = this.materialsByIndex[_materialIndex7];
                                    if (!_material7) {
                                        console.warn('Material "' + this.materialNames[_materialIndex7] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setInt16(offset, _material7.illumination, true);
                                    break;
                                }
                            case _layout.Layout.REFRACTION_INDEX.key:{
                                    var _materialIndex8 = this.vertexMaterialIndices[i];
                                    var _material8 = this.materialsByIndex[_materialIndex8];
                                    if (!_material8) {
                                        console.warn('Material "' + this.materialNames[_materialIndex8] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material8.refractionIndex, true);
                                    break;
                                }
                            case _layout.Layout.SHARPNESS.key:{
                                    var _materialIndex9 = this.vertexMaterialIndices[i];
                                    var _material9 = this.materialsByIndex[_materialIndex9];
                                    if (!_material9) {
                                        console.warn('Material "' + this.materialNames[_materialIndex9] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setFloat32(offset, _material9.sharpness, true);
                                    break;
                                }
                            case _layout.Layout.ANTI_ALIASING.key:{
                                    var _materialIndex10 = this.vertexMaterialIndices[i];
                                    var _material10 = this.materialsByIndex[_materialIndex10];
                                    if (!_material10) {
                                        console.warn('Material "' + this.materialNames[_materialIndex10] + '" not found in mesh. Did you forget to call addMaterialLibrary(...)?"');
                                        break;
                                    }
                                    dataView.setInt16(offset, _material10.antiAliasing, true);
                                    break;
                                }}

                    }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}
            }
            return buffer;
        } }, { key: 'makeIndexBufferData', value: function makeIndexBufferData()

        {
            var buffer = new Uint16Array(this.indices);
            buffer.numItems = this.indices.length;
            return buffer;
        } }, { key: 'addMaterialLibrary', value: function addMaterialLibrary(

        mtl) {
            for (var name in mtl.materials) {
                if (!(name in this.materialIndices)) {
                    // This material is not referenced by the mesh
                    continue;
                }

                var material = mtl.materials[name];

                // Find the material index for this material
                var materialIndex = this.materialIndices[material.name];

                // Put the material into the materialsByIndex object at the right
                // spot as determined when the obj file was parsed
                this.materialsByIndex[materialIndex] = material;
            }
        } }]);return Mesh;}();exports.default = Mesh;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _toArray(arr) {return Array.isArray(arr) ? arr : Array.from(arr);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * The Material class.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */var
Material =
/**
            * Constructor
            * @param {String} name the unique name of the material
            */exports.Material =
function Material(name) {_classCallCheck(this, Material);
  // the unique material ID.
  this.name = name;
  // The values for the following attibutes
  // are an array of R, G, B normalized values.
  // Ka - Ambient Reflectivity
  this.ambient = [0, 0, 0];
  // Kd - Defuse Reflectivity
  this.diffuse = [0, 0, 0];
  // Ks
  this.specular = [0, 0, 0];
  // Ke
  this.emissive = [0, 0, 0];
  // Tf
  this.transmissionFilter = [0, 0, 0];
  // d
  this.dissolve = 0;
  // valid range is between 0 and 1000
  this.specularExponent = 0;
  // either d or Tr; valid values are normalized
  this.transparency = 0;
  // illum - the enum of the illumination model to use
  this.illumination = 0;
  // Ni - Set to "normal" (air).
  this.refractionIndex = 1;
  // sharpness
  this.sharpness = 0;
  // map_Kd
  this.mapDiffuse = null;
  // map_Ka
  this.mapAmbient = null;
  // map_Ks
  this.mapSpecular = null;
  // map_Ns
  this.mapSpecularExponent = null;
  // map_d
  this.mapDissolve = null;
  // map_aat
  this.antiAliasing = false;
  // map_bump or bump
  this.mapBump = null;
  // disp
  this.mapDisplacement = null;
  // decal
  this.mapDecal = null;
  // map_Ke
  this.mapEmissive = null;
  // refl - when the reflection type is a cube, there will be multiple refl
  //        statements for each side of the cube. If it's a spherical
  //        reflection, there should only ever be one.
  this.mapReflections = [];
};


/**
    * https://en.wikipedia.org/wiki/Wavefront_.obj_file
    * http://paulbourke.net/dataformats/mtl/
    */var
MaterialLibrary = exports.MaterialLibrary = function () {
  /**
                                                          * Constructs the Material Parser
                                                          * @param {String} mtlData the MTL file contents
                                                          */
  function MaterialLibrary(mtlData) {_classCallCheck(this, MaterialLibrary);
    this.data = mtlData;
    this.currentMaterial = null;
    this.materials = {};

    this.parse();
  }

  /* eslint-disable camelcase */
  /* the function names here disobey camelCase conventions
                                    to make parsing/routing easier. see the parse function
                                    documentation for more information. */

  /**
                                                                            * Creates a new Material object and adds to the registry.
                                                                            * @param {string[]} tokens the tokens associated with the directive
                                                                            */_createClass(MaterialLibrary, [{ key: 'parse_newmtl', value: function parse_newmtl(
    tokens) {
      var name = tokens[0];
      // console.info('Parsing new Material:', name);

      this.currentMaterial = new Material(name);
      this.materials[name] = this.currentMaterial;
    }

    /**
       * See the documenation for parse_Ka below for a better understanding.
       *
       * Given a list of possible color tokens, returns an array of R, G, and B
       * color values.
       *
       * @param {string[]} tokens the tokens associated with the directive
       * @return {*} a 3 element array containing the R, G, and B values
       * of the color.
       */ }, { key: 'parseColor', value: function parseColor(
    tokens) {
      if (tokens[0] == 'spectral') {
        console.error(
        'The MTL parser does not support spectral curve files. You will ' +
        'need to convert the MTL colors to either RGB or CIEXYZ.');

        return;
      }

      if (tokens[0] == 'xyz') {
        console.warn('TODO: convert XYZ to RGB');
        return;
      }

      // from my understanding of the spec, RGB values at this point
      // will either be 3 floats or exactly 1 float, so that's the check
      // that i'm going to perform here
      if (tokens.length == 3) {
        return tokens.map(parseFloat);
      }

      // Since tokens at this point has a length of 3, we're going to assume
      // it's exactly 1, skipping the check for 2.
      var value = parseFloat(tokens[0]);
      // in this case, all values are equivalent
      return [value, value, value];
    }

    /**
       * Parse the ambient reflectivity
       *
       * A Ka directive can take one of three forms:
       *   - Ka r g b
       *   - Ka spectral file.rfl
       *   - Ka xyz x y z
       * These three forms are mutually exclusive in that only one
       * declaration can exist per material. It is considered a syntax
       * error otherwise.
       *
       * The "Ka" form specifies the ambient reflectivity using RGB values.
       * The "g" and "b" values are optional. If only the "r" value is
       * specified, then the "g" and "b" values are assigned the value of
       * "r". Values are normally in the range 0.0 to 1.0. Values outside
       * of this range increase or decrease the reflectivity accordingly.
       *
       * The "Ka spectral" form specifies the ambient reflectivity using a
       * spectral curve. "file.rfl" is the name of the ".rfl" file containing
       * the curve data. "factor" is an optional argument which is a multiplier
       * for the values in the .rfl file and defaults to 1.0 if not specified.
       *
       * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.
       * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments
       * are optional and take on the value of the "x" component if only "x" is
       * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and
       * increase or decrease ambient reflectivity accordingly outside of that
       * range.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ka', value: function parse_Ka(
    tokens) {
      this.currentMaterial.ambient = this.parseColor(tokens);
    }

    /**
       * Diffuse Reflectivity
       *
       * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Kd', value: function parse_Kd(
    tokens) {
      this.currentMaterial.diffuse = this.parseColor(tokens);
    }

    /**
       * Spectral Reflectivity
       *
       * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ks', value: function parse_Ks(
    tokens) {
      this.currentMaterial.specular = this.parseColor(tokens);
    }

    /**
       * Emissive
       *
       * The amount and color of light emitted by the object.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ke', value: function parse_Ke(
    tokens) {
      this.currentMaterial.emissive = this.parseColor(tokens);
    }

    /**
       * Transmission Filter
       *
       * Any light passing through the object is filtered by the transmission
       * filter, which only allows specific colors to pass through. For example, Tf
       * 0 1 0 allows all of the green to pass through and filters out all of the
       * red and blue.
       *
       * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules
       * are the same
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Tf', value: function parse_Tf(
    tokens) {
      this.currentMaterial.transmissionFilter = this.parseColor(tokens);
    }

    /**
       * Specifies the dissolve for the current material.
       *
       * Statement: d [-halo] `factor`
       *
       * Example: "d 0.5"
       *
       * The factor is the amount this material dissolves into the background. A
       * factor of 1.0 is fully opaque. This is the default when a new material is
       * created. A factor of 0.0 is fully dissolved (completely transparent).
       *
       * Unlike a real transparent material, the dissolve does not depend upon
       * material thickness nor does it have any spectral character. Dissolve works
       * on all illumination models.
       *
       * The dissolve statement allows for an optional "-halo" flag which indicates
       * that a dissolve is dependent on the surface orientation relative to the
       * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",
       * will be fully dissolved at its center and will appear gradually more opaque
       * toward its edge.
       *
       * "factor" is the minimum amount of dissolve applied to the material. The
       * amount of dissolve will vary between 1.0 (fully opaque) and the specified
       * "factor". The formula is:
       *
       *    dissolve = 1.0 - (N*v)(1.0-factor)
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_d', value: function parse_d(
    tokens) {
      // this ignores the -halo option as I can't find any documentation on what
      // it's supposed to be.
      this.currentMaterial.dissolve = parseFloat(tokens.pop());
    }

    /**
       * The "illum" statement specifies the illumination model to use in the
       * material. Illumination models are mathematical equations that represent
       * various material lighting and shading effects.
       *
       * The illumination number can be a number from 0 to 10. The following are
       * the list of illumination enumerations and their summaries:
       * 0. Color on and Ambient off
       * 1. Color on and Ambient on
       * 2. Highlight on
       * 3. Reflection on and Ray trace on
       * 4. Transparency: Glass on, Reflection: Ray trace on
       * 5. Reflection: Fresnel on and Ray trace on
       * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on
       * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on
       * 8. Reflection on and Ray trace off
       * 9. Transparency: Glass on, Reflection: Ray trace off
       * 10. Casts shadows onto invisible surfaces
       *
       * Example: "illum 2" to specify the "Highlight on" model
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_illum', value: function parse_illum(
    tokens) {
      this.currentMaterial.illumination = parseInt(tokens[0]);
    }

    /**
       * Optical Density (AKA Index of Refraction)
       *
       * Statement: Ni `index`
       *
       * Example: Ni 1.0
       *
       * Specifies the optical density for the surface. `index` is the value
       * for the optical density. The values can range from 0.001 to 10.  A value of
       * 1.0 means that light does not bend as it passes through an object.
       * Increasing the optical_density increases the amount of bending. Glass has
       * an index of refraction of about 1.5. Values of less than 1.0 produce
       * bizarre results and are not recommended
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ni', value: function parse_Ni(
    tokens) {
      this.currentMaterial.refractionIndex = parseFloat(tokens[0]);
    }

    /**
       * Specifies the specular exponent for the current material. This defines the
       * focus of the specular highlight.
       *
       * Statement: Ns `exponent`
       *
       * Example: "Ns 250"
       *
       * `exponent` is the value for the specular exponent. A high exponent results
       * in a tight, concentrated highlight. Ns Values normally range from 0 to
       * 1000.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_Ns', value: function parse_Ns(
    tokens) {
      this.currentMaterial.specularExponent = parseInt(tokens[0]);
    }

    /**
       * Specifies the sharpness of the reflections from the local reflection map.
       *
       * Statement: sharpness `value`
       *
       * Example: "sharpness 100"
       *
       * If a material does not have a local reflection map defined in its material
       * defintions, sharpness will apply to the global reflection map defined in
       * PreView.
       *
       * `value` can be a number from 0 to 1000. The default is 60. A high value
       * results in a clear reflection of objects in the reflection map.
       *
       * Tip: sharpness values greater than 100 introduce aliasing effects in
       * flat surfaces that are viewed at a sharp angle.
       *
       * @param {string[]} tokens the tokens associated with the directive
       */ }, { key: 'parse_sharpness', value: function parse_sharpness(
    tokens) {
      this.currentMaterial.sharpness = parseInt(tokens[0]);
    }

    /**
       * Parses the -cc flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -cc flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_cc', value: function parse_cc(
    values, options) {
      options.colorCorrection = values[0] == 'on';
    }

    /**
       * Parses the -blendu flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -blendu flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_blendu', value: function parse_blendu(
    values, options) {
      options.horizontalBlending = values[0] == 'on';
    }

    /**
       * Parses the -blendv flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -blendv flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_blendv', value: function parse_blendv(
    values, options) {
      options.verticalBlending = values[0] == 'on';
    }

    /**
       * Parses the -boost flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -boost flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_boost', value: function parse_boost(
    values, options) {
      options.boostMipMapSharpness = parseFloat(values[0]);
    }

    /**
       * Parses the -mm flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -mm flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_mm', value: function parse_mm(
    values, options) {
      options.modifyTextureMap.brightness = parseFloat(values[0]);
      options.modifyTextureMap.contrast = parseFloat(values[1]);
    }

    /**
       * Parses and sets the -o, -s, and -t  u, v, and w values
       *
       * @param {string[]} values the values passed to the -o, -s, -t flag
       * @param {Object} option the Object of either the -o, -s, -t option
       * @param {Integer} defaultValue the Object of all image options
       */ }, { key: 'parse_ost', value: function parse_ost(
    values, option, defaultValue) {
      while (values.length < 3) {
        values.push(defaultValue);
      }

      option.u = parseFloat(values[0]);
      option.v = parseFloat(values[1]);
      option.w = parseFloat(values[2]);
    }

    /**
       * Parses the -o flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -o flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_o', value: function parse_o(
    values, options) {
      this.parse_ost(values, options.offset, 0);
    }

    /**
       * Parses the -s flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -s flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_s', value: function parse_s(
    values, options) {
      this.parse_ost(values, options.scale, 1);
    }

    /**
       * Parses the -t flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -t flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_t', value: function parse_t(
    values, options) {
      this.parse_ost(values, options.turbulence, 0);
    }

    /**
       * Parses the -texres flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -texres flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_texres', value: function parse_texres(
    values, options) {
      options.textureResolution = parseFloat(values[0]);
    }

    /**
       * Parses the -clamp flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -clamp flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_clamp', value: function parse_clamp(
    values, options) {
      options.clamp = values[0] == 'on';
    }

    /**
       * Parses the -bm flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -bm flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_bm', value: function parse_bm(
    values, options) {
      options.bumpMultiplier = parseFloat(values[0]);
    }

    /**
       * Parses the -imfchan flag and updates the options object with the values.
       *
       * @param {string[]} values the values passed to the -imfchan flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_imfchan', value: function parse_imfchan(
    values, options) {
      options.imfChan = values[0];
    }

    /**
       * This only exists for relection maps and denotes the type of reflection.
       *
       * @param {string[]} values the values passed to the -type flag
       * @param {Object} options the Object of all image options
       */ }, { key: 'parse_type', value: function parse_type(
    values, options) {
      options.reflectionType = values[0];
    }

    /**
       * Parses the texture's options and returns an options object with the info
       *
       * @param {string[]} tokens all of the option tokens to pass to the texture
       * @return {Object} a complete object of objects to apply to the texture
       */ }, { key: 'parseOptions', value: function parseOptions(
    tokens) {
      var options = {
        colorCorrection: false,
        horizontalBlending: true,
        verticalBlending: true,
        boostMipMapSharpness: 0,
        modifyTextureMap: {
          brightness: 0,
          contrast: 1 },

        offset: { u: 0, v: 0, w: 0 },
        scale: { u: 1, v: 1, w: 1 },
        turbulence: { u: 0, v: 0, w: 0 },
        clamp: false,
        textureResolution: null,
        bumpMultiplier: 1,
        imfChan: null };


      var option = void 0;
      var values = void 0;
      var optionsToValues = {};

      tokens.reverse();

      while (tokens.length) {
        var token = tokens.pop();

        if (token.startsWith('-')) {
          option = token.substr(1);
          optionsToValues[option] = [];
        } else {
          optionsToValues[option].push(token);
        }
      }

      for (option in optionsToValues) {
        if (!optionsToValues.hasOwnProperty(option)) {
          continue;
        }
        values = optionsToValues[option];
        var optionMethod = this['parse_' + option];
        if (optionMethod) {
          optionMethod.bind(this)(values, options);
        }
      }

      return options;
    }

    /**
       * Parses the given texture map line.
       *
       * @param {string[]} tokens all of the tokens representing the texture
       * @return {Object} a complete object of objects to apply to the texture
       */ }, { key: 'parseMap', value: function parseMap(
    tokens) {
      // according to wikipedia:
      // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)
      // there is at least one vendor that places the filename before the options
      // rather than after (which is to spec). All options start with a '-'
      // so if the first token doesn't start with a '-', we're going to assume
      // it's the name of the map file.
      var filename = void 0;
      var options = void 0;
      if (!tokens[0].startsWith('-')) {var _tokens = _toArray(
        tokens);filename = _tokens[0];options = _tokens.slice(1);
      } else {
        filename = tokens.pop();
        options = tokens;
      }

      options = this.parseOptions(options);
      options['filename'] = filename;
      return options;
    }

    /**
       * Parses the ambient map.
       *
       * @param {string[]} tokens list of tokens for the map_Ka direcive
       */ }, { key: 'parse_map_Ka', value: function parse_map_Ka(
    tokens) {
      this.currentMaterial.mapAmbient = this.parseMap(tokens);
    }

    /**
       * Parses the diffuse map.
       *
       * @param {string[]} tokens list of tokens for the map_Kd direcive
       */ }, { key: 'parse_map_Kd', value: function parse_map_Kd(
    tokens) {
      this.currentMaterial.mapDiffuse = this.parseMap(tokens);
    }

    /**
       * Parses the specular map.
       *
       * @param {string[]} tokens list of tokens for the map_Ks direcive
       */ }, { key: 'parse_map_Ks', value: function parse_map_Ks(
    tokens) {
      this.currentMaterial.mapSpecular = this.parseMap(tokens);
    }

    /**
       * Parses the emissive map.
       *
       * @param {string[]} tokens list of tokens for the map_Ke direcive
       */ }, { key: 'parse_map_Ke', value: function parse_map_Ke(
    tokens) {
      this.currentMaterial.mapEmissive = this.parseMap(tokens);
    }

    /**
       * Parses the specular exponent map.
       *
       * @param {string[]} tokens list of tokens for the map_Ns direcive
       */ }, { key: 'parse_map_Ns', value: function parse_map_Ns(
    tokens) {
      this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);
    }

    /**
       * Parses the dissolve map.
       *
       * @param {string[]} tokens list of tokens for the map_d direcive
       */ }, { key: 'parse_map_d', value: function parse_map_d(
    tokens) {
      this.currentMaterial.mapDissolve = this.parseMap(tokens);
    }

    /**
       * Parses the anti-aliasing option.
       *
       * @param {string[]} tokens list of tokens for the map_aat direcive
       */ }, { key: 'parse_map_aat', value: function parse_map_aat(
    tokens) {
      this.currentMaterial.antiAliasing = tokens[0] == 'on';
    }

    /**
       * Parses the bump map.
       *
       * @param {string[]} tokens list of tokens for the map_bump direcive
       */ }, { key: 'parse_map_bump', value: function parse_map_bump(
    tokens) {
      this.currentMaterial.mapBump = this.parseMap(tokens);
    }

    /**
       * Parses the bump map.
       *
       * @param {string[]} tokens list of tokens for the bump direcive
       */ }, { key: 'parse_bump', value: function parse_bump(
    tokens) {
      this.parse_map_bump(tokens);
    }

    /**
       * Parses the disp map.
       *
       * @param {string[]} tokens list of tokens for the disp direcive
       */ }, { key: 'parse_disp', value: function parse_disp(
    tokens) {
      this.currentMaterial.mapDisplacement = this.parseMap(tokens);
    }

    /**
       * Parses the decal map.
       *
       * @param {string[]} tokens list of tokens for the map_decal direcive
       */ }, { key: 'parse_decal', value: function parse_decal(
    tokens) {
      this.currentMaterial.mapDecal = this.parseMap(tokens);
    }

    /**
       * Parses the refl map.
       *
       * @param {string[]} tokens list of tokens for the refl direcive
       */ }, { key: 'parse_refl', value: function parse_refl(
    tokens) {
      this.currentMaterial.mapReflections.push(this.parseMap(tokens));
    }

    /**
       * Parses the MTL file.
       * 
       * Iterates line by line parsing each MTL directive.
       * 
       * This function expects the first token in the line
       * to be a valid MTL directive. That token is then used
       * to try and run a method on this class. parse_[directive]
       * E.g., the `newmtl` directive would try to call the method
       * parse_newmtl. Each parsing function takes in the remaining
       * list of tokens and updates the currentMaterial class with
       * the attributes provided.
       */ }, { key: 'parse', value: function parse()
    {
      var lines = this.data.split(/\r?\n/);var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {
        for (var _iterator = lines[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var line = _step.value;
          line = line.trim();
          if (!line || line.startsWith('#')) {
            continue;
          }

          var tokens = line.split(/\s/);
          var directive = void 0;var _tokens2 =
          tokens;var _tokens3 = _toArray(_tokens2);directive = _tokens3[0];tokens = _tokens3.slice(1);

          var parseMethod = this['parse_' + directive];

          if (!parseMethod) {
            console.warn('Don\'t know how to parse the directive: "' + directive + '"');
            continue;
          }

          // console.log(`Parsing "${directive}" with tokens: ${tokens}`);
          parseMethod.bind(this)(tokens);
        }

        // some cleanup. These don't need to be exposed as public data.
      } catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}delete this.data;
      this.currentMaterial = null;
    }

    /* eslint-enable camelcase*/ }]);return MaterialLibrary;}();
;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(4);


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.deleteMeshBuffers = exports.initMeshBuffers = exports.downloadMeshes = exports.downloadModels = exports.Layout = exports.MaterialLibrary = exports.Material = exports.Mesh = undefined;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);
var _material = __webpack_require__(2);
var _layout = __webpack_require__(0);
var _utils = __webpack_require__(5);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}



/**
                                                                                                                               * @namespace
                                                                                                                               */exports.

Mesh = _mesh2.default;exports.
Material = _material.Material;exports.
MaterialLibrary = _material.MaterialLibrary;exports.
Layout = _layout.Layout;exports.

downloadModels = _utils.downloadModels;exports.
downloadMeshes = _utils.downloadMeshes;exports.
initMeshBuffers = _utils.initMeshBuffers;exports.
deleteMeshBuffers = _utils.deleteMeshBuffers;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.






































































































downloadModels = downloadModels;exports.








































































































downloadMeshes = downloadMeshes;exports.


















































































































initMeshBuffers = initMeshBuffers;exports.






deleteMeshBuffers = deleteMeshBuffers;var _mesh = __webpack_require__(1);var _mesh2 = _interopRequireDefault(_mesh);var _material = __webpack_require__(2);var _layout = __webpack_require__(0);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function downloadMtlTextures(mtl, root) {var mapAttributes = ['mapDiffuse', 'mapAmbient', 'mapSpecular', 'mapDissolve', 'mapBump', 'mapDisplacement', 'mapDecal', 'mapEmissive'];if (!root.endsWith('/')) {root += '/';}var textures = [];for (var material in mtl.materials) {if (!mtl.materials.hasOwnProperty(material)) {continue;}material = mtl.materials[material];var _loop = function _loop(attr) {var mapData = material[attr];if (!mapData) {return 'continue';}var url = root + mapData.filename;textures.push(fetch(url).then(function (response) {if (!response.ok) {throw new Error();}return response.blob();}).then(function (data) {var image = new Image();image.src = URL.createObjectURL(data);mapData.texture = image;}).catch(function () {console.error('Unable to download texture: ' + url);}));};var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {for (var _iterator = mapAttributes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var attr = _step.value;var _ret = _loop(attr);if (_ret === 'continue') continue;}} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}}return Promise.all(textures);} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * Accepts a list of model request objects and returns a Promise that
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * resolves when all models have been downloaded and parsed.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The list of model objects follow this interface:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  obj: 'path/to/model.obj',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  mtl: true | 'path/to/model.mtl',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  downloadMtlTextures: true | false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  mtlTextureRoot: '/models/suzanne/maps'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *  name: 'suzanne'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `obj` attribute is required and should be the path to the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * model's .obj file relative to the current repo (absolute URLs are
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * suggested).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `mtl` attribute is optional and can either be a boolean or
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * a path to the model's .mtl file relative to the current URL. If
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * the value is `true`, then the path and basename given for the `obj`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * attribute is used replacing the .obj suffix for .mtl
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * E.g.: {obj: 'models/foo.obj', mtl: true} would search for 'models/foo.mtl'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `name` attribute is optional and is a human friendly name to be
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * included with the parsed OBJ and MTL files. If not given, the base .obj
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * filename will be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `downloadMtlTextures` attribute is a flag for automatically downloading
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * any images found in the MTL file and attaching them to each Material
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * created from that file. For example, if material.mapDiffuse is set (there
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * was data in the MTL file), then material.mapDiffuse.texture will contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * the downloaded image. This option defaults to `true`. By default, the MTL's
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * URL will be used to determine the location of the images.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * The `mtlTextureRoot` attribute is optional and should point to the location
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * on the server that this MTL's texture files are located. The default is to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * use the MTL file's location.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * @returns {Promise} the result of downloading the given list of models. The
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * promise will resolve with an object whose keys are the names of the models
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * and the value is its Mesh object. Each Mesh object will automatically
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           * have its addMaterialLibrary() method called to set the given MTL data (if given).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           */function downloadModels(models) {var finished = [];var _loop2 = function _loop2(model) {var parsed = [];if (!model.obj) {throw new Error('"obj" attribute of model object not set. The .obj file is required to be set ' + 'in order to use downloadModels()');} // if the name is not provided, dervive it from the given OBJ
    var name = model.name;if (!name) {var parts = model.obj.split('/');name = parts[parts.length - 1].replace('.obj', '');}parsed.push(Promise.resolve(name));parsed.push(fetch(model.obj).then(function (response) {return response.text();}).then(function (data) {return new _mesh2.default(data);})); // Download MaterialLibrary file?
    if (model.mtl) {var mtl = model.mtl;if (typeof mtl === 'boolean') {mtl = model.obj.replace(/\.obj$/, '.mtl');}parsed.push(fetch(mtl).then(function (response) {return response.text();}).then(function (data) {var material = new _material.MaterialLibrary(data);if (model.downloadMtlTextures !== false) {var root = model.mtlTextureRoot;if (!root) {// get the directory of the MTL file as default
            root = mtl.substr(0, mtl.lastIndexOf("/"));} // downloadMtlTextures returns a Promise that
          // is resolved once all of the images it
          // contains are downloaded. These are then
          // attached to the map data objects
          return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);}return Promise.all(Promise.resolve(material));}).then(function (value) {return value[0];}));}finished.push(Promise.all(parsed));};var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {for (var _iterator2 = models[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var model = _step2.value;_loop2(model);}} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}return Promise.all(finished).then(function (ms) {// the "finished" promise is a list of name, Mesh instance,
    // and MaterialLibary instance. This unpacks and returns an
    // object mapping name to Mesh (Mesh points to MTL).
    var models = {};var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {for (var _iterator3 = ms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var model = _step3.value;var _model = _slicedToArray(model, 3),_name = _model[0],mesh = _model[1],mtl = _model[2];mesh.name = _name;if (mtl) {mesh.addMaterialLibrary(mtl);}models[_name] = mesh;}} catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}return models;});} /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * Takes in an object of `mesh_name`, `'/url/to/OBJ/file'` pairs and a callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * function. Each OBJ file will be ajaxed in and automatically converted to
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * an OBJ.Mesh. When all files have successfully downloaded the callback
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * function provided will be called and passed in an object containing
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * the newly created meshes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * **Note:** In order to use this function as a way to download meshes, a
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * webserver of some sort must be used.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        */function downloadMeshes(nameAndURLs, completionCallback, meshes) {if (meshes === undefined) {meshes = {};}var completed = [];var _loop3 = function _loop3(mesh_name) {if (!nameAndURLs.hasOwnProperty(mesh_name)) {return 'continue';}var url = nameAndURLs[mesh_name];completed.push(fetch(url).then(function (response) {return response.text();}).then(function (data) {return [mesh_name, new _mesh2.default(data)];}));};for (var mesh_name in nameAndURLs) {var _ret3 = _loop3(mesh_name);if (_ret3 === 'continue') continue;}Promise.all(completed).then(function (ms) {var _iteratorNormalCompletion4 = true;var _didIteratorError4 = false;var _iteratorError4 = undefined;try {for (var _iterator4 = ms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {var _ref = _step4.value;var _ref2 = _slicedToArray(_ref, 2);var _name2 = _ref2[0];var mesh = _ref2[1];meshes[_name2] = mesh;}} catch (err) {_didIteratorError4 = true;_iteratorError4 = err;} finally {try {if (!_iteratorNormalCompletion4 && _iterator4.return) {_iterator4.return();}} finally {if (_didIteratorError4) {throw _iteratorError4;}}}return completionCallback(meshes);});}var _buildBuffer = function _buildBuffer(gl, type, data, itemSize) {var buffer = gl.createBuffer();var arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;gl.bindBuffer(type, buffer);gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);buffer.itemSize = itemSize;buffer.numItems = data.length / itemSize;return buffer;}; /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Takes in the WebGL context and a Mesh, then creates and appends the buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * to the mesh object as attributes.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * @param {WebGLRenderingContext} gl the `canvas.getContext('webgl')` context instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * @param {Mesh} mesh a single `OBJ.Mesh` instance
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * The newly created mesh attributes are:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * Attrbute | Description
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * :--- | ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **normalBuffer**       |contains the model&#39;s Vertex Normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * normalBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * normalBuffer.numItems  |the total number of vertex normals
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **textureBuffer**      |contains the model&#39;s Texture Coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * textureBuffer.itemSize |set to 2 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * textureBuffer.numItems |the number of texture coordinates
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * vertexBuffer.itemSize  |set to 3 items
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * vertexBuffer.numItems  |the total number of vertices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * |
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * **indexBuffer**        |contains the indices of the faces
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * indexBuffer.itemSize   |is set to 1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * indexBuffer.numItems   |the total number of indices
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              * A simple example (a lot of steps are missing, so don't copy and paste):
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     var gl   = canvas.getContext('webgl'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *         mesh = OBJ.Mesh(obj_file_data);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // compile the shaders and create a shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     var shaderProgram = gl.createProgram();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // compilation stuff here
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     ...
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // make sure you have vertex, vertex normal, and texture coordinate
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // attributes located in your shaders and attach them to the shader program
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // create and initialize the vertex, vertex normal, and texture coordinate buffers
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // and save on to the mesh object
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     OBJ.initMeshBuffers(gl, mesh);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // now to render the mesh
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // it's possible that the mesh doesn't contain
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // any texture coordinates (e.g. suzanne.obj in the development branch).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // in this case, the texture vertexAttribArray will need to be disabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     // before the call to drawElements
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     if(!mesh.textures.length){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     else{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       // if the texture vertexAttribArray has been previously
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       // disabled, then it needs to be re-enabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              */function initMeshBuffers(gl, mesh) {mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);};function deleteMeshBuffers(gl, mesh) {gl.deleteBuffer(mesh.normalBuffer);gl.deleteBuffer(mesh.textureBuffer);gl.deleteBuffer(mesh.vertexBuffer);gl.deleteBuffer(mesh.indexBuffer);}

/***/ })
/******/ ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjMDVjM2YzYzBjYzgyMTAyN2MxZSIsIndlYnBhY2s6Ly8vLi9zcmMvbGF5b3V0LmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9tYXRlcmlhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIl0sIm5hbWVzIjpbIkxheW91dCIsImF0dHJpYnV0ZXMiLCJvZmZzZXQiLCJtYXhTdHJpZGVNdWx0aXBsZSIsImF0dHJpYnV0ZSIsImtleSIsIkR1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvbiIsInNpemVPZlR5cGUiLCJjb25zb2xlIiwid2FybiIsInNpemUiLCJ0eXBlIiwibm9ybWFsaXplZCIsInNpemVJbkJ5dGVzIiwiTWF0aCIsIm1heCIsInN0cmlkZSIsIm1lc3NhZ2UiLCJBdHRyaWJ1dGUiLCJzaXplSW5CeXRlc09mVHlwZSIsIlBPU0lUSU9OIiwiTk9STUFMIiwiVEFOR0VOVCIsIkJJVEFOR0VOVCIsIlVWIiwiTUFURVJJQUxfSU5ERVgiLCJNQVRFUklBTF9FTkFCTEVEIiwiQU1CSUVOVCIsIkRJRkZVU0UiLCJTUEVDVUxBUiIsIlNQRUNVTEFSX0VYUE9ORU5UIiwiRU1JU1NJVkUiLCJUUkFOU01JU1NJT05fRklMVEVSIiwiRElTU09MVkUiLCJJTExVTUlOQVRJT04iLCJSRUZSQUNUSU9OX0lOREVYIiwiU0hBUlBORVNTIiwiTUFQX0RJRkZVU0UiLCJNQVBfQU1CSUVOVCIsIk1BUF9TUEVDVUxBUiIsIk1BUF9TUEVDVUxBUl9FWFBPTkVOVCIsIk1BUF9ESVNTT0xWRSIsIkFOVElfQUxJQVNJTkciLCJNQVBfQlVNUCIsIk1BUF9ESVNQTEFDRU1FTlQiLCJNQVBfREVDQUwiLCJNQVBfRU1JU1NJVkUiLCJNZXNoIiwib2JqZWN0RGF0YSIsIm9wdGlvbnMiLCJtYXRlcmlhbHMiLCJlbmFibGVXVGV4dHVyZUNvb3JkIiwic2VsZiIsInZlcnRpY2VzIiwidmVydGV4Tm9ybWFscyIsInRleHR1cmVzIiwiaW5kaWNlcyIsInRleHR1cmVTdHJpZGUiLCJuYW1lIiwidmVydHMiLCJ2ZXJ0Tm9ybWFscyIsInVucGFja2VkIiwibWF0ZXJpYWxOYW1lc0J5SW5kZXgiLCJtYXRlcmlhbEluZGljZXNCeU5hbWUiLCJjdXJyZW50TWF0ZXJpYWxJbmRleCIsIm5vcm1zIiwiaGFzaGluZGljZXMiLCJtYXRlcmlhbEluZGljZXMiLCJpbmRleCIsIlZFUlRFWF9SRSIsIk5PUk1BTF9SRSIsIlRFWFRVUkVfUkUiLCJGQUNFX1JFIiwiV0hJVEVTUEFDRV9SRSIsIlVTRV9NQVRFUklBTF9SRSIsImxpbmVzIiwic3BsaXQiLCJpIiwibGVuZ3RoIiwibGluZSIsInRyaW0iLCJzdGFydHNXaXRoIiwiZWxlbWVudHMiLCJzaGlmdCIsInRlc3QiLCJwdXNoIiwiY29vcmRzIiwic2xpY2UiLCJtYXRlcmlhbE5hbWUiLCJxdWFkIiwiaiIsImVsZUxlbiIsImhhc2gwIiwiaGFzaCIsInZlcnRleCIsIm5vcm1hbEluZGV4IiwidmVydGV4TWF0ZXJpYWxJbmRpY2VzIiwibWF0ZXJpYWxOYW1lcyIsIm1hdGVyaWFsc0J5SW5kZXgiLCJsYXlvdXQiLCJudW1JdGVtcyIsImJ1ZmZlciIsIkFycmF5QnVmZmVyIiwiZGF0YVZpZXciLCJEYXRhVmlldyIsInZlcnRleE9mZnNldCIsInNldEZsb2F0MzIiLCJzZXRJbnQxNiIsIm1hdGVyaWFsSW5kZXgiLCJtYXRlcmlhbCIsImFtYmllbnQiLCJkaWZmdXNlIiwic3BlY3VsYXIiLCJzcGVjdWxhckV4cG9uZW50IiwiZW1pc3NpdmUiLCJ0cmFuc21pc3Npb25GaWx0ZXIiLCJkaXNzb2x2ZSIsImlsbHVtaW5hdGlvbiIsInJlZnJhY3Rpb25JbmRleCIsInNoYXJwbmVzcyIsImFudGlBbGlhc2luZyIsIlVpbnQxNkFycmF5IiwibXRsIiwiTWF0ZXJpYWwiLCJ0cmFuc3BhcmVuY3kiLCJtYXBEaWZmdXNlIiwibWFwQW1iaWVudCIsIm1hcFNwZWN1bGFyIiwibWFwU3BlY3VsYXJFeHBvbmVudCIsIm1hcERpc3NvbHZlIiwibWFwQnVtcCIsIm1hcERpc3BsYWNlbWVudCIsIm1hcERlY2FsIiwibWFwRW1pc3NpdmUiLCJtYXBSZWZsZWN0aW9ucyIsIk1hdGVyaWFsTGlicmFyeSIsIm10bERhdGEiLCJkYXRhIiwiY3VycmVudE1hdGVyaWFsIiwicGFyc2UiLCJ0b2tlbnMiLCJlcnJvciIsIm1hcCIsInBhcnNlRmxvYXQiLCJ2YWx1ZSIsInBhcnNlQ29sb3IiLCJwb3AiLCJwYXJzZUludCIsInZhbHVlcyIsImNvbG9yQ29ycmVjdGlvbiIsImhvcml6b250YWxCbGVuZGluZyIsInZlcnRpY2FsQmxlbmRpbmciLCJib29zdE1pcE1hcFNoYXJwbmVzcyIsIm1vZGlmeVRleHR1cmVNYXAiLCJicmlnaHRuZXNzIiwiY29udHJhc3QiLCJvcHRpb24iLCJkZWZhdWx0VmFsdWUiLCJ1IiwidiIsInciLCJwYXJzZV9vc3QiLCJzY2FsZSIsInR1cmJ1bGVuY2UiLCJ0ZXh0dXJlUmVzb2x1dGlvbiIsImNsYW1wIiwiYnVtcE11bHRpcGxpZXIiLCJpbWZDaGFuIiwicmVmbGVjdGlvblR5cGUiLCJvcHRpb25zVG9WYWx1ZXMiLCJyZXZlcnNlIiwidG9rZW4iLCJzdWJzdHIiLCJoYXNPd25Qcm9wZXJ0eSIsIm9wdGlvbk1ldGhvZCIsImJpbmQiLCJmaWxlbmFtZSIsInBhcnNlT3B0aW9ucyIsInBhcnNlTWFwIiwicGFyc2VfbWFwX2J1bXAiLCJkaXJlY3RpdmUiLCJwYXJzZU1ldGhvZCIsImRvd25sb2FkTW9kZWxzIiwiZG93bmxvYWRNZXNoZXMiLCJpbml0TWVzaEJ1ZmZlcnMiLCJkZWxldGVNZXNoQnVmZmVycyIsImRvd25sb2FkTXRsVGV4dHVyZXMiLCJyb290IiwibWFwQXR0cmlidXRlcyIsImVuZHNXaXRoIiwiYXR0ciIsIm1hcERhdGEiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwiRXJyb3IiLCJibG9iIiwiaW1hZ2UiLCJJbWFnZSIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInRleHR1cmUiLCJjYXRjaCIsIlByb21pc2UiLCJhbGwiLCJtb2RlbHMiLCJmaW5pc2hlZCIsIm1vZGVsIiwicGFyc2VkIiwib2JqIiwicGFydHMiLCJyZXBsYWNlIiwicmVzb2x2ZSIsInRleHQiLCJtdGxUZXh0dXJlUm9vdCIsImxhc3RJbmRleE9mIiwibXMiLCJtZXNoIiwiYWRkTWF0ZXJpYWxMaWJyYXJ5IiwibmFtZUFuZFVSTHMiLCJjb21wbGV0aW9uQ2FsbGJhY2siLCJtZXNoZXMiLCJ1bmRlZmluZWQiLCJjb21wbGV0ZWQiLCJtZXNoX25hbWUiLCJfYnVpbGRCdWZmZXIiLCJnbCIsIml0ZW1TaXplIiwiY3JlYXRlQnVmZmVyIiwiYXJyYXlWaWV3IiwiQVJSQVlfQlVGRkVSIiwiRmxvYXQzMkFycmF5IiwiYmluZEJ1ZmZlciIsImJ1ZmZlckRhdGEiLCJTVEFUSUNfRFJBVyIsIm5vcm1hbEJ1ZmZlciIsInRleHR1cmVCdWZmZXIiLCJ2ZXJ0ZXhCdWZmZXIiLCJpbmRleEJ1ZmZlciIsIkVMRU1FTlRfQVJSQVlfQlVGRkVSIiwiZGVsZXRlQnVmZmVyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFD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QmIsYUFBYUMsRUFBYixFQUFpQkEsR0FBR2Esb0JBQXBCLEVBQTBDdEIsS0FBS3BLLE9BQS9DLEVBQXdELENBQXhELENBQW5CLENBQ0QsRUFFTSxTQUFTaUksaUJBQVQsQ0FBNkI0QyxFQUE3QixFQUFpQ1QsSUFBakMsRUFBd0MsQ0FDN0NTLEdBQUdjLFlBQUgsQ0FBZ0J2QixLQUFLa0IsWUFBckIsRUFDQVQsR0FBR2MsWUFBSCxDQUFnQnZCLEtBQUttQixhQUFyQixFQUNBVixHQUFHYyxZQUFILENBQWdCdkIsS0FBS29CLFlBQXJCLEVBQ0FYLEdBQUdjLFlBQUgsQ0FBZ0J2QixLQUFLcUIsV0FBckIsRUFDRCxDIiwiZmlsZSI6IndlYmdsLW9iai1sb2FkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIk9CSlwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJPQkpcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiT0JKXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBjMDVjM2YzYzBjYzgyMTAyN2MxZSIsIi8qKlxuICogQSBjbGFzcyB0byByZXByZXNlbnQgdGhlIG1lbW9yeSBsYXlvdXQgZm9yIGEgdmVydGV4IGF0dHJpYnV0ZSBhcnJheS4gVXNlZCBieVxuICoge0BsaW5rIE1lc2h9J3MgVEJEKC4uLikgbWV0aG9kIHRvIGdlbmVyYXRlIGEgcGFja2VkIGFycmF5IGZyb20gbWVzaCBkYXRhLlxuICogPHA+XG4gKiBMYXlvdXQgY2FuIHNvcnQgb2YgYmUgdGhvdWdodCBvZiBhcyBhIEMtc3R5bGUgc3RydWN0IGRlY2xhcmF0aW9uLlxuICoge0BsaW5rIE1lc2h9J3MgVEJEKC4uLikgbWV0aG9kIHdpbGwgdXNlIHRoZSB7QGxpbmsgTGF5b3V0fSBpbnN0YW5jZSB0b1xuICogcGFjayBhbiBhcnJheSBpbiB0aGUgZ2l2ZW4gYXR0cmlidXRlIG9yZGVyLlxuICogPHA+XG4gKiBMYXlvdXQgYWxzbyBpcyB2ZXJ5IGhlbHBmdWwgd2hlbiBjYWxsaW5nIGEgV2ViR0wgY29udGV4dCdzXG4gKiA8Y29kZT52ZXJ0ZXhBdHRyaWJQb2ludGVyPC9jb2RlPiBtZXRob2QuIElmIHlvdSd2ZSBjcmVhdGVkIGEgYnVmZmVyIHVzaW5nXG4gKiBhIExheW91dCBpbnN0YW5jZSwgdGhlbiB0aGUgc2FtZSBMYXlvdXQgaW5zdGFuY2UgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgc2l6ZSwgdHlwZSwgbm9ybWFsaXplZCwgc3RyaWRlLCBhbmQgb2Zmc2V0IHBhcmFtZXRlcnMgZm9yXG4gKiA8Y29kZT52ZXJ0ZXhBdHRyaWJQb2ludGVyPC9jb2RlPi5cbiAqIDxwPlxuICogRm9yIGV4YW1wbGU6XG4gKiA8cHJlPjxjb2RlPlxuICpcbiAqIGNvbnN0IGluZGV4ID0gZ2xjdHguZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJwb3NcIik7XG4gKiBnbGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFxuICogICBsYXlvdXQucG9zaXRpb24uc2l6ZSxcbiAqICAgZ2xjdHhbbGF5b3V0LnBvc2l0aW9uLnR5cGVdLFxuICogICBsYXlvdXQucG9zaXRpb24ubm9ybWFsaXplZCxcbiAqICAgbGF5b3V0LnBvc2l0aW9uLnN0cmlkZSxcbiAqICAgbGF5b3V0LnBvc2l0aW9uLm9mZnNldCk7XG4gKiA8L2NvZGU+PC9wcmU+XG4gKiBAc2VlIHtAbGluayBNZXNofVxuICovXG5leHBvcnQgY2xhc3MgTGF5b3V0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBMYXlvdXQgb2JqZWN0LiBUaGlzIGNvbnN0cnVjdG9yIHdpbGwgdGhyb3cgaWYgYW55IGR1cGxpY2F0ZVxuICAgICAqIGF0dHJpYnV0ZXMgYXJlIGdpdmVuLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IC4uLmF0dHJpYnV0ZXMgLSBBbiBvcmRlcmVkIGxpc3Qgb2YgYXR0cmlidXRlcyB0aGF0XG4gICAgICogICAgICAgIGRlc2NyaWJlIHRoZSBkZXNpcmVkIG1lbW9yeSBsYXlvdXQgZm9yIGVhY2ggdmVydGV4IGF0dHJpYnV0ZS5cbiAgICAgKiAgICAgICAgPHA+XG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBNZXNofVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGxldCBtYXhTdHJpZGVNdWx0aXBsZSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW2F0dHJpYnV0ZS5rZXldKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IER1cGxpY2F0ZUF0dHJpYnV0ZUV4Y2VwdGlvbihhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWRkIHBhZGRpbmcgdG8gc2F0aXNmeSBXZWJHTCdzIHJlcXVpcmVtZW50IHRoYXQgYWxsXG4gICAgICAgICAgICAvLyB2ZXJ0ZXhBdHRyaWJQb2ludGVyIGNhbGxzIGhhdmUgYW4gb2Zmc2V0IHRoYXQgaXMgYSBtdWx0aXBsZSBvZlxuICAgICAgICAgICAgLy8gdGhlIHR5cGUgc2l6ZS5cbiAgICAgICAgICAgIGlmIChvZmZzZXQgJSBhdHRyaWJ1dGUuc2l6ZU9mVHlwZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSBhdHRyaWJ1dGUuc2l6ZU9mVHlwZSAtIG9mZnNldCAlIGF0dHJpYnV0ZS5zaXplT2ZUeXBlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTGF5b3V0IHJlcXVpcmVzIHBhZGRpbmcgYmVmb3JlICcgKyBhdHRyaWJ1dGUua2V5ICsgJyBhdHRyaWJ1dGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNbYXR0cmlidXRlLmtleV0gPSB7XG4gICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZSc6IGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAnc2l6ZSc6IGF0dHJpYnV0ZS5zaXplLFxuICAgICAgICAgICAgICAgICd0eXBlJzogYXR0cmlidXRlLnR5cGUsXG4gICAgICAgICAgICAgICAgJ25vcm1hbGl6ZWQnOiBhdHRyaWJ1dGUubm9ybWFsaXplZCxcbiAgICAgICAgICAgICAgICAnb2Zmc2V0Jzogb2Zmc2V0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9mZnNldCArPSBhdHRyaWJ1dGUuc2l6ZUluQnl0ZXM7XG4gICAgICAgICAgICBtYXhTdHJpZGVNdWx0aXBsZSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgIG1heFN0cmlkZU11bHRpcGxlLFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5zaXplT2ZUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgcGFkZGluZyB0byB0aGUgZW5kIHRvIHNhdGlzZnkgV2ViR0wncyByZXF1aXJlbWVudCB0aGF0IGFsbFxuICAgICAgICAvLyB2ZXJ0ZXhBdHRyaWJQb2ludGVyIGNhbGxzIGhhdmUgYSBzdHJpZGUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIHRoZVxuICAgICAgICAvLyB0eXBlIHNpemUuIEJlY2F1c2Ugd2UncmUgcHV0dGluZyBkaWZmZXJlbnRseSBzaXplZCBhdHRyaWJ1dGVzIGludG9cbiAgICAgICAgLy8gdGhlIHNhbWUgYnVmZmVyLCBpdCBtdXN0IGJlIHBhZGRlZCB0byBhIG11bHRpcGxlIG9mIHRoZSBsYXJnZXN0XG4gICAgICAgIC8vIHR5cGUgc2l6ZS5cbiAgICAgICAgaWYgKG9mZnNldCAlIG1heFN0cmlkZU11bHRpcGxlICE9PSAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gbWF4U3RyaWRlTXVsdGlwbGUgLSBvZmZzZXQgJSBtYXhTdHJpZGVNdWx0aXBsZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTGF5b3V0IHJlcXVpcmVzIHBhZGRpbmcgYXQgdGhlIGJhY2snKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0cmlkZSA9IG9mZnNldDtcbiAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdGhpc1thdHRyaWJ1dGUua2V5XS5zdHJpZGUgPSB0aGlzLnN0cmlkZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vKipcbiAqIEFuIGV4Y2VwdGlvbiBmb3Igd2hlbiB0d28gb3IgbW9yZSBvZiB0aGUgc2FtZSBhdHRyaWJ1dGVzIGFyZSBmb3VuZCBpbiB0aGVcbiAqIHNhbWUgbGF5b3V0LlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgRHVwbGljYXRlQXR0cmlidXRlRXhjZXB0aW9uIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBEdXBsaWNhdGVBdHRyaWJ1dGVFeGNlcHRpb25cbiAgICAgKiBAcGFyYW0ge0F0dHJpYnV0ZX0gYXR0cmlidXRlIC0gVGhlIGF0dHJpYnV0ZSB0aGF0IHdhcyBmb3VuZCBtb3JlIHRoYW5cbiAgICAgKiAgICAgICAgb25jZSBpbiB0aGUge0BsaW5rIExheW91dH1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ2ZvdW5kIGR1cGxpY2F0ZSBhdHRyaWJ1dGU6ICcgKyBhdHRyaWJ1dGUua2V5O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGhvdyBhIHZlcnRleCBhdHRyaWJ1dGUgc2hvdWxkIGJlIHBhY2tlZCBpbnRvIGFuIGJ1ZmZlci5cbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEF0dHJpYnV0ZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGF0dHJpYnV0ZS4gRG8gbm90IGNhbGwgdGhpcyBkaXJlY3RseSwgdXNlIHRoZSBwcmVkZWZpbmVkXG4gICAgICogY29uc3RhbnRzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBUaGUgbmFtZSBvZiB0aGlzIGF0dHJpYnV0ZSBhcyBpZiBpdCB3ZXJlIGEga2V5IGluXG4gICAgICogICAgICAgIGFuIE9iamVjdC4gVXNlIHRoZSBjYW1lbCBjYXNlIHZlcnNpb24gb2YgdGhlIHVwcGVyIHNuYWtlIGNhc2VcbiAgICAgKiAgICAgICAgY29uc3QgbmFtZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBudW1iZXIgb2YgY29tcG9uZW50cyBwZXIgdmVydGV4IGF0dHJpYnV0ZS5cbiAgICAgKiAgICAgICAgTXVzdCBiZSAxLCAyLCAzLCBvciA0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIGRhdGEgdHlwZSBvZiBlYWNoIGNvbXBvbmVudCBmb3IgdGhpc1xuICAgICAqICAgICAgICBhdHRyaWJ1dGUuIFBvc3NpYmxlIHZhbHVlczo8YnIvPlxuICAgICAqICAgICAgICBcIkJZVEVcIjogc2lnbmVkIDgtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluIFstMTI4LCAxMjddPGJyLz5cbiAgICAgKiAgICAgICAgXCJTSE9SVFwiOiBzaWduZWQgMTYtYml0IGludGVnZXIsIHdpdGggdmFsdWVzIGluXG4gICAgICogICAgICAgICAgICBbLTMyNzY4LCAzMjc2N108YnIvPlxuICAgICAqICAgICAgICBcIlVOU0lHTkVEX0JZVEVcIjogdW5zaWduZWQgOC1iaXQgaW50ZWdlciwgd2l0aCB2YWx1ZXMgaW5cbiAgICAgKiAgICAgICAgICAgIFswLCAyNTVdPGJyLz5cbiAgICAgKiAgICAgICAgXCJVTlNJR05FRF9TSE9SVFwiOiB1bnNpZ25lZCAxNi1iaXQgaW50ZWdlciwgd2l0aCB2YWx1ZXMgaW5cbiAgICAgKiAgICAgICAgICAgIFswLCA2NTUzNV08YnIvPlxuICAgICAqICAgICAgICBcIkZMT0FUXCI6IDMyLWJpdCBmbG9hdGluZyBwb2ludCBudW1iZXJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG5vcm1hbGl6ZWQgLSBXaGV0aGVyIGludGVnZXIgZGF0YSB2YWx1ZXMgc2hvdWxkIGJlXG4gICAgICogICAgICAgIG5vcm1hbGl6ZWQgd2hlbiBiZWluZyBjYXN0ZWQgdG8gYSBmbG9hdC48YnIvPlxuICAgICAqICAgICAgICBJZiB0cnVlLCBzaWduZWQgaW50ZWdlcnMgYXJlIG5vcm1hbGl6ZWQgdG8gWy0xLCAxXS48YnIvPlxuICAgICAqICAgICAgICBJZiB0cnVlLCB1bnNpZ25lZCBpbnRlZ2VycyBhcmUgbm9ybWFsaXplZCB0byBbMCwgMV0uPGJyLz5cbiAgICAgKiAgICAgICAgRm9yIHR5cGUgXCJGTE9BVFwiLCB0aGlzIHBhcmFtZXRlciBoYXMgbm8gZWZmZWN0LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGtleSwgc2l6ZSwgdHlwZSwgbm9ybWFsaXplZD1mYWxzZSkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2l6ZU9mVHlwZSA9IHNpemVJbkJ5dGVzT2ZUeXBlKHR5cGUpO1xuICAgICAgICB0aGlzLnNpemVJbkJ5dGVzID0gdGhpcy5zaXplT2ZUeXBlICogc2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBBIHR5cGUgYWNjZXB0ZWQgYnkge0BsaW5rIEF0dHJpYnV0ZX0uXG4gKiBAcmV0dXJuIFRoZSBzaXplIChpbiBieXRlcykgZm9yIGEgZ2l2ZW4gdHlwZS5cbiAqIEBzZWUge0BsaW5rIEF0dHJpYnV0ZX1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNpemVJbkJ5dGVzT2ZUeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnQllURSc6XG4gICAgICAgIGNhc2UgJ1VOU0lHTkVEX0JZVEUnOlxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIGNhc2UgJ1NIT1JUJzpcbiAgICAgICAgY2FzZSAnVU5TSUdORURfU0hPUlQnOlxuICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgIGNhc2UgJ0ZMT0FUJzpcbiAgICAgICAgICAgIHJldHVybiA0O1xuICAgIH1cbn1cblxuLy8gR2VvbWV0cnkgYXR0cmlidXRlc1xuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyB4LCB5LCAmIHogYXMgZmxvYXRzXG4gKlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuUE9TSVRJT04gPSBuZXcgQXR0cmlidXRlKCdwb3NpdGlvbicsIDMsICdGTE9BVCcpO1xuXG4vKipcbiAqIEF0dHJpYnV0ZSBsYXlvdXQgdG8gcGFjayBhIHZlcnRleCdzIG5vcm1hbCdzIHgsIHksICYgeiBhcyBmbG9hdHNcbiAqXG4gKiBAc2VlIHtAbGluayBMYXlvdXR9XG4gKi9cbkxheW91dC5OT1JNQUwgPSBuZXcgQXR0cmlidXRlKCdub3JtYWwnLCAzLCAnRkxPQVQnKTtcblxuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyBub3JtYWwncyB4LCB5LCAmIHogYXMgZmxvYXRzLlxuICogPHA+XG4gKiBUaGlzIHZhbHVlIHdpbGwgYmUgY29tcHV0ZWQgb24tdGhlLWZseSBiYXNlZCBvbiB0aGUgdGV4dHVyZSBjb29yZGluYXRlcy5cbiAqIElmIG5vIHRleHR1cmUgY29vcmRpbmF0ZXMgYXJlIGF2YWlsYWJsZSwgdGhlIGdlbmVyYXRlZCB2YWx1ZSB3aWxsIGRlZmF1bHQgdG9cbiAqIDAsIDAsIDAuXG4gKlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuVEFOR0VOVCA9IG5ldyBBdHRyaWJ1dGUoJ3RhbmdlbnQnLCAzLCAnRkxPQVQnKTtcblxuLyoqXG4gKiBBdHRyaWJ1dGUgbGF5b3V0IHRvIHBhY2sgYSB2ZXJ0ZXgncyBub3JtYWwncyBiaXRhbmdlbnQgeCwgeSwgJiB6IGFzIGZsb2F0cy5cbiAqIDxwPlxuICogVGhpcyB2YWx1ZSB3aWxsIGJlIGNvbXB1dGVkIG9uLXRoZS1mbHkgYmFzZWQgb24gdGhlIHRleHR1cmUgY29vcmRpbmF0ZXMuXG4gKiBJZiBubyB0ZXh0dXJlIGNvb3JkaW5hdGVzIGFyZSBhdmFpbGFibGUsIHRoZSBnZW5lcmF0ZWQgdmFsdWUgd2lsbCBkZWZhdWx0IHRvXG4gKiAwLCAwLCAwLlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuQklUQU5HRU5UID0gbmV3IEF0dHJpYnV0ZSgnYml0YW5nZW50JywgMywgJ0ZMT0FUJyk7XG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGEgdmVydGV4J3MgdGV4dHVyZSBjb29yZGluYXRlcycgdSAmIHYgYXMgZmxvYXRzXG4gKlxuICogQHNlZSB7QGxpbmsgTGF5b3V0fVxuICovXG5MYXlvdXQuVVYgPSBuZXcgQXR0cmlidXRlKCd1dicsIDIsICdGTE9BVCcpO1xuXG4vLyBNYXRlcmlhbCBhdHRyaWJ1dGVzXG5cbi8qKlxuICogQXR0cmlidXRlIGxheW91dCB0byBwYWNrIGFuIHVuc2lnbmVkIHNob3J0IHRvIGJlIGludGVycHJldGVkIGFzIGEgdGhlIGluZGV4XG4gKiBpbnRvIGEge0BsaW5rIE1lc2h9J3MgbWF0ZXJpYWxzIGxpc3QuXG4gKiA8cD5cbiAqIFRoZSBpbnRlbnRpb24gb2YgdGhpcyB2YWx1ZSBpcyB0byBzZW5kIGFsbCBvZiB0aGUge0BsaW5rIE1lc2h9J3MgbWF0ZXJpYWxzXG4gKiBpbnRvIG11bHRpcGxlIHNoYWRlciB1bmlmb3JtcyBhbmQgdGhlbiByZWZlcmVuY2UgdGhlIGN1cnJlbnQgb25lIGJ5IHRoaXNcbiAqIHZlcnRleCBhdHRyaWJ1dGUuXG4gKiA8cD5cbiAqIGV4YW1wbGUgZ2xzbCBjb2RlOlxuICpcbiAqIDxwcmU+PGNvZGU+XG4gKiAgLy8gdGhpcyBpcyBib3VuZCB1c2luZyBNQVRFUklBTF9JTkRFWFxuICogIGF0dHJpYnV0ZSBpbnQgbWF0ZXJpYWxJbmRleDtcbiAqXG4gKiAgc3RydWN0IE1hdGVyaWFsIHtcbiAqICAgIHZlYzMgZGlmZnVzZTtcbiAqICAgIHZlYzMgc3BlY3VsYXI7XG4gKiAgICB2ZWMzIHNwZWN1bGFyRXhwb25lbnQ7XG4gKiAgfTtcbiAqXG4gKiAgdW5pZm9ybSBNYXRlcmlhbCBtYXRlcmlhbHNbTUFYX01BVEVSSUFMU107XG4gKlxuICogIC8vIC4uLlxuICpcbiAqICB2ZWMzIGRpZmZ1c2UgPSBtYXRlcmlhbHNbbWF0ZXJpYWxJbmRleF07XG4gKlxuICogPC9jb2RlPjwvcHJlPlxuICogVE9ETzogTW9yZSBkZXNjcmlwdGlvbiAmIHRlc3QgdG8gbWFrZSBzdXJlIHN1YnNjcmlwdGluZyBieSBhdHRyaWJ1dGVzIGV2ZW5cbiAqIHdvcmtzIGZvciB3ZWJnbFxuICpcbiAqIEBzZWUge0BsaW5rIExheW91dH1cbiAqL1xuTGF5b3V0Lk1BVEVSSUFMX0lOREVYID0gbmV3IEF0dHJpYnV0ZSgnbWF0ZXJpYWxJbmRleCcsIDEsICdTSE9SVCcpO1xuTGF5b3V0Lk1BVEVSSUFMX0VOQUJMRUQgPSBuZXcgQXR0cmlidXRlKCdtYXRlcmlhbEVuYWJsZWQnLCAxLCAnVU5TSUdORURfU0hPUlQnKTtcbkxheW91dC5BTUJJRU5UID0gbmV3IEF0dHJpYnV0ZSgnYW1iaWVudCcsIDMsICdGTE9BVCcpO1xuTGF5b3V0LkRJRkZVU0UgPSBuZXcgQXR0cmlidXRlKCdkaWZmdXNlJywgMywgJ0ZMT0FUJyk7XG5MYXlvdXQuU1BFQ1VMQVIgPSBuZXcgQXR0cmlidXRlKCdzcGVjdWxhcicsIDMsICdGTE9BVCcpO1xuTGF5b3V0LlNQRUNVTEFSX0VYUE9ORU5UID0gbmV3IEF0dHJpYnV0ZSgnc3BlY3VsYXJFeHBvbmVudCcsIDMsICdGTE9BVCcpO1xuTGF5b3V0LkVNSVNTSVZFID0gbmV3IEF0dHJpYnV0ZSgnZW1pc3NpdmUnLCAzLCAnRkxPQVQnKTtcbkxheW91dC5UUkFOU01JU1NJT05fRklMVEVSID0gbmV3IEF0dHJpYnV0ZSgndHJhbnNtaXNzaW9uRmlsdGVyJywgMywgJ0ZMT0FUJyk7XG5MYXlvdXQuRElTU09MVkUgPSBuZXcgQXR0cmlidXRlKCdkaXNzb2x2ZScsIDEsICdGTE9BVCcpO1xuTGF5b3V0LklMTFVNSU5BVElPTiA9IG5ldyBBdHRyaWJ1dGUoJ2lsbHVtaW5hdGlvbicsIDEsICdVTlNJR05FRF9TSE9SVCcpO1xuTGF5b3V0LlJFRlJBQ1RJT05fSU5ERVggPSBuZXcgQXR0cmlidXRlKCdyZWZyYWN0aW9uSW5kZXgnLCAxLCAnRkxPQVQnKTtcbkxheW91dC5TSEFSUE5FU1MgPSBuZXcgQXR0cmlidXRlKCdzaGFycG5lc3MnLCAxLCAnRkxPQVQnKTtcbkxheW91dC5NQVBfRElGRlVTRSA9IG5ldyBBdHRyaWJ1dGUoJ21hcERpZmZ1c2UnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfQU1CSUVOVCA9IG5ldyBBdHRyaWJ1dGUoJ21hcEFtYmllbnQnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfU1BFQ1VMQVIgPSBuZXcgQXR0cmlidXRlKCdtYXBTcGVjdWxhcicsIDEsICdTSE9SVCcpO1xuTGF5b3V0Lk1BUF9TUEVDVUxBUl9FWFBPTkVOVCA9IG5ldyBBdHRyaWJ1dGUoJ21hcFNwZWN1bGFyRXhwb25lbnQnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfRElTU09MVkUgPSBuZXcgQXR0cmlidXRlKCdtYXBEaXNzb2x2ZScsIDEsICdTSE9SVCcpO1xuTGF5b3V0LkFOVElfQUxJQVNJTkcgPSBuZXcgQXR0cmlidXRlKCdhbnRpQWxpYXNpbmcnLCAxLCAnVU5TSUdORURfU0hPUlQnKTtcbkxheW91dC5NQVBfQlVNUCA9IG5ldyBBdHRyaWJ1dGUoJ21hcEJ1bXAnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfRElTUExBQ0VNRU5UID0gbmV3IEF0dHJpYnV0ZSgnbWFwRGlzcGxhY2VtZW50JywgMSwgJ1NIT1JUJyk7XG5MYXlvdXQuTUFQX0RFQ0FMID0gbmV3IEF0dHJpYnV0ZSgnbWFwRGVjYWwnLCAxLCAnU0hPUlQnKTtcbkxheW91dC5NQVBfRU1JU1NJVkUgPSBuZXcgQXR0cmlidXRlKCdtYXBFbWlzc2l2ZScsIDEsICdTSE9SVCcpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2xheW91dC5qcyIsImltcG9ydCB7TGF5b3V0fSBmcm9tIFwiLi9sYXlvdXRcIlxuXG4vKipcbiAqIFRoZSBtYWluIE1lc2ggY2xhc3MuIFRoZSBjb25zdHJ1Y3RvciB3aWxsIHBhcnNlIHRocm91Z2ggdGhlIE9CSiBmaWxlIGRhdGFcbiAqIGFuZCBjb2xsZWN0IHRoZSB2ZXJ0ZXgsIHZlcnRleCBub3JtYWwsIHRleHR1cmUsIGFuZCBmYWNlIGluZm9ybWF0aW9uLiBUaGlzXG4gKiBpbmZvcm1hdGlvbiBjYW4gdGhlbiBiZSB1c2VkIGxhdGVyIG9uIHdoZW4gY3JlYXRpbmcgeW91ciBWQk9zLiBTZWVcbiAqIE9CSi5pbml0TWVzaEJ1ZmZlcnMgZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIHVzZSB0aGUgbmV3bHkgY3JlYXRlZCBNZXNoXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lc2gge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIE1lc2hcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2JqZWN0RGF0YSAtIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIE9CSiBmaWxlIHdpdGhcbiAgICAgKiAgICAgbmV3bGluZXMgcHJlc2VydmVkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gYSBKUyBvYmplY3QgY29udGFpbmluZyB2YWxpZCBvcHRpb25zLiBTZWUgY2xhc3NcbiAgICAgKiAgICAgZG9jdW1lbnRhdGlvbiBmb3Igb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2x9IG9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZCAtIFRleHR1cmUgY29vcmRpbmF0ZXMgY2FuIGhhdmVcbiAgICAgKiAgICAgYW4gb3B0aW9uYWwgXCJ3XCIgY29vcmRpbmF0ZSBhZnRlciB0aGUgdSBhbmQgdiBjb29yZGluYXRlcy4gVGhpcyBleHRyYVxuICAgICAqICAgICB2YWx1ZSBjYW4gYmUgdXNlZCBpbiBvcmRlciB0byBwZXJmb3JtIGZhbmN5IHRyYW5zZm9ybWF0aW9ucyBvbiB0aGVcbiAgICAgKiAgICAgdGV4dHVyZXMgdGhlbXNlbHZlcy4gRGVmYXVsdCBpcyB0byB0cnVuY2F0ZSB0byBvbmx5IHRoZSB1IGFuIHZcbiAgICAgKiAgICAgY29vcmRpbmF0ZXMuIFBhc3NpbmcgdHJ1ZSB3aWxsIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlIG9mIDAgaW4gdGhlXG4gICAgICogICAgIGV2ZW50IHRoYXQgYW55IG9yIGFsbCB0ZXh0dXJlIGNvb3JkaW5hdGVzIGRvbid0IHByb3ZpZGUgYSB3IHZhbHVlLlxuICAgICAqICAgICBBbHdheXMgdXNlIHRoZSB0ZXh0dXJlU3RyaWRlIGF0dHJpYnV0ZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgdGhlXG4gICAgICogICAgIHN0cmlkZSBsZW5ndGggb2YgdGhlIHRleHR1cmUgY29vcmRpbmF0ZXMgd2hlbiByZW5kZXJpbmcgdGhlIGVsZW1lbnRcbiAgICAgKiAgICAgYXJyYXkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob2JqZWN0RGF0YSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5tYXRlcmlhbHMgPSBvcHRpb25zLm1hdGVyaWFscyB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5lbmFibGVXVGV4dHVyZUNvb3JkID0gISFvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQ7XG5cbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGUgbGlzdCBvZiB1bmlxdWUgdmVydGV4LCBub3JtYWwsIHRleHR1cmUsIGF0dHJpYnV0ZXNcbiAgICAgICAgc2VsZi52ZXJ0aWNlcyA9IFtdO1xuICAgICAgICBzZWxmLnZlcnRleE5vcm1hbHMgPSBbXTtcbiAgICAgICAgc2VsZi50ZXh0dXJlcyA9IFtdO1xuICAgICAgICAvLyB0aGUgaW5kaWNpZXMgdG8gZHJhdyB0aGUgZmFjZXNcbiAgICAgICAgc2VsZi5pbmRpY2VzID0gW107XG4gICAgICAgIHNlbGYudGV4dHVyZVN0cmlkZSA9IG9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZD8gMyA6IDI7XG5cbiAgICAgICAgLypcbiAgICAgICAgVGhlIE9CSiBmaWxlIGZvcm1hdCBkb2VzIGEgc29ydCBvZiBjb21wcmVzc2lvbiB3aGVuIHNhdmluZyBhIG1vZGVsIGluIGFcbiAgICAgICAgcHJvZ3JhbSBsaWtlIEJsZW5kZXIuIFRoZXJlIGFyZSBhdCBsZWFzdCAzIHNlY3Rpb25zICg0IGluY2x1ZGluZyB0ZXh0dXJlcylcbiAgICAgICAgd2l0aGluIHRoZSBmaWxlLiBFYWNoIGxpbmUgaW4gYSBzZWN0aW9uIGJlZ2lucyB3aXRoIHRoZSBzYW1lIHN0cmluZzpcbiAgICAgICAgICAqICd2JzogaW5kaWNhdGVzIHZlcnRleCBzZWN0aW9uXG4gICAgICAgICAgKiAndm4nOiBpbmRpY2F0ZXMgdmVydGV4IG5vcm1hbCBzZWN0aW9uXG4gICAgICAgICAgKiAnZic6IGluZGljYXRlcyB0aGUgZmFjZXMgc2VjdGlvblxuICAgICAgICAgICogJ3Z0JzogaW5kaWNhdGVzIHZlcnRleCB0ZXh0dXJlIHNlY3Rpb24gKGlmIHRleHR1cmVzIHdlcmUgdXNlZCBvbiB0aGUgbW9kZWwpXG4gICAgICAgIEVhY2ggb2YgdGhlIGFib3ZlIHNlY3Rpb25zIChleGNlcHQgZm9yIHRoZSBmYWNlcyBzZWN0aW9uKSBpcyBhIGxpc3Qvc2V0IG9mXG4gICAgICAgIHVuaXF1ZSB2ZXJ0aWNlcy5cblxuICAgICAgICBFYWNoIGxpbmUgb2YgdGhlIGZhY2VzIHNlY3Rpb24gY29udGFpbnMgYSBsaXN0IG9mXG4gICAgICAgICh2ZXJ0ZXgsIFt0ZXh0dXJlXSwgbm9ybWFsKSBncm91cHMuXG5cbiAgICAgICAgKipOb3RlOioqIFRoZSBmb2xsb3dpbmcgZG9jdW1lbnRhdGlvbiB3aWxsIHVzZSBhIGNhcGl0YWwgXCJWXCIgVmVydGV4IHRvXG4gICAgICAgIGRlbm90ZSB0aGUgYWJvdmUgKHZlcnRleCwgW3RleHR1cmVdLCBub3JtYWwpIGdyb3VwcyB3aGVyZWFzIGEgbG93ZXJjYXNlXG4gICAgICAgIFwidlwiIHZlcnRleCBpcyB1c2VkIHRvIGRlbm90ZSBhbiBYLCBZLCBaIGNvb3JkaW5hdGUuXG5cbiAgICAgICAgU29tZSBleGFtcGxlczpcbiAgICAgICAgICAgIC8vIHRoZSB0ZXh0dXJlIGluZGV4IGlzIG9wdGlvbmFsLCBib3RoIGZvcm1hdHMgYXJlIHBvc3NpYmxlIGZvciBtb2RlbHNcbiAgICAgICAgICAgIC8vIHdpdGhvdXQgYSB0ZXh0dXJlIGFwcGxpZWRcbiAgICAgICAgICAgIGYgMS8yNSAxOC80NiAxMi8zMVxuICAgICAgICAgICAgZiAxLy8yNSAxOC8vNDYgMTIvLzMxXG5cbiAgICAgICAgICAgIC8vIEEgMyB2ZXJ0ZXggZmFjZSB3aXRoIHRleHR1cmUgaW5kaWNlc1xuICAgICAgICAgICAgZiAxNi85Mi8xMSAxNC8xMDEvMjIgMS82OS8xXG5cbiAgICAgICAgICAgIC8vIEEgNCB2ZXJ0ZXggZmFjZVxuICAgICAgICAgICAgZiAxNi85Mi8xMSA0MC8xMDkvNDAgMzgvMTE0LzM4IDE0LzEwMS8yMlxuXG4gICAgICAgIFRoZSBmaXJzdCB0d28gbGluZXMgYXJlIGV4YW1wbGVzIG9mIGEgMyB2ZXJ0ZXggZmFjZSB3aXRob3V0IGEgdGV4dHVyZSBhcHBsaWVkLlxuICAgICAgICBUaGUgc2Vjb25kIGlzIGFuIGV4YW1wbGUgb2YgYSAzIHZlcnRleCBmYWNlIHdpdGggYSB0ZXh0dXJlIGFwcGxpZWQuXG4gICAgICAgIFRoZSB0aGlyZCBpcyBhbiBleGFtcGxlIG9mIGEgNCB2ZXJ0ZXggZmFjZS4gTm90ZTogYSBmYWNlIGNhbiBjb250YWluIE5cbiAgICAgICAgbnVtYmVyIG9mIHZlcnRpY2VzLlxuXG4gICAgICAgIEVhY2ggbnVtYmVyIHRoYXQgYXBwZWFycyBpbiBvbmUgb2YgdGhlIGdyb3VwcyBpcyBhIDEtYmFzZWQgaW5kZXhcbiAgICAgICAgY29ycmVzcG9uZGluZyB0byBhbiBpdGVtIGZyb20gdGhlIG90aGVyIHNlY3Rpb25zIChtZWFuaW5nIHRoYXQgaW5kZXhpbmdcbiAgICAgICAgc3RhcnRzIGF0IG9uZSBhbmQgKm5vdCogemVybykuXG5cbiAgICAgICAgRm9yIGV4YW1wbGU6XG4gICAgICAgICAgICBgZiAxNi85Mi8xMWAgaXMgc2F5aW5nIHRvXG4gICAgICAgICAgICAgIC0gdGFrZSB0aGUgMTZ0aCBlbGVtZW50IGZyb20gdGhlIFt2XSB2ZXJ0ZXggYXJyYXlcbiAgICAgICAgICAgICAgLSB0YWtlIHRoZSA5Mm5kIGVsZW1lbnQgZnJvbSB0aGUgW3Z0XSB0ZXh0dXJlIGFycmF5XG4gICAgICAgICAgICAgIC0gdGFrZSB0aGUgMTF0aCBlbGVtZW50IGZyb20gdGhlIFt2bl0gbm9ybWFsIGFycmF5XG4gICAgICAgICAgICBhbmQgdG9nZXRoZXIgdGhleSBtYWtlIGEgdW5pcXVlIHZlcnRleC5cbiAgICAgICAgVXNpbmcgYWxsIDMrIHVuaXF1ZSBWZXJ0aWNlcyBmcm9tIHRoZSBmYWNlIGxpbmUgd2lsbCBwcm9kdWNlIGEgcG9seWdvbi5cblxuICAgICAgICBOb3csIHlvdSBjb3VsZCBqdXN0IGdvIHRocm91Z2ggdGhlIE9CSiBmaWxlIGFuZCBjcmVhdGUgYSBuZXcgdmVydGV4IGZvclxuICAgICAgICBlYWNoIGZhY2UgbGluZSBhbmQgV2ViR0wgd2lsbCBkcmF3IHdoYXQgYXBwZWFycyB0byBiZSB0aGUgc2FtZSBtb2RlbC5cbiAgICAgICAgSG93ZXZlciwgdmVydGljZXMgd2lsbCBiZSBvdmVybGFwcGVkIGFuZCBkdXBsaWNhdGVkIGFsbCBvdmVyIHRoZSBwbGFjZS5cblxuICAgICAgICBDb25zaWRlciBhIGN1YmUgaW4gM0Qgc3BhY2UgY2VudGVyZWQgYWJvdXQgdGhlIG9yaWdpbiBhbmQgZWFjaCBzaWRlIGlzXG4gICAgICAgIDIgdW5pdHMgbG9uZy4gVGhlIGZyb250IGZhY2UgKHdpdGggdGhlIHBvc2l0aXZlIFotYXhpcyBwb2ludGluZyB0b3dhcmRzXG4gICAgICAgIHlvdSkgd291bGQgaGF2ZSBhIFRvcCBSaWdodCB2ZXJ0ZXggKGxvb2tpbmcgb3J0aG9nb25hbCB0byBpdHMgbm9ybWFsKVxuICAgICAgICBtYXBwZWQgYXQgKDEsMSwxKSBUaGUgcmlnaHQgZmFjZSB3b3VsZCBoYXZlIGEgVG9wIExlZnQgdmVydGV4IChsb29raW5nXG4gICAgICAgIG9ydGhvZ29uYWwgdG8gaXRzIG5vcm1hbCkgYXQgKDEsMSwxKSBhbmQgdGhlIHRvcCBmYWNlIHdvdWxkIGhhdmUgYSBCb3R0b21cbiAgICAgICAgUmlnaHQgdmVydGV4IChsb29raW5nIG9ydGhvZ29uYWwgdG8gaXRzIG5vcm1hbCkgYXQgKDEsMSwxKS4gRWFjaCBmYWNlXG4gICAgICAgIGhhcyBhIHZlcnRleCBhdCB0aGUgc2FtZSBjb29yZGluYXRlcywgaG93ZXZlciwgdGhyZWUgZGlzdGluY3QgdmVydGljZXNcbiAgICAgICAgd2lsbCBiZSBkcmF3biBhdCB0aGUgc2FtZSBzcG90LlxuXG4gICAgICAgIFRvIHNvbHZlIHRoZSBpc3N1ZSBvZiBkdXBsaWNhdGUgVmVydGljZXMgKHRoZSBgKHZlcnRleCwgW3RleHR1cmVdLCBub3JtYWwpYFxuICAgICAgICBncm91cHMpLCB3aGlsZSBpdGVyYXRpbmcgdGhyb3VnaCB0aGUgZmFjZSBsaW5lcywgd2hlbiBhIGdyb3VwIGlzIGVuY291bnRlcmVkXG4gICAgICAgIHRoZSB3aG9sZSBncm91cCBzdHJpbmcgKCcxNi85Mi8xMScpIGlzIGNoZWNrZWQgdG8gc2VlIGlmIGl0IGV4aXN0cyBpbiB0aGVcbiAgICAgICAgcGFja2VkLmhhc2hpbmRpY2VzIG9iamVjdCwgYW5kIGlmIGl0IGRvZXNuJ3QsIHRoZSBpbmRpY2VzIGl0IHNwZWNpZmllc1xuICAgICAgICBhcmUgdXNlZCB0byBsb29rIHVwIGVhY2ggYXR0cmlidXRlIGluIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZSBhcnJheXNcbiAgICAgICAgYWxyZWFkeSBjcmVhdGVkLiBUaGUgdmFsdWVzIGFyZSB0aGVuIGNvcGllZCB0byB0aGUgY29ycmVzcG9uZGluZyB1bnBhY2tlZFxuICAgICAgICBhcnJheSAoZmxhdHRlbmVkIHRvIHBsYXkgbmljZSB3aXRoIFdlYkdMJ3MgRUxFTUVOVF9BUlJBWV9CVUZGRVIgaW5kZXhpbmcpLFxuICAgICAgICB0aGUgZ3JvdXAgc3RyaW5nIGlzIGFkZGVkIHRvIHRoZSBoYXNoaW5kaWNlcyBzZXQgYW5kIHRoZSBjdXJyZW50IHVucGFja2VkXG4gICAgICAgIGluZGV4IGlzIHVzZWQgYXMgdGhpcyBoYXNoaW5kaWNlcyB2YWx1ZSBzbyB0aGF0IHRoZSBncm91cCBvZiBlbGVtZW50cyBjYW5cbiAgICAgICAgYmUgcmV1c2VkLiBUaGUgdW5wYWNrZWQgaW5kZXggaXMgaW5jcmVtZW50ZWQuIElmIHRoZSBncm91cCBzdHJpbmcgYWxyZWFkeVxuICAgICAgICBleGlzdHMgaW4gdGhlIGhhc2hpbmRpY2VzIG9iamVjdCwgaXRzIGNvcnJlc3BvbmRpbmcgdmFsdWUgaXMgdGhlIGluZGV4IG9mXG4gICAgICAgIHRoYXQgZ3JvdXAgYW5kIGlzIGFwcGVuZGVkIHRvIHRoZSB1bnBhY2tlZCBpbmRpY2VzIGFycmF5LlxuICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9ICcnO1xuICAgICAgICBjb25zdCB2ZXJ0cyA9IFtdO1xuICAgICAgICBjb25zdCB2ZXJ0Tm9ybWFscyA9IFtdO1xuICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IFtdO1xuICAgICAgICBjb25zdCB1bnBhY2tlZCA9IHt9O1xuICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWVzQnlJbmRleCA9IFtdO1xuICAgICAgICBjb25zdCBtYXRlcmlhbEluZGljZXNCeU5hbWUgPSB7fTtcbiAgICAgICAgLy8ga2VlcCB0cmFjayBvZiB3aGF0IG1hdGVyaWFsIHdlJ3ZlIHNlZW4gbGFzdFxuICAgICAgICBsZXQgY3VycmVudE1hdGVyaWFsSW5kZXggPSAtMTtcbiAgICAgICAgLy8gdW5wYWNraW5nIHN0dWZmXG4gICAgICAgIHVucGFja2VkLnZlcnRzID0gW107XG4gICAgICAgIHVucGFja2VkLm5vcm1zID0gW107XG4gICAgICAgIHVucGFja2VkLnRleHR1cmVzID0gW107XG4gICAgICAgIHVucGFja2VkLmhhc2hpbmRpY2VzID0ge307XG4gICAgICAgIHVucGFja2VkLmluZGljZXMgPSBbXTtcbiAgICAgICAgdW5wYWNrZWQubWF0ZXJpYWxJbmRpY2VzID0gW107XG4gICAgICAgIHVucGFja2VkLmluZGV4ID0gMDtcblxuICAgICAgICBjb25zdCBWRVJURVhfUkUgPSAvXnZcXHMvO1xuICAgICAgICBjb25zdCBOT1JNQUxfUkUgPSAvXnZuXFxzLztcbiAgICAgICAgY29uc3QgVEVYVFVSRV9SRSA9IC9ednRcXHMvO1xuICAgICAgICBjb25zdCBGQUNFX1JFID0gL15mXFxzLztcbiAgICAgICAgY29uc3QgV0hJVEVTUEFDRV9SRSA9IC9cXHMrLztcbiAgICAgICAgY29uc3QgVVNFX01BVEVSSUFMX1JFID0gL151c2VtdGwvO1xuXG4gICAgICAgIC8vIGFycmF5IG9mIGxpbmVzIHNlcGFyYXRlZCBieSB0aGUgbmV3bGluZVxuICAgICAgICBjb25zdCBsaW5lcyA9IG9iamVjdERhdGEuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIWxpbmUgfHwgbGluZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gbGluZS5zcGxpdChXSElURVNQQUNFX1JFKTtcbiAgICAgICAgICAgIGVsZW1lbnRzLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgIGlmIChWRVJURVhfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB2ZXJ0ZXhcbiAgICAgICAgICAgICAgICB2ZXJ0cy5wdXNoKC4uLmVsZW1lbnRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTk9STUFMX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdmVydGV4IG5vcm1hbFxuICAgICAgICAgICAgICAgIHZlcnROb3JtYWxzLnB1c2goLi4uZWxlbWVudHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChURVhUVVJFX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29vcmRzID0gZWxlbWVudHM7XG4gICAgICAgICAgICAgICAgLy8gYnkgZGVmYXVsdCwgdGhlIGxvYWRlciB3aWxsIG9ubHkgbG9vayBhdCB0aGUgVSBhbmQgVlxuICAgICAgICAgICAgICAgIC8vIGNvb3JkaW5hdGVzIG9mIHRoZSB2dCBkZWNsYXJhdGlvbi4gU28sIHRoaXMgdHJ1bmNhdGVzIHRoZVxuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnRzIHRvIG9ubHkgdGhvc2UgMiB2YWx1ZXMuIElmIFcgdGV4dHVyZSBjb29yZGluYXRlXG4gICAgICAgICAgICAgICAgLy8gc3VwcG9ydCBpcyBlbmFibGVkLCB0aGVuIHRoZSB0ZXh0dXJlIGNvb3JkaW5hdGUgaXNcbiAgICAgICAgICAgICAgICAvLyBleHBlY3RlZCB0byBoYXZlIHRocmVlIHZhbHVlcyBpbiBpdC5cbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMiAmJiAhb3B0aW9ucy5lbmFibGVXVGV4dHVyZUNvb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb3JkcyA9IGVsZW1lbnRzLnNsaWNlKDAsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBmb3Igc29tZSByZWFzb24gVyB0ZXh0dXJlIGNvb3JkaW5hdGUgc3VwcG9ydCBpcyBlbmFibGVkXG4gICAgICAgICAgICAgICAgLy8gYW5kIG9ubHkgdGhlIFUgYW5kIFYgY29vcmRpbmF0ZXMgYXJlIGdpdmVuLCB0aGVuIHdlIHN1cHBseVxuICAgICAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IHZhbHVlIG9mIDAgc28gdGhhdCB0aGUgc3RyaWRlIGxlbmd0aCBpcyBjb3JyZWN0XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgdGV4dHVyZXMgYXJlIHVucGFja2VkIGJlbG93LlxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PT0gMiAmJiBvcHRpb25zLmVuYWJsZVdUZXh0dXJlQ29vcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzLnB1c2goMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRleHR1cmVzLnB1c2goLi4uY29vcmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoVVNFX01BVEVSSUFMX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWUgPSBlbGVtZW50c1swXTtcblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBldmVyIHNlZW4gaXQgYmVmb3JlXG4gICAgICAgICAgICAgICAgaWYgKCEobWF0ZXJpYWxOYW1lIGluIG1hdGVyaWFsSW5kaWNlc0J5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IG1hdGVyaWFsIHdlJ3ZlIG5ldmVyIHNlZW5cbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxOYW1lc0J5SW5kZXgucHVzaChtYXRlcmlhbE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGljZXNCeU5hbWVbbWF0ZXJpYWxOYW1lXSA9IG1hdGVyaWFsTmFtZXNCeUluZGV4Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBtYXRlcmlhbCBpbmRleFxuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXRlcmlhbEluZGV4ID0gbWF0ZXJpYWxJbmRpY2VzQnlOYW1lW21hdGVyaWFsTmFtZV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEZBQ0VfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBmYWNlXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBzcGxpdCB0aGlzIGZhY2UgaW50byBhbiBhcnJheSBvZiBWZXJ0ZXggZ3JvdXBzXG4gICAgICAgICAgICAgICAgZm9yIGV4YW1wbGU6XG4gICAgICAgICAgICAgICAgICAgZiAxNi85Mi8xMSAxNC8xMDEvMjIgMS82OS8xXG4gICAgICAgICAgICAgICAgYmVjb21lczpcbiAgICAgICAgICAgICAgICAgIFsnMTYvOTIvMTEnLCAnMTQvMTAxLzIyJywgJzEvNjkvMSddO1xuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbGV0IHF1YWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgZWxlTGVuID0gZWxlbWVudHMubGVuZ3RoOyBqIDwgZWxlTGVuOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJpYW5ndWxhdGluZyBxdWFkc1xuICAgICAgICAgICAgICAgICAgICAvLyBxdWFkOiAnZiB2MC90MC92bjAgdjEvdDEvdm4xIHYyL3QyL3ZuMiB2My90My92bjMvJ1xuICAgICAgICAgICAgICAgICAgICAvLyBjb3JyZXNwb25kaW5nIHRyaWFuZ2xlczpcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAnZiB2MC90MC92bjAgdjEvdDEvdm4xIHYyL3QyL3ZuMidcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAnZiB2Mi90Mi92bjIgdjMvdDMvdm4zIHYwL3QwL3ZuMCdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IDMgJiYgIXF1YWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB2Mi90Mi92bjIgaW4gYWdhaW4gYmVmb3JlIGNvbnRpbnVpbmcgdG8gM1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNoMCA9IGVsZW1lbnRzWzBdICsgJywnICsgY3VycmVudE1hdGVyaWFsSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBlbGVtZW50c1tqXSArICcsJyArIGN1cnJlbnRNYXRlcmlhbEluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzaCBpbiB1bnBhY2tlZC5oYXNoaW5kaWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaW5kaWNlcy5wdXNoKHVucGFja2VkLmhhc2hpbmRpY2VzW2hhc2hdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICBFYWNoIGVsZW1lbnQgb2YgdGhlIGZhY2UgbGluZSBhcnJheSBpcyBhIFZlcnRleCB3aGljaCBoYXMgaXRzXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzIGRlbGltaXRlZCBieSBhIGZvcndhcmQgc2xhc2guIFRoaXMgd2lsbCBzZXBhcmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCBhdHRyaWJ1dGUgaW50byBhbm90aGVyIGFycmF5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxOS85Mi8xMSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlY29tZXM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVydGV4ID0gWycxOScsICc5MicsICcxMSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJ0ZXhbMF0gaXMgdGhlIHZlcnRleCBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRleFsxXSBpcyB0aGUgdGV4dHVyZSBpbmRleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRleFsyXSBpcyB0aGUgbm9ybWFsIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgVGhpbmsgb2YgZmFjZXMgaGF2aW5nIFZlcnRpY2VzIHdoaWNoIGFyZSBjb21wcmlzZWQgb2YgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyBsb2NhdGlvbiAodiksIHRleHR1cmUgKHZ0KSwgYW5kIG5vcm1hbCAodm4pLlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmVydGV4ID0gZWxlbWVudHNbal0uc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgcG9zc2libGUgZm9yIGZhY2VzIHRvIG9ubHkgc3BlY2lmeSB0aGUgdmVydGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlIG5vcm1hbC4gSW4gdGhpcyBjYXNlLCB2ZXJ0ZXggd2lsbCBvbmx5IGhhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbGVuZ3RoIG9mIDIgYW5kIG5vdCAzIGFuZCB0aGUgbm9ybWFsIHdpbGwgYmUgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWNvbmQgaXRlbSBpbiB0aGUgbGlzdCB3aXRoIGFuIGluZGV4IG9mIDEuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm9ybWFsSW5kZXggPSB2ZXJ0ZXgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHZlcnRzLCB0ZXh0dXJlcywgYW5kIHZlcnROb3JtYWxzIGFycmF5cyBlYWNoIGNvbnRhaW4gYVxuICAgICAgICAgICAgICAgICAgICAgICAgIGZsYXR0ZW5kIGFycmF5IG9mIGNvb3JkaW5hdGVzLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgQmVjYXVzZSBpdCBnZXRzIGNvbmZ1c2luZyBieSByZWZlcnJpbmcgdG8gVmVydGV4IGFuZCB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4IChib3RoIGFyZSBkaWZmZXJlbnQgaW4gbXkgZGVzY3JpcHRpb25zKSBJIHdpbGwgZXhwbGFpblxuICAgICAgICAgICAgICAgICAgICAgICAgIHdoYXQncyBnb2luZyBvbiB1c2luZyB0aGUgdmVydGV4Tm9ybWFscyBhcnJheTpcblxuICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFsyXSB3aWxsIGNvbnRhaW4gdGhlIG9uZS1iYXNlZCBpbmRleCBvZiB0aGUgdmVydGV4Tm9ybWFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24gKHZuKS4gT25lIGlzIHN1YnRyYWN0ZWQgZnJvbSB0aGlzIGluZGV4IG51bWJlciB0byBwbGF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgbmljZSB3aXRoIGphdmFzY3JpcHQncyB6ZXJvLWJhc2VkIGFycmF5IGluZGV4aW5nLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgQmVjYXVzZSB2ZXJ0ZXhOb3JtYWwgaXMgYSBmbGF0dGVuZWQgYXJyYXkgb2YgeCwgeSwgeiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2ltcGxlIHBvaW50ZXIgYXJpdGhtZXRpYyBpcyB1c2VkIHRvIHNraXAgdG8gdGhlIHN0YXJ0IG9mIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleE5vcm1hbCwgdGhlbiB0aGUgb2Zmc2V0IGlzIGFkZGVkIHRvIGdldCB0aGUgY29ycmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogKzAgaXMgeCwgKzEgaXMgeSwgKzIgaXMgei5cblxuICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgc2FtZSBwcm9jZXNzIGlzIHJlcGVhdGVkIGZvciB2ZXJ0cyBhbmQgdGV4dHVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcnRleCBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudmVydHMucHVzaCgrdmVydHNbKHZlcnRleFswXSAtIDEpICogMyArIDBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLnZlcnRzLnB1c2goK3ZlcnRzWyh2ZXJ0ZXhbMF0gLSAxKSAqIDMgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC52ZXJ0cy5wdXNoKCt2ZXJ0c1sodmVydGV4WzBdIC0gMSkgKiAzICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVydGV4IHRleHR1cmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dHVyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmlkZSA9IG9wdGlvbnMuZW5hYmxlV1RleHR1cmVDb29yZD8gMyA6IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQudGV4dHVyZXMucHVzaCgrdGV4dHVyZXNbKHZlcnRleFsxXSAtIDEpICogc3RyaWRlICsgMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLnRleHR1cmVzLnB1c2goK3RleHR1cmVzWyh2ZXJ0ZXhbMV0gLSAxKSAqIHN0cmlkZSArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVXVGV4dHVyZUNvb3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLnRleHR1cmVzLnB1c2goK3RleHR1cmVzWyh2ZXJ0ZXhbMV0gLSAxKSAqIHN0cmlkZSArIDJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJ0ZXggbm9ybWFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQubm9ybXMucHVzaCgrdmVydE5vcm1hbHNbKHZlcnRleFtub3JtYWxJbmRleF0gLSAxKSAqIDMgKyAwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnBhY2tlZC5ub3Jtcy5wdXNoKCt2ZXJ0Tm9ybWFsc1sodmVydGV4W25vcm1hbEluZGV4XSAtIDEpICogMyArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLm5vcm1zLnB1c2goK3ZlcnROb3JtYWxzWyh2ZXJ0ZXhbbm9ybWFsSW5kZXhdIC0gMSkgKiAzICsgMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVydGV4IG1hdGVyaWFsIGluZGljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLm1hdGVyaWFsSW5kaWNlcy5wdXNoKGN1cnJlbnRNYXRlcmlhbEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgbmV3bHkgY3JlYXRlZCBWZXJ0ZXggdG8gdGhlIGxpc3Qgb2YgaW5kaWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5wYWNrZWQuaGFzaGluZGljZXNbaGFzaF0gPSB1bnBhY2tlZC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLmluZGljZXMucHVzaCh1bnBhY2tlZC5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGNvdW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLmluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IDMgJiYgcXVhZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHYwL3QwL3ZuMCBvbnRvIHRoZSBzZWNvbmQgdHJpYW5nbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFja2VkLmluZGljZXMucHVzaCh1bnBhY2tlZC5oYXNoaW5kaWNlc1toYXNoMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNlbGYudmVydGljZXMgPSB1bnBhY2tlZC52ZXJ0cztcbiAgICAgICAgc2VsZi52ZXJ0ZXhOb3JtYWxzID0gdW5wYWNrZWQubm9ybXM7XG4gICAgICAgIHNlbGYudGV4dHVyZXMgPSB1bnBhY2tlZC50ZXh0dXJlcztcbiAgICAgICAgc2VsZi52ZXJ0ZXhNYXRlcmlhbEluZGljZXMgPSB1bnBhY2tlZC5tYXRlcmlhbEluZGljZXM7XG4gICAgICAgIHNlbGYuaW5kaWNlcyA9IHVucGFja2VkLmluZGljZXM7XG5cbiAgICAgICAgc2VsZi5tYXRlcmlhbE5hbWVzID0gbWF0ZXJpYWxOYW1lc0J5SW5kZXg7XG4gICAgICAgIHNlbGYubWF0ZXJpYWxJbmRpY2VzID0gbWF0ZXJpYWxJbmRpY2VzQnlOYW1lO1xuICAgICAgICBzZWxmLm1hdGVyaWFsc0J5SW5kZXggPSB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheW91dH0gbGF5b3V0IC0gQSB7QGxpbmsgTGF5b3V0fSBvYmplY3QgdGhhdCBkZXNjcmliZXMgdGhlXG4gICAgICogZGVzaXJlZCBtZW1vcnkgbGF5b3V0IG9mIHRoZSBnZW5lcmF0ZWQgYnVmZmVyXG4gICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IFRoZSBwYWNrZWQgYXJyYXkgaW4gdGhlIC4uLiBUT0RPXG4gICAgICovXG4gICAgbWFrZUJ1ZmZlckRhdGEobGF5b3V0KSB7XG4gICAgICAgIGNvbnN0IG51bUl0ZW1zID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLyAzO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIobGF5b3V0LnN0cmlkZSAqIG51bUl0ZW1zKTtcbiAgICAgICAgYnVmZmVyLm51bUl0ZW1zID0gbnVtSXRlbXM7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCB2ZXJ0ZXhPZmZzZXQgPSAwOyBpIDwgbnVtSXRlbXM7IGkrKykge1xuICAgICAgICAgICAgdmVydGV4T2Zmc2V0ID0gaSAqIGxheW91dC5zdHJpZGU7XG4gICAgICAgICAgICAvLyBjb3B5IGluIHRoZSB2ZXJ0ZXggZGF0YSBpbiB0aGUgb3JkZXIgYW5kIGZvcm1hdCBnaXZlbiBieSB0aGVcbiAgICAgICAgICAgIC8vIGxheW91dCBwYXJhbVxuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgbGF5b3V0LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB2ZXJ0ZXhPZmZzZXQgKyBsYXlvdXRbYXR0cmlidXRlLmtleV0ub2Zmc2V0O1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0cmlidXRlLmtleSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5QT1NJVElPTi5rZXk6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdGhpcy52ZXJ0aWNlc1tpICogM10sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCB0aGlzLnZlcnRpY2VzW2kgKiAzICsgMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA4LCB0aGlzLnZlcnRpY2VzW2kgKiAzICsgMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlVWLmtleTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCB0aGlzLnRleHR1cmVzW2kgKiAyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIHRoaXMudmVydGljZXNbaSAqIDIgKyAxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuTk9STUFMLmtleTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCB0aGlzLnZlcnRleE5vcm1hbHNbaSAqIDNdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgdGhpcy52ZXJ0ZXhOb3JtYWxzW2kgKiAzICsgMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA4LCB0aGlzLnZlcnRleE5vcm1hbHNbaSAqIDMgKyAyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuTUFURVJJQUxfSU5ERVgua2V5OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0SW50MTYob2Zmc2V0LCB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuQU1CSUVOVC5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuYW1iaWVudFswXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIG1hdGVyaWFsLmFtYmllbnRbMV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA4LCBtYXRlcmlhbC5hbWJpZW50WzJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkRJRkZVU0Uua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQsIG1hdGVyaWFsLmRpZmZ1c2VbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5kaWZmdXNlWzFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgbWF0ZXJpYWwuZGlmZnVzZVsyXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5TUEVDVUxBUi5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuc3BlY3VsYXJbMF0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0RmxvYXQzMihvZmZzZXQgKyA0LCBtYXRlcmlhbC5zcGVjdWxhclsxXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDgsIG1hdGVyaWFsLnNwZWN1bGFyWzJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlNQRUNVTEFSX0VYUE9ORU5ULmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCBtYXRlcmlhbC5zcGVjdWxhckV4cG9uZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkVNSVNTSVZFLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCBtYXRlcmlhbC5lbWlzc2l2ZVswXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCArIDQsIG1hdGVyaWFsLmVtaXNzaXZlWzFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgbWF0ZXJpYWwuZW1pc3NpdmVbMl0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuVFJBTlNNSVNTSU9OX0ZJTFRFUi5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwudHJhbnNtaXNzaW9uRmlsdGVyWzBdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgNCwgbWF0ZXJpYWwudHJhbnNtaXNzaW9uRmlsdGVyWzFdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0ICsgOCwgbWF0ZXJpYWwudHJhbnNtaXNzaW9uRmlsdGVyWzJdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkRJU1NPTFZFLmtleToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMudmVydGV4TWF0ZXJpYWxJbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsc0J5SW5kZXhbbWF0ZXJpYWxJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYXRlcmlhbCBcIicgKyB0aGlzLm1hdGVyaWFsTmFtZXNbbWF0ZXJpYWxJbmRleF0gKyAnXCIgbm90IGZvdW5kIGluIG1lc2guIERpZCB5b3UgZm9yZ2V0IHRvIGNhbGwgYWRkTWF0ZXJpYWxMaWJyYXJ5KC4uLik/XCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3LnNldEZsb2F0MzIob2Zmc2V0LCBtYXRlcmlhbC5kaXNzb2x2ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIExheW91dC5JTExVTUlOQVRJT04ua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0SW50MTYob2Zmc2V0LCBtYXRlcmlhbC5pbGx1bWluYXRpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMYXlvdXQuUkVGUkFDVElPTl9JTkRFWC5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwucmVmcmFjdGlvbkluZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LlNIQVJQTkVTUy5rZXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLnZlcnRleE1hdGVyaWFsSW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNCeUluZGV4W21hdGVyaWFsSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWF0ZXJpYWwgXCInICsgdGhpcy5tYXRlcmlhbE5hbWVzW21hdGVyaWFsSW5kZXhdICsgJ1wiIG5vdCBmb3VuZCBpbiBtZXNoLiBEaWQgeW91IGZvcmdldCB0byBjYWxsIGFkZE1hdGVyaWFsTGlicmFyeSguLi4pP1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlldy5zZXRGbG9hdDMyKG9mZnNldCwgbWF0ZXJpYWwuc2hhcnBuZXNzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTGF5b3V0LkFOVElfQUxJQVNJTkcua2V5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbEluZGV4ID0gdGhpcy52ZXJ0ZXhNYXRlcmlhbEluZGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ01hdGVyaWFsIFwiJyArIHRoaXMubWF0ZXJpYWxOYW1lc1ttYXRlcmlhbEluZGV4XSArICdcIiBub3QgZm91bmQgaW4gbWVzaC4gRGlkIHlvdSBmb3JnZXQgdG8gY2FsbCBhZGRNYXRlcmlhbExpYnJhcnkoLi4uKT9cIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXcuc2V0SW50MTYob2Zmc2V0LCBtYXRlcmlhbC5hbnRpQWxpYXNpbmcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG5cbiAgICBtYWtlSW5kZXhCdWZmZXJEYXRhKCkge1xuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDE2QXJyYXkodGhpcy5pbmRpY2VzKTtcbiAgICAgICAgYnVmZmVyLm51bUl0ZW1zID0gdGhpcy5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9XG5cbiAgICBhZGRNYXRlcmlhbExpYnJhcnkgKG10bCkge1xuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gbXRsLm1hdGVyaWFscykge1xuICAgICAgICAgICAgaWYgKCEobmFtZSBpbiB0aGlzLm1hdGVyaWFsSW5kaWNlcykpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1hdGVyaWFsIGlzIG5vdCByZWZlcmVuY2VkIGJ5IHRoZSBtZXNoXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbXRsLm1hdGVyaWFsc1tuYW1lXTtcblxuICAgICAgICAgICAgLy8gRmluZCB0aGUgbWF0ZXJpYWwgaW5kZXggZm9yIHRoaXMgbWF0ZXJpYWxcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSB0aGlzLm1hdGVyaWFsSW5kaWNlc1ttYXRlcmlhbC5uYW1lXVxuXG4gICAgICAgICAgICAvLyBQdXQgdGhlIG1hdGVyaWFsIGludG8gdGhlIG1hdGVyaWFsc0J5SW5kZXggb2JqZWN0IGF0IHRoZSByaWdodFxuICAgICAgICAgICAgLy8gc3BvdCBhcyBkZXRlcm1pbmVkIHdoZW4gdGhlIG9iaiBmaWxlIHdhcyBwYXJzZWRcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzQnlJbmRleFttYXRlcmlhbEluZGV4XSA9IG1hdGVyaWFsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21lc2guanMiLCIvKipcbiAqIFRoZSBNYXRlcmlhbCBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSB1bmlxdWUgbmFtZSBvZiB0aGUgbWF0ZXJpYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAvLyB0aGUgdW5pcXVlIG1hdGVyaWFsIElELlxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgLy8gVGhlIHZhbHVlcyBmb3IgdGhlIGZvbGxvd2luZyBhdHRpYnV0ZXNcbiAgICAvLyBhcmUgYW4gYXJyYXkgb2YgUiwgRywgQiBub3JtYWxpemVkIHZhbHVlcy5cbiAgICAvLyBLYSAtIEFtYmllbnQgUmVmbGVjdGl2aXR5XG4gICAgdGhpcy5hbWJpZW50ID0gWzAsIDAsIDBdO1xuICAgIC8vIEtkIC0gRGVmdXNlIFJlZmxlY3Rpdml0eVxuICAgIHRoaXMuZGlmZnVzZSA9IFswLCAwLCAwXTtcbiAgICAvLyBLc1xuICAgIHRoaXMuc3BlY3VsYXIgPSBbMCwgMCwgMF07XG4gICAgLy8gS2VcbiAgICB0aGlzLmVtaXNzaXZlID0gWzAsIDAsIDBdO1xuICAgIC8vIFRmXG4gICAgdGhpcy50cmFuc21pc3Npb25GaWx0ZXIgPSBbMCwgMCwgMF07XG4gICAgLy8gZFxuICAgIHRoaXMuZGlzc29sdmUgPSAwO1xuICAgIC8vIHZhbGlkIHJhbmdlIGlzIGJldHdlZW4gMCBhbmQgMTAwMFxuICAgIHRoaXMuc3BlY3VsYXJFeHBvbmVudCA9IDA7XG4gICAgLy8gZWl0aGVyIGQgb3IgVHI7IHZhbGlkIHZhbHVlcyBhcmUgbm9ybWFsaXplZFxuICAgIHRoaXMudHJhbnNwYXJlbmN5ID0gMDtcbiAgICAvLyBpbGx1bSAtIHRoZSBlbnVtIG9mIHRoZSBpbGx1bWluYXRpb24gbW9kZWwgdG8gdXNlXG4gICAgdGhpcy5pbGx1bWluYXRpb24gPSAwO1xuICAgIC8vIE5pIC0gU2V0IHRvIFwibm9ybWFsXCIgKGFpcikuXG4gICAgdGhpcy5yZWZyYWN0aW9uSW5kZXggPSAxO1xuICAgIC8vIHNoYXJwbmVzc1xuICAgIHRoaXMuc2hhcnBuZXNzID0gMDtcbiAgICAvLyBtYXBfS2RcbiAgICB0aGlzLm1hcERpZmZ1c2UgPSBudWxsO1xuICAgIC8vIG1hcF9LYVxuICAgIHRoaXMubWFwQW1iaWVudCA9IG51bGw7XG4gICAgLy8gbWFwX0tzXG4gICAgdGhpcy5tYXBTcGVjdWxhciA9IG51bGw7XG4gICAgLy8gbWFwX05zXG4gICAgdGhpcy5tYXBTcGVjdWxhckV4cG9uZW50ID0gbnVsbDtcbiAgICAvLyBtYXBfZFxuICAgIHRoaXMubWFwRGlzc29sdmUgPSBudWxsO1xuICAgIC8vIG1hcF9hYXRcbiAgICB0aGlzLmFudGlBbGlhc2luZyA9IGZhbHNlO1xuICAgIC8vIG1hcF9idW1wIG9yIGJ1bXBcbiAgICB0aGlzLm1hcEJ1bXAgPSBudWxsO1xuICAgIC8vIGRpc3BcbiAgICB0aGlzLm1hcERpc3BsYWNlbWVudCA9IG51bGw7XG4gICAgLy8gZGVjYWxcbiAgICB0aGlzLm1hcERlY2FsID0gbnVsbDtcbiAgICAvLyBtYXBfS2VcbiAgICB0aGlzLm1hcEVtaXNzaXZlID0gbnVsbDtcbiAgICAvLyByZWZsIC0gd2hlbiB0aGUgcmVmbGVjdGlvbiB0eXBlIGlzIGEgY3ViZSwgdGhlcmUgd2lsbCBiZSBtdWx0aXBsZSByZWZsXG4gICAgLy8gICAgICAgIHN0YXRlbWVudHMgZm9yIGVhY2ggc2lkZSBvZiB0aGUgY3ViZS4gSWYgaXQncyBhIHNwaGVyaWNhbFxuICAgIC8vICAgICAgICByZWZsZWN0aW9uLCB0aGVyZSBzaG91bGQgb25seSBldmVyIGJlIG9uZS5cbiAgICB0aGlzLm1hcFJlZmxlY3Rpb25zID0gW107XG4gIH1cbn1cblxuLyoqXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9XYXZlZnJvbnRfLm9ial9maWxlXG4gKiBodHRwOi8vcGF1bGJvdXJrZS5uZXQvZGF0YWZvcm1hdHMvbXRsL1xuICovXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxMaWJyYXJ5IHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIE1hdGVyaWFsIFBhcnNlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbXRsRGF0YSB0aGUgTVRMIGZpbGUgY29udGVudHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG10bERhdGEpIHtcbiAgICB0aGlzLmRhdGEgPSBtdGxEYXRhO1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsID0gbnVsbDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHt9O1xuXG4gICAgdGhpcy5wYXJzZSgpO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gIC8qIHRoZSBmdW5jdGlvbiBuYW1lcyBoZXJlIGRpc29iZXkgY2FtZWxDYXNlIGNvbnZlbnRpb25zXG4gICAgIHRvIG1ha2UgcGFyc2luZy9yb3V0aW5nIGVhc2llci4gc2VlIHRoZSBwYXJzZSBmdW5jdGlvblxuICAgICBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uLiAqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IE1hdGVyaWFsIG9iamVjdCBhbmQgYWRkcyB0byB0aGUgcmVnaXN0cnkuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9uZXdtdGwodG9rZW5zKSB7XG4gICAgbGV0IG5hbWUgPSB0b2tlbnNbMF07XG4gICAgLy8gY29uc29sZS5pbmZvKCdQYXJzaW5nIG5ldyBNYXRlcmlhbDonLCBuYW1lKTtcblxuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG5hbWUpO1xuICAgIHRoaXMubWF0ZXJpYWxzW25hbWVdID0gdGhpcy5jdXJyZW50TWF0ZXJpYWw7XG4gIH1cblxuICAvKipcbiAgICogU2VlIHRoZSBkb2N1bWVuYXRpb24gZm9yIHBhcnNlX0thIGJlbG93IGZvciBhIGJldHRlciB1bmRlcnN0YW5kaW5nLlxuICAgKlxuICAgKiBHaXZlbiBhIGxpc3Qgb2YgcG9zc2libGUgY29sb3IgdG9rZW5zLCByZXR1cm5zIGFuIGFycmF5IG9mIFIsIEcsIGFuZCBCXG4gICAqIGNvbG9yIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICogQHJldHVybiB7Kn0gYSAzIGVsZW1lbnQgYXJyYXkgY29udGFpbmluZyB0aGUgUiwgRywgYW5kIEIgdmFsdWVzXG4gICAqIG9mIHRoZSBjb2xvci5cbiAgICovXG4gIHBhcnNlQ29sb3IodG9rZW5zKSB7XG4gICAgaWYgKHRva2Vuc1swXSA9PSAnc3BlY3RyYWwnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnVGhlIE1UTCBwYXJzZXIgZG9lcyBub3Qgc3VwcG9ydCBzcGVjdHJhbCBjdXJ2ZSBmaWxlcy4gWW91IHdpbGwgJyArXG4gICAgICAgICduZWVkIHRvIGNvbnZlcnQgdGhlIE1UTCBjb2xvcnMgdG8gZWl0aGVyIFJHQiBvciBDSUVYWVouJ1xuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodG9rZW5zWzBdID09ICd4eXonKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1RPRE86IGNvbnZlcnQgWFlaIHRvIFJHQicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGZyb20gbXkgdW5kZXJzdGFuZGluZyBvZiB0aGUgc3BlYywgUkdCIHZhbHVlcyBhdCB0aGlzIHBvaW50XG4gICAgLy8gd2lsbCBlaXRoZXIgYmUgMyBmbG9hdHMgb3IgZXhhY3RseSAxIGZsb2F0LCBzbyB0aGF0J3MgdGhlIGNoZWNrXG4gICAgLy8gdGhhdCBpJ20gZ29pbmcgdG8gcGVyZm9ybSBoZXJlXG4gICAgaWYgKHRva2Vucy5sZW5ndGggPT0gMykge1xuICAgICAgcmV0dXJuIHRva2Vucy5tYXAocGFyc2VGbG9hdCk7XG4gICAgfVxuXG4gICAgLy8gU2luY2UgdG9rZW5zIGF0IHRoaXMgcG9pbnQgaGFzIGEgbGVuZ3RoIG9mIDMsIHdlJ3JlIGdvaW5nIHRvIGFzc3VtZVxuICAgIC8vIGl0J3MgZXhhY3RseSAxLCBza2lwcGluZyB0aGUgY2hlY2sgZm9yIDIuXG4gICAgbGV0IHZhbHVlID0gcGFyc2VGbG9hdCh0b2tlbnNbMF0pO1xuICAgIC8vIGluIHRoaXMgY2FzZSwgYWxsIHZhbHVlcyBhcmUgZXF1aXZhbGVudFxuICAgIHJldHVybiBbdmFsdWUsIHZhbHVlLCB2YWx1ZV07XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdGhlIGFtYmllbnQgcmVmbGVjdGl2aXR5XG4gICAqXG4gICAqIEEgS2EgZGlyZWN0aXZlIGNhbiB0YWtlIG9uZSBvZiB0aHJlZSBmb3JtczpcbiAgICogICAtIEthIHIgZyBiXG4gICAqICAgLSBLYSBzcGVjdHJhbCBmaWxlLnJmbFxuICAgKiAgIC0gS2EgeHl6IHggeSB6XG4gICAqIFRoZXNlIHRocmVlIGZvcm1zIGFyZSBtdXR1YWxseSBleGNsdXNpdmUgaW4gdGhhdCBvbmx5IG9uZVxuICAgKiBkZWNsYXJhdGlvbiBjYW4gZXhpc3QgcGVyIG1hdGVyaWFsLiBJdCBpcyBjb25zaWRlcmVkIGEgc3ludGF4XG4gICAqIGVycm9yIG90aGVyd2lzZS5cbiAgICpcbiAgICogVGhlIFwiS2FcIiBmb3JtIHNwZWNpZmllcyB0aGUgYW1iaWVudCByZWZsZWN0aXZpdHkgdXNpbmcgUkdCIHZhbHVlcy5cbiAgICogVGhlIFwiZ1wiIGFuZCBcImJcIiB2YWx1ZXMgYXJlIG9wdGlvbmFsLiBJZiBvbmx5IHRoZSBcInJcIiB2YWx1ZSBpc1xuICAgKiBzcGVjaWZpZWQsIHRoZW4gdGhlIFwiZ1wiIGFuZCBcImJcIiB2YWx1ZXMgYXJlIGFzc2lnbmVkIHRoZSB2YWx1ZSBvZlxuICAgKiBcInJcIi4gVmFsdWVzIGFyZSBub3JtYWxseSBpbiB0aGUgcmFuZ2UgMC4wIHRvIDEuMC4gVmFsdWVzIG91dHNpZGVcbiAgICogb2YgdGhpcyByYW5nZSBpbmNyZWFzZSBvciBkZWNyZWFzZSB0aGUgcmVmbGVjdGl2aXR5IGFjY29yZGluZ2x5LlxuICAgKlxuICAgKiBUaGUgXCJLYSBzcGVjdHJhbFwiIGZvcm0gc3BlY2lmaWVzIHRoZSBhbWJpZW50IHJlZmxlY3Rpdml0eSB1c2luZyBhXG4gICAqIHNwZWN0cmFsIGN1cnZlLiBcImZpbGUucmZsXCIgaXMgdGhlIG5hbWUgb2YgdGhlIFwiLnJmbFwiIGZpbGUgY29udGFpbmluZ1xuICAgKiB0aGUgY3VydmUgZGF0YS4gXCJmYWN0b3JcIiBpcyBhbiBvcHRpb25hbCBhcmd1bWVudCB3aGljaCBpcyBhIG11bHRpcGxpZXJcbiAgICogZm9yIHRoZSB2YWx1ZXMgaW4gdGhlIC5yZmwgZmlsZSBhbmQgZGVmYXVsdHMgdG8gMS4wIGlmIG5vdCBzcGVjaWZpZWQuXG4gICAqXG4gICAqIFRoZSBcIkthIHh5elwiIGZvcm0gc3BlY2lmaWVzIHRoZSBhbWJpZW50IHJlZmxlY3Rpdml0eSB1c2luZyBDSUVYWVogdmFsdWVzLlxuICAgKiBcInggeSB6XCIgYXJlIHRoZSB2YWx1ZXMgb2YgdGhlIENJRVhZWiBjb2xvciBzcGFjZS4gVGhlIFwieVwiIGFuZCBcInpcIiBhcmd1bWVudHNcbiAgICogYXJlIG9wdGlvbmFsIGFuZCB0YWtlIG9uIHRoZSB2YWx1ZSBvZiB0aGUgXCJ4XCIgY29tcG9uZW50IGlmIG9ubHkgXCJ4XCIgaXNcbiAgICogc3BlY2lmaWVkLiBUaGUgXCJ4IHkgelwiIHZhbHVlcyBhcmUgbm9ybWFsbHkgaW4gdGhlIHJhbmdlIG9mIDAuMCB0byAxLjAgYW5kXG4gICAqIGluY3JlYXNlIG9yIGRlY3JlYXNlIGFtYmllbnQgcmVmbGVjdGl2aXR5IGFjY29yZGluZ2x5IG91dHNpZGUgb2YgdGhhdFxuICAgKiByYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX0thKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmFtYmllbnQgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaWZmdXNlIFJlZmxlY3Rpdml0eVxuICAgKlxuICAgKiBTaW1pbGFyIHRvIHRoZSBLYSBkaXJlY3RpdmUuIFNpbXBseSByZXBsYWNlIFwiS2FcIiB3aXRoIFwiS2RcIiBhbmQgdGhlIHJ1bGVzXG4gICAqIGFyZSB0aGUgc2FtZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfS2QodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuZGlmZnVzZSA9IHRoaXMucGFyc2VDb2xvcih0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWN0cmFsIFJlZmxlY3Rpdml0eVxuICAgKlxuICAgKiBTaW1pbGFyIHRvIHRoZSBLYSBkaXJlY3RpdmUuIFNpbXBseSByZXBsYWNlIFwiS3NcIiB3aXRoIFwiS2RcIiBhbmQgdGhlIHJ1bGVzXG4gICAqIGFyZSB0aGUgc2FtZVxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfS3ModG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuc3BlY3VsYXIgPSB0aGlzLnBhcnNlQ29sb3IodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWlzc2l2ZVxuICAgKlxuICAgKiBUaGUgYW1vdW50IGFuZCBjb2xvciBvZiBsaWdodCBlbWl0dGVkIGJ5IHRoZSBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9LZSh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5lbWlzc2l2ZSA9IHRoaXMucGFyc2VDb2xvcih0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbWlzc2lvbiBGaWx0ZXJcbiAgICpcbiAgICogQW55IGxpZ2h0IHBhc3NpbmcgdGhyb3VnaCB0aGUgb2JqZWN0IGlzIGZpbHRlcmVkIGJ5IHRoZSB0cmFuc21pc3Npb25cbiAgICogZmlsdGVyLCB3aGljaCBvbmx5IGFsbG93cyBzcGVjaWZpYyBjb2xvcnMgdG8gcGFzcyB0aHJvdWdoLiBGb3IgZXhhbXBsZSwgVGZcbiAgICogMCAxIDAgYWxsb3dzIGFsbCBvZiB0aGUgZ3JlZW4gdG8gcGFzcyB0aHJvdWdoIGFuZCBmaWx0ZXJzIG91dCBhbGwgb2YgdGhlXG4gICAqIHJlZCBhbmQgYmx1ZS5cbiAgICpcbiAgICogU2ltaWxhciB0byB0aGUgS2EgZGlyZWN0aXZlLiBTaW1wbHkgcmVwbGFjZSBcIktzXCIgd2l0aCBcIlRmXCIgYW5kIHRoZSBydWxlc1xuICAgKiBhcmUgdGhlIHNhbWVcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX1RmKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLnRyYW5zbWlzc2lvbkZpbHRlciA9IHRoaXMucGFyc2VDb2xvcih0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgZGlzc29sdmUgZm9yIHRoZSBjdXJyZW50IG1hdGVyaWFsLlxuICAgKlxuICAgKiBTdGF0ZW1lbnQ6IGQgWy1oYWxvXSBgZmFjdG9yYFxuICAgKlxuICAgKiBFeGFtcGxlOiBcImQgMC41XCJcbiAgICpcbiAgICogVGhlIGZhY3RvciBpcyB0aGUgYW1vdW50IHRoaXMgbWF0ZXJpYWwgZGlzc29sdmVzIGludG8gdGhlIGJhY2tncm91bmQuIEFcbiAgICogZmFjdG9yIG9mIDEuMCBpcyBmdWxseSBvcGFxdWUuIFRoaXMgaXMgdGhlIGRlZmF1bHQgd2hlbiBhIG5ldyBtYXRlcmlhbCBpc1xuICAgKiBjcmVhdGVkLiBBIGZhY3RvciBvZiAwLjAgaXMgZnVsbHkgZGlzc29sdmVkIChjb21wbGV0ZWx5IHRyYW5zcGFyZW50KS5cbiAgICpcbiAgICogVW5saWtlIGEgcmVhbCB0cmFuc3BhcmVudCBtYXRlcmlhbCwgdGhlIGRpc3NvbHZlIGRvZXMgbm90IGRlcGVuZCB1cG9uXG4gICAqIG1hdGVyaWFsIHRoaWNrbmVzcyBub3IgZG9lcyBpdCBoYXZlIGFueSBzcGVjdHJhbCBjaGFyYWN0ZXIuIERpc3NvbHZlIHdvcmtzXG4gICAqIG9uIGFsbCBpbGx1bWluYXRpb24gbW9kZWxzLlxuICAgKlxuICAgKiBUaGUgZGlzc29sdmUgc3RhdGVtZW50IGFsbG93cyBmb3IgYW4gb3B0aW9uYWwgXCItaGFsb1wiIGZsYWcgd2hpY2ggaW5kaWNhdGVzXG4gICAqIHRoYXQgYSBkaXNzb2x2ZSBpcyBkZXBlbmRlbnQgb24gdGhlIHN1cmZhY2Ugb3JpZW50YXRpb24gcmVsYXRpdmUgdG8gdGhlXG4gICAqIHZpZXdlci4gRm9yIGV4YW1wbGUsIGEgc3BoZXJlIHdpdGggdGhlIGZvbGxvd2luZyBkaXNzb2x2ZSwgXCJkIC1oYWxvIDAuMFwiLFxuICAgKiB3aWxsIGJlIGZ1bGx5IGRpc3NvbHZlZCBhdCBpdHMgY2VudGVyIGFuZCB3aWxsIGFwcGVhciBncmFkdWFsbHkgbW9yZSBvcGFxdWVcbiAgICogdG93YXJkIGl0cyBlZGdlLlxuICAgKlxuICAgKiBcImZhY3RvclwiIGlzIHRoZSBtaW5pbXVtIGFtb3VudCBvZiBkaXNzb2x2ZSBhcHBsaWVkIHRvIHRoZSBtYXRlcmlhbC4gVGhlXG4gICAqIGFtb3VudCBvZiBkaXNzb2x2ZSB3aWxsIHZhcnkgYmV0d2VlbiAxLjAgKGZ1bGx5IG9wYXF1ZSkgYW5kIHRoZSBzcGVjaWZpZWRcbiAgICogXCJmYWN0b3JcIi4gVGhlIGZvcm11bGEgaXM6XG4gICAqXG4gICAqICAgIGRpc3NvbHZlID0gMS4wIC0gKE4qdikoMS4wLWZhY3RvcilcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX2QodG9rZW5zKSB7XG4gICAgLy8gdGhpcyBpZ25vcmVzIHRoZSAtaGFsbyBvcHRpb24gYXMgSSBjYW4ndCBmaW5kIGFueSBkb2N1bWVudGF0aW9uIG9uIHdoYXRcbiAgICAvLyBpdCdzIHN1cHBvc2VkIHRvIGJlLlxuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmRpc3NvbHZlID0gcGFyc2VGbG9hdCh0b2tlbnMucG9wKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBcImlsbHVtXCIgc3RhdGVtZW50IHNwZWNpZmllcyB0aGUgaWxsdW1pbmF0aW9uIG1vZGVsIHRvIHVzZSBpbiB0aGVcbiAgICogbWF0ZXJpYWwuIElsbHVtaW5hdGlvbiBtb2RlbHMgYXJlIG1hdGhlbWF0aWNhbCBlcXVhdGlvbnMgdGhhdCByZXByZXNlbnRcbiAgICogdmFyaW91cyBtYXRlcmlhbCBsaWdodGluZyBhbmQgc2hhZGluZyBlZmZlY3RzLlxuICAgKlxuICAgKiBUaGUgaWxsdW1pbmF0aW9uIG51bWJlciBjYW4gYmUgYSBudW1iZXIgZnJvbSAwIHRvIDEwLiBUaGUgZm9sbG93aW5nIGFyZVxuICAgKiB0aGUgbGlzdCBvZiBpbGx1bWluYXRpb24gZW51bWVyYXRpb25zIGFuZCB0aGVpciBzdW1tYXJpZXM6XG4gICAqIDAuIENvbG9yIG9uIGFuZCBBbWJpZW50IG9mZlxuICAgKiAxLiBDb2xvciBvbiBhbmQgQW1iaWVudCBvblxuICAgKiAyLiBIaWdobGlnaHQgb25cbiAgICogMy4gUmVmbGVjdGlvbiBvbiBhbmQgUmF5IHRyYWNlIG9uXG4gICAqIDQuIFRyYW5zcGFyZW5jeTogR2xhc3Mgb24sIFJlZmxlY3Rpb246IFJheSB0cmFjZSBvblxuICAgKiA1LiBSZWZsZWN0aW9uOiBGcmVzbmVsIG9uIGFuZCBSYXkgdHJhY2Ugb25cbiAgICogNi4gVHJhbnNwYXJlbmN5OiBSZWZyYWN0aW9uIG9uLCBSZWZsZWN0aW9uOiBGcmVzbmVsIG9mZiBhbmQgUmF5IHRyYWNlIG9uXG4gICAqIDcuIFRyYW5zcGFyZW5jeTogUmVmcmFjdGlvbiBvbiwgUmVmbGVjdGlvbjogRnJlc25lbCBvbiBhbmQgUmF5IHRyYWNlIG9uXG4gICAqIDguIFJlZmxlY3Rpb24gb24gYW5kIFJheSB0cmFjZSBvZmZcbiAgICogOS4gVHJhbnNwYXJlbmN5OiBHbGFzcyBvbiwgUmVmbGVjdGlvbjogUmF5IHRyYWNlIG9mZlxuICAgKiAxMC4gQ2FzdHMgc2hhZG93cyBvbnRvIGludmlzaWJsZSBzdXJmYWNlc1xuICAgKlxuICAgKiBFeGFtcGxlOiBcImlsbHVtIDJcIiB0byBzcGVjaWZ5IHRoZSBcIkhpZ2hsaWdodCBvblwiIG1vZGVsXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9pbGx1bSh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5pbGx1bWluYXRpb24gPSBwYXJzZUludCh0b2tlbnNbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wdGljYWwgRGVuc2l0eSAoQUtBIEluZGV4IG9mIFJlZnJhY3Rpb24pXG4gICAqXG4gICAqIFN0YXRlbWVudDogTmkgYGluZGV4YFxuICAgKlxuICAgKiBFeGFtcGxlOiBOaSAxLjBcbiAgICpcbiAgICogU3BlY2lmaWVzIHRoZSBvcHRpY2FsIGRlbnNpdHkgZm9yIHRoZSBzdXJmYWNlLiBgaW5kZXhgIGlzIHRoZSB2YWx1ZVxuICAgKiBmb3IgdGhlIG9wdGljYWwgZGVuc2l0eS4gVGhlIHZhbHVlcyBjYW4gcmFuZ2UgZnJvbSAwLjAwMSB0byAxMC4gIEEgdmFsdWUgb2ZcbiAgICogMS4wIG1lYW5zIHRoYXQgbGlnaHQgZG9lcyBub3QgYmVuZCBhcyBpdCBwYXNzZXMgdGhyb3VnaCBhbiBvYmplY3QuXG4gICAqIEluY3JlYXNpbmcgdGhlIG9wdGljYWxfZGVuc2l0eSBpbmNyZWFzZXMgdGhlIGFtb3VudCBvZiBiZW5kaW5nLiBHbGFzcyBoYXNcbiAgICogYW4gaW5kZXggb2YgcmVmcmFjdGlvbiBvZiBhYm91dCAxLjUuIFZhbHVlcyBvZiBsZXNzIHRoYW4gMS4wIHByb2R1Y2VcbiAgICogYml6YXJyZSByZXN1bHRzIGFuZCBhcmUgbm90IHJlY29tbWVuZGVkXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyB0aGUgdG9rZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlXG4gICAqL1xuICBwYXJzZV9OaSh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5yZWZyYWN0aW9uSW5kZXggPSBwYXJzZUZsb2F0KHRva2Vuc1swXSk7XG4gIH1cblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBzcGVjdWxhciBleHBvbmVudCBmb3IgdGhlIGN1cnJlbnQgbWF0ZXJpYWwuIFRoaXMgZGVmaW5lcyB0aGVcbiAgICogZm9jdXMgb2YgdGhlIHNwZWN1bGFyIGhpZ2hsaWdodC5cbiAgICpcbiAgICogU3RhdGVtZW50OiBOcyBgZXhwb25lbnRgXG4gICAqXG4gICAqIEV4YW1wbGU6IFwiTnMgMjUwXCJcbiAgICpcbiAgICogYGV4cG9uZW50YCBpcyB0aGUgdmFsdWUgZm9yIHRoZSBzcGVjdWxhciBleHBvbmVudC4gQSBoaWdoIGV4cG9uZW50IHJlc3VsdHNcbiAgICogaW4gYSB0aWdodCwgY29uY2VudHJhdGVkIGhpZ2hsaWdodC4gTnMgVmFsdWVzIG5vcm1hbGx5IHJhbmdlIGZyb20gMCB0b1xuICAgKiAxMDAwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgdGhlIHRva2VucyBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZVxuICAgKi9cbiAgcGFyc2VfTnModG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwuc3BlY3VsYXJFeHBvbmVudCA9IHBhcnNlSW50KHRva2Vuc1swXSk7XG4gIH1cblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBzaGFycG5lc3Mgb2YgdGhlIHJlZmxlY3Rpb25zIGZyb20gdGhlIGxvY2FsIHJlZmxlY3Rpb24gbWFwLlxuICAgKlxuICAgKiBTdGF0ZW1lbnQ6IHNoYXJwbmVzcyBgdmFsdWVgXG4gICAqXG4gICAqIEV4YW1wbGU6IFwic2hhcnBuZXNzIDEwMFwiXG4gICAqXG4gICAqIElmIGEgbWF0ZXJpYWwgZG9lcyBub3QgaGF2ZSBhIGxvY2FsIHJlZmxlY3Rpb24gbWFwIGRlZmluZWQgaW4gaXRzIG1hdGVyaWFsXG4gICAqIGRlZmludGlvbnMsIHNoYXJwbmVzcyB3aWxsIGFwcGx5IHRvIHRoZSBnbG9iYWwgcmVmbGVjdGlvbiBtYXAgZGVmaW5lZCBpblxuICAgKiBQcmVWaWV3LlxuICAgKlxuICAgKiBgdmFsdWVgIGNhbiBiZSBhIG51bWJlciBmcm9tIDAgdG8gMTAwMC4gVGhlIGRlZmF1bHQgaXMgNjAuIEEgaGlnaCB2YWx1ZVxuICAgKiByZXN1bHRzIGluIGEgY2xlYXIgcmVmbGVjdGlvbiBvZiBvYmplY3RzIGluIHRoZSByZWZsZWN0aW9uIG1hcC5cbiAgICpcbiAgICogVGlwOiBzaGFycG5lc3MgdmFsdWVzIGdyZWF0ZXIgdGhhbiAxMDAgaW50cm9kdWNlIGFsaWFzaW5nIGVmZmVjdHMgaW5cbiAgICogZmxhdCBzdXJmYWNlcyB0aGF0IGFyZSB2aWV3ZWQgYXQgYSBzaGFycCBhbmdsZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIHRoZSB0b2tlbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBkaXJlY3RpdmVcbiAgICovXG4gIHBhcnNlX3NoYXJwbmVzcyh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5zaGFycG5lc3MgPSBwYXJzZUludCh0b2tlbnNbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLWNjIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtY2MgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9jYyh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLmNvbG9yQ29ycmVjdGlvbiA9IHZhbHVlc1swXSA9PSAnb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLWJsZW5kdSBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWJsZW5kdSBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX2JsZW5kdSh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLmhvcml6b250YWxCbGVuZGluZyA9IHZhbHVlc1swXSA9PSAnb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLWJsZW5kdiBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWJsZW5kdiBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX2JsZW5kdih2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLnZlcnRpY2FsQmxlbmRpbmcgPSB2YWx1ZXNbMF0gPT0gJ29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1ib29zdCBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWJvb3N0IGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfYm9vc3QodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5ib29zdE1pcE1hcFNoYXJwbmVzcyA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1tbSBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLW1tIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfbW0odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5tb2RpZnlUZXh0dXJlTWFwLmJyaWdodG5lc3MgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7XG4gICAgb3B0aW9ucy5tb2RpZnlUZXh0dXJlTWFwLmNvbnRyYXN0ID0gcGFyc2VGbG9hdCh2YWx1ZXNbMV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyBhbmQgc2V0cyB0aGUgLW8sIC1zLCBhbmQgLXQgIHUsIHYsIGFuZCB3IHZhbHVlc1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1vLCAtcywgLXQgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uIHRoZSBPYmplY3Qgb2YgZWl0aGVyIHRoZSAtbywgLXMsIC10IG9wdGlvblxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IGRlZmF1bHRWYWx1ZSB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9vc3QodmFsdWVzLCBvcHRpb24sIGRlZmF1bHRWYWx1ZSkge1xuICAgIHdoaWxlICh2YWx1ZXMubGVuZ3RoIDwgMykge1xuICAgICAgdmFsdWVzLnB1c2goZGVmYXVsdFZhbHVlKTtcbiAgICB9XG5cbiAgICBvcHRpb24udSA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgICBvcHRpb24udiA9IHBhcnNlRmxvYXQodmFsdWVzWzFdKTtcbiAgICBvcHRpb24udyA9IHBhcnNlRmxvYXQodmFsdWVzWzJdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1vIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtbyBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX28odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgdGhpcy5wYXJzZV9vc3QodmFsdWVzLCBvcHRpb25zLm9mZnNldCwgMCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtcyBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLXMgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9zKHZhbHVlcywgb3B0aW9ucykge1xuICAgIHRoaXMucGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9ucy5zY2FsZSwgMSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSAtdCBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLXQgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV90KHZhbHVlcywgb3B0aW9ucykge1xuICAgIHRoaXMucGFyc2Vfb3N0KHZhbHVlcywgb3B0aW9ucy50dXJidWxlbmNlLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC10ZXhyZXMgZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC10ZXhyZXMgZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV90ZXhyZXModmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy50ZXh0dXJlUmVzb2x1dGlvbiA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIC1jbGFtcCBmbGFnIGFuZCB1cGRhdGVzIHRoZSBvcHRpb25zIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHZhbHVlcyB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgLWNsYW1wIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfY2xhbXAodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5jbGFtcCA9IHZhbHVlc1swXSA9PSAnb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLWJtIGZsYWcgYW5kIHVwZGF0ZXMgdGhlIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtYm0gZmxhZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyB0aGUgT2JqZWN0IG9mIGFsbCBpbWFnZSBvcHRpb25zXG4gICAqL1xuICBwYXJzZV9ibSh2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLmJ1bXBNdWx0aXBsaWVyID0gcGFyc2VGbG9hdCh2YWx1ZXNbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgLWltZmNoYW4gZmxhZyBhbmQgdXBkYXRlcyB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB2YWx1ZXMgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIC1pbWZjaGFuIGZsYWdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgdGhlIE9iamVjdCBvZiBhbGwgaW1hZ2Ugb3B0aW9uc1xuICAgKi9cbiAgcGFyc2VfaW1mY2hhbih2YWx1ZXMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLmltZkNoYW4gPSB2YWx1ZXNbMF07XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBvbmx5IGV4aXN0cyBmb3IgcmVsZWN0aW9uIG1hcHMgYW5kIGRlbm90ZXMgdGhlIHR5cGUgb2YgcmVmbGVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdmFsdWVzIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSAtdHlwZSBmbGFnXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIHRoZSBPYmplY3Qgb2YgYWxsIGltYWdlIG9wdGlvbnNcbiAgICovXG4gIHBhcnNlX3R5cGUodmFsdWVzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5yZWZsZWN0aW9uVHlwZSA9IHZhbHVlc1swXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIHRleHR1cmUncyBvcHRpb25zIGFuZCByZXR1cm5zIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggdGhlIGluZm9cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGFsbCBvZiB0aGUgb3B0aW9uIHRva2VucyB0byBwYXNzIHRvIHRoZSB0ZXh0dXJlXG4gICAqIEByZXR1cm4ge09iamVjdH0gYSBjb21wbGV0ZSBvYmplY3Qgb2Ygb2JqZWN0cyB0byBhcHBseSB0byB0aGUgdGV4dHVyZVxuICAgKi9cbiAgcGFyc2VPcHRpb25zKHRva2Vucykge1xuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgY29sb3JDb3JyZWN0aW9uOiBmYWxzZSxcbiAgICAgIGhvcml6b250YWxCbGVuZGluZzogdHJ1ZSxcbiAgICAgIHZlcnRpY2FsQmxlbmRpbmc6IHRydWUsXG4gICAgICBib29zdE1pcE1hcFNoYXJwbmVzczogMCxcbiAgICAgIG1vZGlmeVRleHR1cmVNYXA6IHtcbiAgICAgICAgYnJpZ2h0bmVzczogMCxcbiAgICAgICAgY29udHJhc3Q6IDEsXG4gICAgICB9LFxuICAgICAgb2Zmc2V0OiB7dTogMCwgdjogMCwgdzogMH0sXG4gICAgICBzY2FsZToge3U6IDEsIHY6IDEsIHc6IDF9LFxuICAgICAgdHVyYnVsZW5jZToge3U6IDAsIHY6IDAsIHc6IDB9LFxuICAgICAgY2xhbXA6IGZhbHNlLFxuICAgICAgdGV4dHVyZVJlc29sdXRpb246IG51bGwsXG4gICAgICBidW1wTXVsdGlwbGllcjogMSxcbiAgICAgIGltZkNoYW46IG51bGwsXG4gICAgfTtcblxuICAgIGxldCBvcHRpb247XG4gICAgbGV0IHZhbHVlcztcbiAgICBsZXQgb3B0aW9uc1RvVmFsdWVzID0ge307XG5cbiAgICB0b2tlbnMucmV2ZXJzZSgpO1xuXG4gICAgd2hpbGUgKHRva2Vucy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zLnBvcCgpO1xuXG4gICAgICBpZiAodG9rZW4uc3RhcnRzV2l0aCgnLScpKSB7XG4gICAgICAgIG9wdGlvbiA9IHRva2VuLnN1YnN0cigxKTtcbiAgICAgICAgb3B0aW9uc1RvVmFsdWVzW29wdGlvbl0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnNUb1ZhbHVlc1tvcHRpb25dLnB1c2godG9rZW4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAob3B0aW9uIGluIG9wdGlvbnNUb1ZhbHVlcykge1xuICAgICAgaWYgKCFvcHRpb25zVG9WYWx1ZXMuaGFzT3duUHJvcGVydHkob3B0aW9uKSl7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFsdWVzID0gb3B0aW9uc1RvVmFsdWVzW29wdGlvbl07XG4gICAgICBsZXQgb3B0aW9uTWV0aG9kID0gdGhpc1tgcGFyc2VfJHtvcHRpb259YF07XG4gICAgICBpZiAob3B0aW9uTWV0aG9kKSB7XG4gICAgICAgIG9wdGlvbk1ldGhvZC5iaW5kKHRoaXMpKHZhbHVlcywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0dXJlIG1hcCBsaW5lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgYWxsIG9mIHRoZSB0b2tlbnMgcmVwcmVzZW50aW5nIHRoZSB0ZXh0dXJlXG4gICAqIEByZXR1cm4ge09iamVjdH0gYSBjb21wbGV0ZSBvYmplY3Qgb2Ygb2JqZWN0cyB0byBhcHBseSB0byB0aGUgdGV4dHVyZVxuICAgKi9cbiAgcGFyc2VNYXAodG9rZW5zKSB7XG4gICAgLy8gYWNjb3JkaW5nIHRvIHdpa2lwZWRpYTpcbiAgICAvLyAoaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2F2ZWZyb250Xy5vYmpfZmlsZSNWZW5kb3Jfc3BlY2lmaWNfYWx0ZXJhdGlvbnMpXG4gICAgLy8gdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHZlbmRvciB0aGF0IHBsYWNlcyB0aGUgZmlsZW5hbWUgYmVmb3JlIHRoZSBvcHRpb25zXG4gICAgLy8gcmF0aGVyIHRoYW4gYWZ0ZXIgKHdoaWNoIGlzIHRvIHNwZWMpLiBBbGwgb3B0aW9ucyBzdGFydCB3aXRoIGEgJy0nXG4gICAgLy8gc28gaWYgdGhlIGZpcnN0IHRva2VuIGRvZXNuJ3Qgc3RhcnQgd2l0aCBhICctJywgd2UncmUgZ29pbmcgdG8gYXNzdW1lXG4gICAgLy8gaXQncyB0aGUgbmFtZSBvZiB0aGUgbWFwIGZpbGUuXG4gICAgbGV0IGZpbGVuYW1lO1xuICAgIGxldCBvcHRpb25zO1xuICAgIGlmICghdG9rZW5zWzBdLnN0YXJ0c1dpdGgoJy0nKSkge1xuICAgICAgW2ZpbGVuYW1lLCAuLi5vcHRpb25zXSA9IHRva2VucztcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZW5hbWUgPSB0b2tlbnMucG9wKCk7XG4gICAgICBvcHRpb25zID0gdG9rZW5zO1xuICAgIH1cblxuICAgIG9wdGlvbnMgPSB0aGlzLnBhcnNlT3B0aW9ucyhvcHRpb25zKTtcbiAgICBvcHRpb25zWydmaWxlbmFtZSddID0gZmlsZW5hbWU7XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBhbWJpZW50IG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0thIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfS2EodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwQW1iaWVudCA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGRpZmZ1c2UgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfS2QgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX21hcF9LZCh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEaWZmdXNlID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgc3BlY3VsYXIgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfS3MgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX21hcF9Lcyh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBTcGVjdWxhciA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGVtaXNzaXZlIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gdG9rZW5zIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGUgbWFwX0tlIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfS2UodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRW1pc3NpdmUgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBzcGVjdWxhciBleHBvbmVudCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9OcyBkaXJlY2l2ZVxuICAgKi9cbiAgcGFyc2VfbWFwX05zKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcFNwZWN1bGFyRXhwb25lbnQgPSB0aGlzLnBhcnNlTWFwKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2VzIHRoZSBkaXNzb2x2ZSBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9kIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfZCh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBEaXNzb2x2ZSA9IHRoaXMucGFyc2VNYXAodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZXMgdGhlIGFudGktYWxpYXNpbmcgb3B0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfYWF0IGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfYWF0KHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLmFudGlBbGlhc2luZyA9IHRva2Vuc1swXSA9PSAnb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgYnVtcCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIG1hcF9idW1wIGRpcmVjaXZlXG4gICAqL1xuICBwYXJzZV9tYXBfYnVtcCh0b2tlbnMpIHtcbiAgICB0aGlzLmN1cnJlbnRNYXRlcmlhbC5tYXBCdW1wID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgYnVtcCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIGJ1bXAgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX2J1bXAodG9rZW5zKSB7XG4gICAgdGhpcy5wYXJzZV9tYXBfYnVtcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZGlzcCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIGRpc3AgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX2Rpc3AodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwRGlzcGxhY2VtZW50ID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgZGVjYWwgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSB0b2tlbnMgbGlzdCBvZiB0b2tlbnMgZm9yIHRoZSBtYXBfZGVjYWwgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX2RlY2FsKHRva2Vucykge1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsLm1hcERlY2FsID0gdGhpcy5wYXJzZU1hcCh0b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgcmVmbCBtYXAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHRva2VucyBsaXN0IG9mIHRva2VucyBmb3IgdGhlIHJlZmwgZGlyZWNpdmVcbiAgICovXG4gIHBhcnNlX3JlZmwodG9rZW5zKSB7XG4gICAgdGhpcy5jdXJyZW50TWF0ZXJpYWwubWFwUmVmbGVjdGlvbnMucHVzaCh0aGlzLnBhcnNlTWFwKHRva2VucykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlcyB0aGUgTVRMIGZpbGUuXG4gICAqIFxuICAgKiBJdGVyYXRlcyBsaW5lIGJ5IGxpbmUgcGFyc2luZyBlYWNoIE1UTCBkaXJlY3RpdmUuXG4gICAqIFxuICAgKiBUaGlzIGZ1bmN0aW9uIGV4cGVjdHMgdGhlIGZpcnN0IHRva2VuIGluIHRoZSBsaW5lXG4gICAqIHRvIGJlIGEgdmFsaWQgTVRMIGRpcmVjdGl2ZS4gVGhhdCB0b2tlbiBpcyB0aGVuIHVzZWRcbiAgICogdG8gdHJ5IGFuZCBydW4gYSBtZXRob2Qgb24gdGhpcyBjbGFzcy4gcGFyc2VfW2RpcmVjdGl2ZV1cbiAgICogRS5nLiwgdGhlIGBuZXdtdGxgIGRpcmVjdGl2ZSB3b3VsZCB0cnkgdG8gY2FsbCB0aGUgbWV0aG9kXG4gICAqIHBhcnNlX25ld210bC4gRWFjaCBwYXJzaW5nIGZ1bmN0aW9uIHRha2VzIGluIHRoZSByZW1haW5pbmdcbiAgICogbGlzdCBvZiB0b2tlbnMgYW5kIHVwZGF0ZXMgdGhlIGN1cnJlbnRNYXRlcmlhbCBjbGFzcyB3aXRoXG4gICAqIHRoZSBhdHRyaWJ1dGVzIHByb3ZpZGVkLlxuICAgKi9cbiAgcGFyc2UoKSB7XG4gICAgbGV0IGxpbmVzID0gdGhpcy5kYXRhLnNwbGl0KC9cXHI/XFxuLyk7XG4gICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xuICAgICAgbGluZSA9IGxpbmUudHJpbSgpO1xuICAgICAgaWYgKCFsaW5lIHx8IGxpbmUuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgdG9rZW5zID0gbGluZS5zcGxpdCgvXFxzLyk7XG4gICAgICBsZXQgZGlyZWN0aXZlO1xuICAgICAgW2RpcmVjdGl2ZSwgLi4udG9rZW5zXSA9IHRva2VucztcblxuICAgICAgbGV0IHBhcnNlTWV0aG9kID0gdGhpc1tgcGFyc2VfJHtkaXJlY3RpdmV9YF07XG5cbiAgICAgIGlmICghcGFyc2VNZXRob2QpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBEb24ndCBrbm93IGhvdyB0byBwYXJzZSB0aGUgZGlyZWN0aXZlOiBcIiR7ZGlyZWN0aXZlfVwiYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBjb25zb2xlLmxvZyhgUGFyc2luZyBcIiR7ZGlyZWN0aXZlfVwiIHdpdGggdG9rZW5zOiAke3Rva2Vuc31gKTtcbiAgICAgIHBhcnNlTWV0aG9kLmJpbmQodGhpcykodG9rZW5zKTtcbiAgICB9XG5cbiAgICAvLyBzb21lIGNsZWFudXAuIFRoZXNlIGRvbid0IG5lZWQgdG8gYmUgZXhwb3NlZCBhcyBwdWJsaWMgZGF0YS5cbiAgICBkZWxldGUgdGhpcy5kYXRhO1xuICAgIHRoaXMuY3VycmVudE1hdGVyaWFsID0gbnVsbDtcbiAgfVxuXG4gIC8qIGVzbGludC1lbmFibGUgY2FtZWxjYXNlKi9cbn07XG5cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL21hdGVyaWFsLmpzIiwiaW1wb3J0IE1lc2ggZnJvbSAnLi9tZXNoJztcbmltcG9ydCB7TWF0ZXJpYWwsIE1hdGVyaWFsTGlicmFyeX0gZnJvbSAnLi9tYXRlcmlhbCc7XG5pbXBvcnQge0xheW91dH0gZnJvbSAnLi9sYXlvdXQnO1xuaW1wb3J0IHtkb3dubG9hZE1vZGVscywgZG93bmxvYWRNZXNoZXMsXG4gICAgICAgIGluaXRNZXNoQnVmZmVycywgZGVsZXRlTWVzaEJ1ZmZlcnN9IGZyb20gJy4vdXRpbHMnO1xuXG5cbi8qKlxuICogQG5hbWVzcGFjZVxuICovXG5leHBvcnQge1xuICAgIE1lc2gsXG4gICAgTWF0ZXJpYWwsXG4gICAgTWF0ZXJpYWxMaWJyYXJ5LFxuICAgIExheW91dCxcblxuICAgIGRvd25sb2FkTW9kZWxzLFxuICAgIGRvd25sb2FkTWVzaGVzLFxuICAgIGluaXRNZXNoQnVmZmVycyxcbiAgICBkZWxldGVNZXNoQnVmZmVyc1xuXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwiXG5pbXBvcnQgTWVzaCBmcm9tICcuL21lc2gnO1xuaW1wb3J0IHtNYXRlcmlhbCwgTWF0ZXJpYWxMaWJyYXJ5fSBmcm9tICcuL21hdGVyaWFsJztcbmltcG9ydCB7TGF5b3V0fSBmcm9tICcuL2xheW91dCc7XG5cblxuZnVuY3Rpb24gZG93bmxvYWRNdGxUZXh0dXJlcyAobXRsLCByb290KSB7XG4gIGNvbnN0IG1hcEF0dHJpYnV0ZXMgPSBbXG4gICAgJ21hcERpZmZ1c2UnLFxuICAgICdtYXBBbWJpZW50JyxcbiAgICAnbWFwU3BlY3VsYXInLFxuICAgICdtYXBEaXNzb2x2ZScsXG4gICAgJ21hcEJ1bXAnLFxuICAgICdtYXBEaXNwbGFjZW1lbnQnLFxuICAgICdtYXBEZWNhbCcsXG4gICAgJ21hcEVtaXNzaXZlJyxcbiAgXTtcbiAgaWYgKCFyb290LmVuZHNXaXRoKCcvJykpIHtcbiAgICByb290ICs9ICcvJztcbiAgfVxuICBsZXQgdGV4dHVyZXMgPSBbXTtcblxuICBmb3IgKGxldCBtYXRlcmlhbCBpbiBtdGwubWF0ZXJpYWxzKSB7XG4gICAgaWYgKCFtdGwubWF0ZXJpYWxzLmhhc093blByb3BlcnR5KG1hdGVyaWFsKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG1hdGVyaWFsID0gbXRsLm1hdGVyaWFsc1ttYXRlcmlhbF07XG5cbiAgICBmb3IgKGxldCBhdHRyIG9mIG1hcEF0dHJpYnV0ZXMpIHtcbiAgICAgIGxldCBtYXBEYXRhID0gbWF0ZXJpYWxbYXR0cl07XG4gICAgICBpZiAoIW1hcERhdGEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCB1cmwgPSByb290ICsgbWFwRGF0YS5maWxlbmFtZTtcbiAgICAgIHRleHR1cmVzLnB1c2goXG4gICAgICAgIGZldGNoKHVybClcbiAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gICAgICAgICAgICBtYXBEYXRhLnRleHR1cmUgPSBpbWFnZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZG93bmxvYWQgdGV4dHVyZTogJHt1cmx9YCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICB9XG4gIH1cblxuICByZXR1cm4gUHJvbWlzZS5hbGwodGV4dHVyZXMpO1xufVxuXG5cbi8qKlxuICogQWNjZXB0cyBhIGxpc3Qgb2YgbW9kZWwgcmVxdWVzdCBvYmplY3RzIGFuZCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0XG4gKiByZXNvbHZlcyB3aGVuIGFsbCBtb2RlbHMgaGF2ZSBiZWVuIGRvd25sb2FkZWQgYW5kIHBhcnNlZC5cbiAqXG4gKiBUaGUgbGlzdCBvZiBtb2RlbCBvYmplY3RzIGZvbGxvdyB0aGlzIGludGVyZmFjZTpcbiAqIHtcbiAqICBvYmo6ICdwYXRoL3RvL21vZGVsLm9iaicsXG4gKiAgbXRsOiB0cnVlIHwgJ3BhdGgvdG8vbW9kZWwubXRsJyxcbiAqICBkb3dubG9hZE10bFRleHR1cmVzOiB0cnVlIHwgZmFsc2VcbiAqICBtdGxUZXh0dXJlUm9vdDogJy9tb2RlbHMvc3V6YW5uZS9tYXBzJ1xuICogIG5hbWU6ICdzdXphbm5lJ1xuICogfVxuICpcbiAqIFRoZSBgb2JqYCBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgYW5kIHNob3VsZCBiZSB0aGUgcGF0aCB0byB0aGVcbiAqIG1vZGVsJ3MgLm9iaiBmaWxlIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IHJlcG8gKGFic29sdXRlIFVSTHMgYXJlXG4gKiBzdWdnZXN0ZWQpLlxuICpcbiAqIFRoZSBgbXRsYCBhdHRyaWJ1dGUgaXMgb3B0aW9uYWwgYW5kIGNhbiBlaXRoZXIgYmUgYSBib29sZWFuIG9yXG4gKiBhIHBhdGggdG8gdGhlIG1vZGVsJ3MgLm10bCBmaWxlIHJlbGF0aXZlIHRvIHRoZSBjdXJyZW50IFVSTC4gSWZcbiAqIHRoZSB2YWx1ZSBpcyBgdHJ1ZWAsIHRoZW4gdGhlIHBhdGggYW5kIGJhc2VuYW1lIGdpdmVuIGZvciB0aGUgYG9iamBcbiAqIGF0dHJpYnV0ZSBpcyB1c2VkIHJlcGxhY2luZyB0aGUgLm9iaiBzdWZmaXggZm9yIC5tdGxcbiAqIEUuZy46IHtvYmo6ICdtb2RlbHMvZm9vLm9iaicsIG10bDogdHJ1ZX0gd291bGQgc2VhcmNoIGZvciAnbW9kZWxzL2Zvby5tdGwnXG4gKlxuICogVGhlIGBuYW1lYCBhdHRyaWJ1dGUgaXMgb3B0aW9uYWwgYW5kIGlzIGEgaHVtYW4gZnJpZW5kbHkgbmFtZSB0byBiZVxuICogaW5jbHVkZWQgd2l0aCB0aGUgcGFyc2VkIE9CSiBhbmQgTVRMIGZpbGVzLiBJZiBub3QgZ2l2ZW4sIHRoZSBiYXNlIC5vYmpcbiAqIGZpbGVuYW1lIHdpbGwgYmUgdXNlZC5cbiAqXG4gKiBUaGUgYGRvd25sb2FkTXRsVGV4dHVyZXNgIGF0dHJpYnV0ZSBpcyBhIGZsYWcgZm9yIGF1dG9tYXRpY2FsbHkgZG93bmxvYWRpbmdcbiAqIGFueSBpbWFnZXMgZm91bmQgaW4gdGhlIE1UTCBmaWxlIGFuZCBhdHRhY2hpbmcgdGhlbSB0byBlYWNoIE1hdGVyaWFsXG4gKiBjcmVhdGVkIGZyb20gdGhhdCBmaWxlLiBGb3IgZXhhbXBsZSwgaWYgbWF0ZXJpYWwubWFwRGlmZnVzZSBpcyBzZXQgKHRoZXJlXG4gKiB3YXMgZGF0YSBpbiB0aGUgTVRMIGZpbGUpLCB0aGVuIG1hdGVyaWFsLm1hcERpZmZ1c2UudGV4dHVyZSB3aWxsIGNvbnRhaW5cbiAqIHRoZSBkb3dubG9hZGVkIGltYWdlLiBUaGlzIG9wdGlvbiBkZWZhdWx0cyB0byBgdHJ1ZWAuIEJ5IGRlZmF1bHQsIHRoZSBNVEwnc1xuICogVVJMIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGxvY2F0aW9uIG9mIHRoZSBpbWFnZXMuXG4gKlxuICogVGhlIGBtdGxUZXh0dXJlUm9vdGAgYXR0cmlidXRlIGlzIG9wdGlvbmFsIGFuZCBzaG91bGQgcG9pbnQgdG8gdGhlIGxvY2F0aW9uXG4gKiBvbiB0aGUgc2VydmVyIHRoYXQgdGhpcyBNVEwncyB0ZXh0dXJlIGZpbGVzIGFyZSBsb2NhdGVkLiBUaGUgZGVmYXVsdCBpcyB0b1xuICogdXNlIHRoZSBNVEwgZmlsZSdzIGxvY2F0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlfSB0aGUgcmVzdWx0IG9mIGRvd25sb2FkaW5nIHRoZSBnaXZlbiBsaXN0IG9mIG1vZGVscy4gVGhlXG4gKiBwcm9taXNlIHdpbGwgcmVzb2x2ZSB3aXRoIGFuIG9iamVjdCB3aG9zZSBrZXlzIGFyZSB0aGUgbmFtZXMgb2YgdGhlIG1vZGVsc1xuICogYW5kIHRoZSB2YWx1ZSBpcyBpdHMgTWVzaCBvYmplY3QuIEVhY2ggTWVzaCBvYmplY3Qgd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBoYXZlIGl0cyBhZGRNYXRlcmlhbExpYnJhcnkoKSBtZXRob2QgY2FsbGVkIHRvIHNldCB0aGUgZ2l2ZW4gTVRMIGRhdGEgKGlmIGdpdmVuKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkTW9kZWxzIChtb2RlbHMpIHtcbiAgY29uc3QgZmluaXNoZWQgPSBbXTtcblxuICBmb3IgKGNvbnN0IG1vZGVsIG9mIG1vZGVscykge1xuICAgIGNvbnN0IHBhcnNlZCA9IFtdO1xuXG4gICAgaWYgKCFtb2RlbC5vYmopIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wib2JqXCIgYXR0cmlidXRlIG9mIG1vZGVsIG9iamVjdCBub3Qgc2V0LiBUaGUgLm9iaiBmaWxlIGlzIHJlcXVpcmVkIHRvIGJlIHNldCAnICtcbiAgICAgICAgJ2luIG9yZGVyIHRvIHVzZSBkb3dubG9hZE1vZGVscygpJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBpZiB0aGUgbmFtZSBpcyBub3QgcHJvdmlkZWQsIGRlcnZpdmUgaXQgZnJvbSB0aGUgZ2l2ZW4gT0JKXG4gICAgbGV0IG5hbWUgPSBtb2RlbC5uYW1lO1xuICAgIGlmICghbmFtZSkge1xuICAgICAgbGV0IHBhcnRzID0gbW9kZWwub2JqLnNwbGl0KCcvJyk7XG4gICAgICBuYW1lID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV0ucmVwbGFjZSgnLm9iaicsICcnKTtcbiAgICB9XG4gICAgcGFyc2VkLnB1c2goUHJvbWlzZS5yZXNvbHZlKG5hbWUpKVxuXG4gICAgcGFyc2VkLnB1c2goXG4gICAgICBmZXRjaChtb2RlbC5vYmopXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgTWVzaChkYXRhKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgLy8gRG93bmxvYWQgTWF0ZXJpYWxMaWJyYXJ5IGZpbGU/XG4gICAgaWYgKG1vZGVsLm10bCkge1xuICAgICAgbGV0IG10bCA9IG1vZGVsLm10bDtcbiAgICAgIGlmICh0eXBlb2YgbXRsID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgbXRsID0gbW9kZWwub2JqLnJlcGxhY2UoL1xcLm9iaiQvLCAnLm10bCcpO1xuICAgICAgfVxuXG4gICAgICBwYXJzZWQucHVzaChcbiAgICAgICAgZmV0Y2gobXRsKVxuICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBsZXQgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWxMaWJyYXJ5KGRhdGEpO1xuICAgICAgICAgICAgaWYgKG1vZGVsLmRvd25sb2FkTXRsVGV4dHVyZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGxldCByb290ID0gbW9kZWwubXRsVGV4dHVyZVJvb3Q7XG4gICAgICAgICAgICAgIGlmICghcm9vdCkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgZGlyZWN0b3J5IG9mIHRoZSBNVEwgZmlsZSBhcyBkZWZhdWx0XG4gICAgICAgICAgICAgICAgcm9vdCA9IG10bC5zdWJzdHIoMCwgbXRsLmxhc3RJbmRleE9mKFwiL1wiKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gZG93bmxvYWRNdGxUZXh0dXJlcyByZXR1cm5zIGEgUHJvbWlzZSB0aGF0XG4gICAgICAgICAgICAgIC8vIGlzIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSBpbWFnZXMgaXRcbiAgICAgICAgICAgICAgLy8gY29udGFpbnMgYXJlIGRvd25sb2FkZWQuIFRoZXNlIGFyZSB0aGVuXG4gICAgICAgICAgICAgIC8vIGF0dGFjaGVkIHRvIHRoZSBtYXAgZGF0YSBvYmplY3RzXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG1hdGVyaWFsKSxcbiAgICAgICAgICAgICAgICBkb3dubG9hZE10bFRleHR1cmVzKG1hdGVyaWFsLCByb290KVxuICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChQcm9taXNlLnJlc29sdmUobWF0ZXJpYWwpKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cblxuICAgIGZpbmlzaGVkLnB1c2goUHJvbWlzZS5hbGwocGFyc2VkKSk7XG4gIH1cblxuICByZXR1cm4gUHJvbWlzZS5hbGwoZmluaXNoZWQpXG4gICAgLnRoZW4oKG1zKSA9PiB7XG4gICAgICAvLyB0aGUgXCJmaW5pc2hlZFwiIHByb21pc2UgaXMgYSBsaXN0IG9mIG5hbWUsIE1lc2ggaW5zdGFuY2UsXG4gICAgICAvLyBhbmQgTWF0ZXJpYWxMaWJhcnkgaW5zdGFuY2UuIFRoaXMgdW5wYWNrcyBhbmQgcmV0dXJucyBhblxuICAgICAgLy8gb2JqZWN0IG1hcHBpbmcgbmFtZSB0byBNZXNoIChNZXNoIHBvaW50cyB0byBNVEwpLlxuICAgICAgY29uc3QgbW9kZWxzID0ge307XG5cbiAgICAgIGZvciAoY29uc3QgbW9kZWwgb2YgbXMpIHtcbiAgICAgICAgY29uc3QgW25hbWUsIG1lc2gsIG10bF0gPSBtb2RlbDtcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZTtcbiAgICAgICAgaWYgKG10bCkge1xuICAgICAgICAgIG1lc2guYWRkTWF0ZXJpYWxMaWJyYXJ5KG10bCk7XG4gICAgICAgIH1cbiAgICAgICAgbW9kZWxzW25hbWVdID0gbWVzaDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1vZGVscztcbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIFRha2VzIGluIGFuIG9iamVjdCBvZiBgbWVzaF9uYW1lYCwgYCcvdXJsL3RvL09CSi9maWxlJ2AgcGFpcnMgYW5kIGEgY2FsbGJhY2tcbiAqIGZ1bmN0aW9uLiBFYWNoIE9CSiBmaWxlIHdpbGwgYmUgYWpheGVkIGluIGFuZCBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0b1xuICogYW4gT0JKLk1lc2guIFdoZW4gYWxsIGZpbGVzIGhhdmUgc3VjY2Vzc2Z1bGx5IGRvd25sb2FkZWQgdGhlIGNhbGxiYWNrXG4gKiBmdW5jdGlvbiBwcm92aWRlZCB3aWxsIGJlIGNhbGxlZCBhbmQgcGFzc2VkIGluIGFuIG9iamVjdCBjb250YWluaW5nXG4gKiB0aGUgbmV3bHkgY3JlYXRlZCBtZXNoZXMuXG4gKlxuICogKipOb3RlOioqIEluIG9yZGVyIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIGFzIGEgd2F5IHRvIGRvd25sb2FkIG1lc2hlcywgYVxuICogd2Vic2VydmVyIG9mIHNvbWUgc29ydCBtdXN0IGJlIHVzZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5hbWVBbmRBdHRycyBhbiBvYmplY3Qgd2hlcmUgdGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgbWVzaCBhbmQgdGhlIHZhbHVlIGlzIHRoZSB1cmwgdG8gdGhhdCBtZXNoJ3MgT0JKIGZpbGVcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wbGV0aW9uQ2FsbGJhY2sgc2hvdWxkIGNvbnRhaW4gYSBmdW5jdGlvbiB0aGF0IHdpbGwgdGFrZSBvbmUgcGFyYW1ldGVyOiBhbiBvYmplY3QgYXJyYXkgd2hlcmUgdGhlIGtleXMgd2lsbCBiZSB0aGUgdW5pcXVlIG9iamVjdCBuYW1lIGFuZCB0aGUgdmFsdWUgd2lsbCBiZSBhIE1lc2ggb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1lc2hlcyBJbiBjYXNlIG90aGVyIG1lc2hlcyBhcmUgbG9hZGVkIHNlcGFyYXRlbHkgb3IgaWYgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHZhcmlhYmxlIGlzIGRlc2lyZWQgdG8gYmUgdXNlZCwgcGFzcyBpbiBhIChwb3NzaWJseSBlbXB0eSkganNvbiBvYmplY3Qgb2YgdGhlIHBhdHRlcm46IHsgJzxtZXNoX25hbWU+JzogT0JKLk1lc2ggfVxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkTWVzaGVzIChuYW1lQW5kVVJMcywgY29tcGxldGlvbkNhbGxiYWNrLCBtZXNoZXMpIHtcbiAgaWYgKG1lc2hlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWVzaGVzID0ge307XG4gIH1cblxuICBjb25zdCBjb21wbGV0ZWQgPSBbXTtcblxuICBmb3IgKGNvbnN0IG1lc2hfbmFtZSBpbiBuYW1lQW5kVVJMcykge1xuICAgIGlmICghbmFtZUFuZFVSTHMuaGFzT3duUHJvcGVydHkobWVzaF9uYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHVybCA9IG5hbWVBbmRVUkxzW21lc2hfbmFtZV07XG4gICAgY29tcGxldGVkLnB1c2goXG4gICAgICBmZXRjaCh1cmwpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiBbbWVzaF9uYW1lLCBuZXcgTWVzaChkYXRhKV07XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIFByb21pc2UuYWxsKGNvbXBsZXRlZClcbiAgICAudGhlbigobXMpID0+IHtcbiAgICAgIGZvciAobGV0IFtuYW1lLCBtZXNoXSBvZiBtcykge1xuICAgICAgICBtZXNoZXNbbmFtZV0gPSBtZXNoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29tcGxldGlvbkNhbGxiYWNrKG1lc2hlcyk7XG4gICAgfSk7XG59XG5cbnZhciBfYnVpbGRCdWZmZXIgPSBmdW5jdGlvbiggZ2wsIHR5cGUsIGRhdGEsIGl0ZW1TaXplICl7XG4gIHZhciBidWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgdmFyIGFycmF5VmlldyA9IHR5cGUgPT09IGdsLkFSUkFZX0JVRkZFUiA/IEZsb2F0MzJBcnJheSA6IFVpbnQxNkFycmF5O1xuICBnbC5iaW5kQnVmZmVyKHR5cGUsIGJ1ZmZlcik7XG4gIGdsLmJ1ZmZlckRhdGEodHlwZSwgbmV3IGFycmF5VmlldyhkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xuICBidWZmZXIuaXRlbVNpemUgPSBpdGVtU2l6ZTtcbiAgYnVmZmVyLm51bUl0ZW1zID0gZGF0YS5sZW5ndGggLyBpdGVtU2l6ZTtcbiAgcmV0dXJuIGJ1ZmZlcjtcbn07XG5cbi8qKlxuICogVGFrZXMgaW4gdGhlIFdlYkdMIGNvbnRleHQgYW5kIGEgTWVzaCwgdGhlbiBjcmVhdGVzIGFuZCBhcHBlbmRzIHRoZSBidWZmZXJzXG4gKiB0byB0aGUgbWVzaCBvYmplY3QgYXMgYXR0cmlidXRlcy5cbiAqXG4gKiBAcGFyYW0ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgdGhlIGBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKWAgY29udGV4dCBpbnN0YW5jZVxuICogQHBhcmFtIHtNZXNofSBtZXNoIGEgc2luZ2xlIGBPQkouTWVzaGAgaW5zdGFuY2VcbiAqXG4gKiBUaGUgbmV3bHkgY3JlYXRlZCBtZXNoIGF0dHJpYnV0ZXMgYXJlOlxuICpcbiAqIEF0dHJidXRlIHwgRGVzY3JpcHRpb25cbiAqIDotLS0gfCAtLS1cbiAqICoqbm9ybWFsQnVmZmVyKiogICAgICAgfGNvbnRhaW5zIHRoZSBtb2RlbCYjMzk7cyBWZXJ0ZXggTm9ybWFsc1xuICogbm9ybWFsQnVmZmVyLml0ZW1TaXplICB8c2V0IHRvIDMgaXRlbXNcbiAqIG5vcm1hbEJ1ZmZlci5udW1JdGVtcyAgfHRoZSB0b3RhbCBudW1iZXIgb2YgdmVydGV4IG5vcm1hbHNcbiAqIHxcbiAqICoqdGV4dHVyZUJ1ZmZlcioqICAgICAgfGNvbnRhaW5zIHRoZSBtb2RlbCYjMzk7cyBUZXh0dXJlIENvb3JkaW5hdGVzXG4gKiB0ZXh0dXJlQnVmZmVyLml0ZW1TaXplIHxzZXQgdG8gMiBpdGVtc1xuICogdGV4dHVyZUJ1ZmZlci5udW1JdGVtcyB8dGhlIG51bWJlciBvZiB0ZXh0dXJlIGNvb3JkaW5hdGVzXG4gKiB8XG4gKiAqKnZlcnRleEJ1ZmZlcioqICAgICAgIHxjb250YWlucyB0aGUgbW9kZWwmIzM5O3MgVmVydGV4IFBvc2l0aW9uIENvb3JkaW5hdGVzIChkb2VzIG5vdCBpbmNsdWRlIHcpXG4gKiB2ZXJ0ZXhCdWZmZXIuaXRlbVNpemUgIHxzZXQgdG8gMyBpdGVtc1xuICogdmVydGV4QnVmZmVyLm51bUl0ZW1zICB8dGhlIHRvdGFsIG51bWJlciBvZiB2ZXJ0aWNlc1xuICogfFxuICogKippbmRleEJ1ZmZlcioqICAgICAgICB8Y29udGFpbnMgdGhlIGluZGljZXMgb2YgdGhlIGZhY2VzXG4gKiBpbmRleEJ1ZmZlci5pdGVtU2l6ZSAgIHxpcyBzZXQgdG8gMVxuICogaW5kZXhCdWZmZXIubnVtSXRlbXMgICB8dGhlIHRvdGFsIG51bWJlciBvZiBpbmRpY2VzXG4gKlxuICogQSBzaW1wbGUgZXhhbXBsZSAoYSBsb3Qgb2Ygc3RlcHMgYXJlIG1pc3NpbmcsIHNvIGRvbid0IGNvcHkgYW5kIHBhc3RlKTpcbiAqXG4gKiAgICAgdmFyIGdsICAgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSxcbiAqICAgICAgICAgbWVzaCA9IE9CSi5NZXNoKG9ial9maWxlX2RhdGEpO1xuICogICAgIC8vIGNvbXBpbGUgdGhlIHNoYWRlcnMgYW5kIGNyZWF0ZSBhIHNoYWRlciBwcm9ncmFtXG4gKiAgICAgdmFyIHNoYWRlclByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gKiAgICAgLy8gY29tcGlsYXRpb24gc3R1ZmYgaGVyZVxuICogICAgIC4uLlxuICogICAgIC8vIG1ha2Ugc3VyZSB5b3UgaGF2ZSB2ZXJ0ZXgsIHZlcnRleCBub3JtYWwsIGFuZCB0ZXh0dXJlIGNvb3JkaW5hdGVcbiAqICAgICAvLyBhdHRyaWJ1dGVzIGxvY2F0ZWQgaW4geW91ciBzaGFkZXJzIGFuZCBhdHRhY2ggdGhlbSB0byB0aGUgc2hhZGVyIHByb2dyYW1cbiAqICAgICBzaGFkZXJQcm9ncmFtLnZlcnRleFBvc2l0aW9uQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJhVmVydGV4UG9zaXRpb25cIik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhQb3NpdGlvbkF0dHJpYnV0ZSk7XG4gKlxuICogICAgIHNoYWRlclByb2dyYW0udmVydGV4Tm9ybWFsQXR0cmlidXRlID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyUHJvZ3JhbSwgXCJhVmVydGV4Tm9ybWFsXCIpO1xuICogICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlclByb2dyYW0udmVydGV4Tm9ybWFsQXR0cmlidXRlKTtcbiAqXG4gKiAgICAgc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihzaGFkZXJQcm9ncmFtLCBcImFUZXh0dXJlQ29vcmRcIik7XG4gKiAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICpcbiAqICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIHZlcnRleCwgdmVydGV4IG5vcm1hbCwgYW5kIHRleHR1cmUgY29vcmRpbmF0ZSBidWZmZXJzXG4gKiAgICAgLy8gYW5kIHNhdmUgb24gdG8gdGhlIG1lc2ggb2JqZWN0XG4gKiAgICAgT0JKLmluaXRNZXNoQnVmZmVycyhnbCwgbWVzaCk7XG4gKlxuICogICAgIC8vIG5vdyB0byByZW5kZXIgdGhlIG1lc2hcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC52ZXJ0ZXhCdWZmZXIpO1xuICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhQb3NpdGlvbkF0dHJpYnV0ZSwgbWVzaC52ZXJ0ZXhCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gKiAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGF0IHRoZSBtZXNoIGRvZXNuJ3QgY29udGFpblxuICogICAgIC8vIGFueSB0ZXh0dXJlIGNvb3JkaW5hdGVzIChlLmcuIHN1emFubmUub2JqIGluIHRoZSBkZXZlbG9wbWVudCBicmFuY2gpLlxuICogICAgIC8vIGluIHRoaXMgY2FzZSwgdGhlIHRleHR1cmUgdmVydGV4QXR0cmliQXJyYXkgd2lsbCBuZWVkIHRvIGJlIGRpc2FibGVkXG4gKiAgICAgLy8gYmVmb3JlIHRoZSBjYWxsIHRvIGRyYXdFbGVtZW50c1xuICogICAgIGlmKCFtZXNoLnRleHR1cmVzLmxlbmd0aCl7XG4gKiAgICAgICBnbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICogICAgIH1cbiAqICAgICBlbHNle1xuICogICAgICAgLy8gaWYgdGhlIHRleHR1cmUgdmVydGV4QXR0cmliQXJyYXkgaGFzIGJlZW4gcHJldmlvdXNseVxuICogICAgICAgLy8gZGlzYWJsZWQsIHRoZW4gaXQgbmVlZHMgdG8gYmUgcmUtZW5hYmxlZFxuICogICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyUHJvZ3JhbS50ZXh0dXJlQ29vcmRBdHRyaWJ1dGUpO1xuICogICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG1lc2gudGV4dHVyZUJ1ZmZlcik7XG4gKiAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHNoYWRlclByb2dyYW0udGV4dHVyZUNvb3JkQXR0cmlidXRlLCBtZXNoLnRleHR1cmVCdWZmZXIuaXRlbVNpemUsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gKiAgICAgfVxuICpcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbWVzaC5ub3JtYWxCdWZmZXIpO1xuICogICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyUHJvZ3JhbS52ZXJ0ZXhOb3JtYWxBdHRyaWJ1dGUsIG1lc2gubm9ybWFsQnVmZmVyLml0ZW1TaXplLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICpcbiAqICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBtb2RlbC5tZXNoLmluZGV4QnVmZmVyKTtcbiAqICAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBtb2RlbC5tZXNoLmluZGV4QnVmZmVyLm51bUl0ZW1zLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0TWVzaEJ1ZmZlcnMgKCBnbCwgbWVzaCApIHtcbiAgbWVzaC5ub3JtYWxCdWZmZXIgPSBfYnVpbGRCdWZmZXIoZ2wsIGdsLkFSUkFZX0JVRkZFUiwgbWVzaC52ZXJ0ZXhOb3JtYWxzLCAzKTtcbiAgbWVzaC50ZXh0dXJlQnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudGV4dHVyZXMsIG1lc2gudGV4dHVyZVN0cmlkZSk7XG4gIG1lc2gudmVydGV4QnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5BUlJBWV9CVUZGRVIsIG1lc2gudmVydGljZXMsIDMpO1xuICBtZXNoLmluZGV4QnVmZmVyID0gX2J1aWxkQnVmZmVyKGdsLCBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbWVzaC5pbmRpY2VzLCAxKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVNZXNoQnVmZmVycyAoIGdsLCBtZXNoICkge1xuICBnbC5kZWxldGVCdWZmZXIobWVzaC5ub3JtYWxCdWZmZXIpO1xuICBnbC5kZWxldGVCdWZmZXIobWVzaC50ZXh0dXJlQnVmZmVyKTtcbiAgZ2wuZGVsZXRlQnVmZmVyKG1lc2gudmVydGV4QnVmZmVyKTtcbiAgZ2wuZGVsZXRlQnVmZmVyKG1lc2guaW5kZXhCdWZmZXIpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWxzLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==